<!DOCTYPE html>
<html lang="en" data-rh="lang"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Rendering a Sphere on a Quad. Making the Sphere Impostor Feel More… | by Ben Golus | Medium</title><meta data-rh="true" charset="utf-8"><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"><meta data-rh="true" name="theme-color" content="#000000"><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"><meta data-rh="true" property="al:ios:app_name" content="Medium"><meta data-rh="true" property="al:ios:app_store_id" content="828256236"><meta data-rh="true" property="al:android:package" content="com.medium.reader"><meta data-rh="true" property="fb:app_id" content="542599432471018"><meta data-rh="true" property="og:site_name" content="Medium"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-24T17:37:29.084Z"><meta data-rh="true" name="title" content="Rendering a Sphere on a Quad. Making the Sphere Impostor Feel More… | by Ben Golus | Medium"><meta data-rh="true" property="og:title" content="Rendering a Sphere on a Quad"><meta data-rh="true" property="al:android:url" content="medium://p/13c92025570c"><meta data-rh="true" property="al:ios:url" content="medium://p/13c92025570c"><meta data-rh="true" property="al:android:app_name" content="Medium"><meta data-rh="true" name="description" content="GPU raytracing is all the rage these days, so lets talk about about it! Today we’re going to raytrace a single sphere. Yeah, I know. Not super fancy. You can do a search on Shadertoy and get hundreds…"><meta data-rh="true" property="og:description" content="Making the Sphere Impostor Feel More Competent"><meta data-rh="true" property="og:url" content="https://bgolus.medium.com/rendering-a-sphere-on-a-quad-13c92025570c"><meta data-rh="true" property="al:web:url" content="https://bgolus.medium.com/rendering-a-sphere-on-a-quad-13c92025570c"><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*5VfRfBEZqnNdt1F7o0yPBA.png"><meta data-rh="true" property="article:author" content="https://bgolus.medium.com"><meta data-rh="true" name="author" content="Ben Golus"><meta data-rh="true" name="robots" content="index,follow,max-image-preview:large"><meta data-rh="true" name="referrer" content="unsafe-url"><meta data-rh="true" property="twitter:title" content="Rendering a Sphere on a Quad"><meta data-rh="true" name="twitter:site" content="@Medium"><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/13c92025570c"><meta data-rh="true" property="twitter:description" content="Making the Sphere Impostor Feel More Competent"><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*5VfRfBEZqnNdt1F7o0yPBA.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@bgolus"><meta data-rh="true" name="twitter:label1" content="Reading time"><meta data-rh="true" name="twitter:data1" content="36 min read"><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/1*m-R_BkNf1Qjr1YbyOIJY2w.png"><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://bgolus.medium.com/osd.xml"><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:152:152/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:120:120/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:76:76/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:60:60/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/Medium-Avatar-500x500.svg" color="#171717"><link data-rh="true" rel="preconnect" href="https://glyph.medium.com/" crossorigin=""><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/unbound.css"><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/unbound.css"><link data-rh="true" rel="author" href="https://bgolus.medium.com/"><link data-rh="true" rel="canonical" href="https://bgolus.medium.com/rendering-a-sphere-on-a-quad-13c92025570c"><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/13c92025570c"><style type="text/css" data-fela-rehydration="589" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="589" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{fill:rgba(0, 0, 0, 1)}.av{height:22px}.aw{margin-left:16px}.ax{border:none}.ay{border-radius:20px}.az{width:240px}.ba{background:#F9F9F9}.bb path{fill:#6B6B6B}.bd{outline:none}.be{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bf{font-size:14px}.bg{width:100%}.bh{padding:10px 20px 10px 0}.bi{background-color:transparent}.bj{color:#242424}.bk::placeholder{color:#6B6B6B}.bl{display:inline-block}.bm{margin-left:12px}.bn{margin-right:12px}.bo{border-radius:4px}.bp{margin-left:24px}.bq{height:24px}.bw{background-color:#F9F9F9}.bx{border-radius:50%}.by{height:32px}.bz{width:32px}.ca{justify-content:center}.cg{max-width:680px}.ch{min-width:0}.ci{animation:k1 1.2s ease-in-out infinite}.cj{height:100vh}.ck{margin-bottom:16px}.cl{margin-top:48px}.cm{align-items:flex-start}.cn{flex-direction:column}.co{justify-content:space-between}.cp{margin-bottom:24px}.cv{width:80%}.cw{background-color:#F2F2F2}.dc{height:44px}.dd{width:44px}.de{margin:auto 0}.df{margin-bottom:4px}.dg{height:16px}.dh{width:120px}.di{width:80px}.do{margin-bottom:8px}.dp{width:96%}.dq{width:98%}.dr{width:81%}.ds{margin-left:8px}.dt{color:#6B6B6B}.du{font-size:13px}.dv{height:100%}.eo{color:#FFFFFF}.ep{fill:#FFFFFF}.eq{background:#1A8917}.er{border-color:#1A8917}.ev:disabled{cursor:inherit !important}.ew:disabled{opacity:0.3}.ex:disabled:hover{background:#1A8917}.ey:disabled:hover{border-color:#1A8917}.ez{border-radius:99em}.fa{border-width:1px}.fb{border-style:solid}.fc{box-sizing:border-box}.fd{text-decoration:none}.fe{text-align:center}.fh{margin-right:32px}.fi{position:relative}.fj{fill:#6B6B6B}.fm{background:transparent}.fn svg{margin-left:4px}.fo svg{fill:#6B6B6B}.fq{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fr{position:absolute}.fy{margin:0 24px}.gc{background:rgba(255, 255, 255, 1)}.gd{border:1px solid #F2F2F2}.ge{box-shadow:0 1px 4px #F2F2F2}.gf{max-height:100vh}.gg{overflow-y:auto}.gh{left:0}.gi{top:calc(100vh + 100px)}.gj{bottom:calc(100vh + 100px)}.gk{width:10px}.gl{pointer-events:none}.gm{word-break:break-word}.gn{word-wrap:break-word}.go:after{display:block}.gp:after{content:""}.gq:after{clear:both}.gr{line-height:1.23}.gs{letter-spacing:0}.gt{font-style:normal}.gu{font-weight:700}.hp{margin-bottom:-0.27em}.hq{line-height:1.394}.ig{@media all and (max-width: 551.98px):8px}.ih{@media all and (min-width: 552px) and (max-width: 727.98px):8px}.ii{@media all and (min-width: 728px) and (max-width: 903.98px):16px}.ij{@media all and (min-width: 904px) and (max-width: 1079.98px):16px}.ik{@media all and (min-width: 1080px):16px}.iq{align-items:baseline}.ir{width:48px}.is{height:48px}.it{border:2px solid rgba(255, 255, 255, 1)}.iu{z-index:0}.iv{box-shadow:none}.iw{border:1px solid rgba(0, 0, 0, 0.05)}.ix{margin-bottom:2px}.iy{flex-wrap:nowrap}.iz{font-size:16px}.ja{line-height:24px}.jc{margin:0 8px}.jd{display:inline}.je{color:#1A8917}.jf{fill:#1A8917}.ji{flex:0 0 auto}.jl{flex-wrap:wrap}.jm{padding-left:8px}.jn{padding-right:8px}.ko> *{flex-shrink:0}.kp{overflow-x:scroll}.kq::-webkit-scrollbar{display:none}.kr{scrollbar-width:none}.ks{-ms-overflow-style:none}.kt{width:74px}.ku{flex-direction:row}.kv{z-index:2}.kw{margin-right:4px}.kz{-webkit-user-select:none}.la{border:0}.lb{fill:rgba(117, 117, 117, 1)}.le{outline:0}.lf{user-select:none}.lg> svg{pointer-events:none}.lp{cursor:progress}.lq{margin-left:4px}.lr{margin-top:0px}.ls{opacity:1}.lt{padding:4px 0}.lw{width:16px}.ly{display:inline-flex}.me{max-width:100%}.mf{padding:8px 2px}.mg svg{color:#6B6B6B}.mx{clear:both}.nd{margin-left:auto}.ne{margin-right:auto}.nf{max-width:1274px}.nl{padding-top:5px}.nm{padding-bottom:5px}.no{cursor:zoom-in}.np{z-index:auto}.nr{height:auto}.ns{line-height:1.58}.nt{letter-spacing:-0.004em}.nu{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.on{margin-bottom:-0.46em}.oo{font-style:italic}.op{text-decoration:underline}.oq{margin-top:32px}.or{margin-bottom:14px}.os{padding-top:24px}.ot{padding-bottom:10px}.ou{background-color:#000000}.ov{height:3px}.ow{width:3px}.ox{margin-right:20px}.oy{line-height:1.12}.oz{letter-spacing:-0.022em}.pa{font-weight:600}.pt{margin-bottom:-0.28em}.pz{list-style-type:decimal}.qa{margin-left:30px}.qb{padding-left:0px}.qm{box-shadow:inset 0 0 0 1px #F2F2F2}.qn{padding:0px}.qo{padding:16px 20px}.qp{flex:1 1 auto}.qr{overflow:hidden}.qs{max-height:40px}.qt{text-overflow:ellipsis}.qu{display:-webkit-box}.qv{-webkit-line-clamp:2}.qw{-webkit-box-orient:vertical}.qy{margin-top:8px}.qz{margin-top:12px}.ra{width:160px}.rb{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*Idz4mxvO6WeQZvu2)}.rc{background-origin:border-box}.rd{background-size:cover}.re{height:167px}.rf{background-position:50% 50%}.rg{padding:2px 4px}.rh{font-size:75%}.ri> strong{font-family:inherit}.rj{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.rk{overflow-x:auto}.rl{padding:20px}.rm{border-radius:0}.rn{background:#F2F2F2}.ro{line-height:1.18}.rp{margin-top:-0.09em}.rq{margin-bottom:-0.09em}.rr{white-space:pre-wrap}.rs{min-width:fit-content}.sg{margin-bottom:-0.31em}.sh{margin-top:10px}.si{max-width:728px}.sl{margin:auto}.sm{padding-bottom:100%}.sn{height:0}.so{margin-top:0.91em}.sp{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*QjgsXLFVWkJjuTyf)}.sq{background-image:url(https://miro.medium.com/v2/resize:fit:320/0*rqVk4RKYCy5-RGKs.png)}.sr{max-width:856px}.ss{max-width:647px}.st{max-width:1000px}.sz{box-shadow:inset 3px 0 0 0 #242424}.ta{padding-left:23px}.tb{margin-left:-20px}.tc{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*pRcdY50Py0BVmMKT)}.td{background-image:url(https://miro.medium.com/v2/da:true/resize:fit:320/0*FUBrmadIsnsXsHz8)}.te{max-width:690px}.tf{margin-bottom:26px}.tg{margin-top:6px}.th{margin-right:8px}.ti{padding:8px 16px}.tj{border-radius:100px}.tk{transition:background 300ms ease}.tm{white-space:nowrap}.tn{border-top:none}.tt{height:52px}.tu{max-height:52px}.tv{box-sizing:content-box}.tw{position:static}.tx{z-index:1}.tz{max-width:155px}.uk{align-items:flex-end}.ul{width:76px}.um{height:76px}.un{border:2px solid #F9F9F9}.uo{height:72px}.up{width:72px}.uq{width:auto}.ur{stroke:#F2F2F2}.us{height:36px}.ut{width:36px}.uu{color:#F2F2F2}.uv{fill:#F2F2F2}.uw{border-color:#F2F2F2}.vc{font-weight:500}.vd{font-size:24px}.ve{line-height:30px}.vf{letter-spacing:-0.016em}.vg{margin-top:16px}.vh{height:0px}.vi{border-bottom:solid 1px #E5E5E5}.vo{margin-top:72px}.vp{padding:24px 0}.vq{margin-bottom:0px}.vr{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.es:hover{background:#156D12}.et:hover{border-color:#156D12}.eu:hover{cursor:pointer}.fk:hover{color:#242424}.fl:hover{fill:#242424}.fp:hover svg{fill:#242424}.fs:hover{background-color:rgba(0, 0, 0, 0.1)}.jb:hover{text-decoration:underline}.jg:hover:not(:disabled){color:#156D12}.jh:hover:not(:disabled){fill:#156D12}.ld:hover{fill:rgba(8, 8, 8, 1)}.lu:hover{fill:#000000}.lv:hover p{color:#000000}.lx:hover{color:#000000}.mh:hover svg{color:#000000}.tl:hover{background-color:#F2F2F2}.ux:hover{background:#F2F2F2}.uy:hover{border-color:#F2F2F2}.uz:hover{cursor:wait}.va:hover{color:#F2F2F2}.vb:hover{fill:#F2F2F2}.bc:focus-within path{fill:#242424}.lc:focus{fill:rgba(8, 8, 8, 1)}.mi:focus svg{color:#000000}.nq:focus{transform:scale(1.01)}.lh:active{border-style:none}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ee{font-size:14px}.ef{line-height:20px}.el{font-size:13px}.em{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{line-height:52px}.ho{letter-spacing:-0.011em}.id{font-size:22px}.ie{margin-top:0.92em}.if{line-height:28px}.ip{align-items:center}.ka{border-top:solid 1px #F2F2F2}.kb{border-bottom:solid 1px #F2F2F2}.kc{margin:32px 0 0}.kd{padding:3px 8px}.km> *{margin-right:24px}.kn> :last-child{margin-right:0}.lo{margin-top:0px}.md{margin:0}.nc{max-width:1192px}.nk{margin-top:56px}.oj{font-size:20px}.ok{margin-top:2.14em}.ol{line-height:32px}.om{letter-spacing:-0.003em}.pp{font-size:24px}.pq{margin-top:1.25em}.pr{line-height:30px}.ps{letter-spacing:-0.016em}.py{margin-top:0.94em}.qg{margin-top:1.14em}.ql{margin-top:32px}.sd{margin-top:1.72em}.se{line-height:24px}.sf{letter-spacing:0}.sy{margin-top:1.95em}.ts{margin-bottom:88px}.ue{display:inline-block}.uj{padding-top:72px}.vn{margin-top:40px}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.ln{margin-top:0px}.sj{margin-left:auto}.sk{text-align:center}.ud{display:inline-block}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.lm{margin-top:0px}.uc{display:inline-block}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.lk{margin-top:0px}.ll{margin-right:0px}.qq{padding:10px 12px 10px}.ub{display:inline-block}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.br{width:24px}.cb{margin:0 24px}.cq{height:40px}.cx{margin-bottom:44px}.dj{margin-bottom:32px}.dw{font-size:13px}.dx{line-height:20px}.eg{padding:0px 8px 1px}.ft{margin-bottom:4px}.gv{font-size:32px}.gw{margin-top:1.01em}.gx{line-height:38px}.gy{letter-spacing:-0.014em}.hr{font-size:18px}.hs{margin-top:0.79em}.ht{line-height:24px}.il{align-items:flex-start}.jj{flex-direction:column}.jo{margin:24px -24px 0}.jp{padding:0}.ke> *{margin-right:8px}.kf> :last-child{margin-right:24px}.kx{margin-left:0px}.li{margin-top:0px}.lj{margin-right:0px}.lz{margin:0}.mj{border:1px solid #F2F2F2}.mk{border-radius:99em}.ml{padding:0px 16px 0px 12px}.mm{height:38px}.mn{align-items:center}.mp svg{margin-right:8px}.my{max-width:100%}.ng{margin-top:40px}.nv{margin-top:1.56em}.nw{line-height:28px}.nx{letter-spacing:-0.003em}.pb{font-size:20px}.pc{margin-top:0.93em}.pd{letter-spacing:0}.pu{margin-top:0.67em}.qc{margin-top:1.34em}.qh{margin-top:24px}.rt{font-size:16px}.ru{margin-top:1.23em}.su{margin-top:1.2em}.to{margin-bottom:80px}.ua{display:inline-block}.uf{padding-top:48px}.vj{margin-top:32px}.mo:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bu{width:64px}.ce{margin:0 64px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.ec{font-size:14px}.ed{line-height:20px}.ej{font-size:13px}.ek{padding:5px 12px}.ff{display:flex}.fw{margin-bottom:68px}.ga{max-width:680px}.hh{font-size:42px}.hi{margin-top:1.19em}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.ia{font-size:22px}.ib{margin-top:0.92em}.ic{line-height:28px}.io{align-items:center}.jw{border-top:solid 1px #F2F2F2}.jx{border-bottom:solid 1px #F2F2F2}.jy{margin:32px 0 0}.jz{padding:3px 8px}.kk> *{margin-right:24px}.kl> :last-child{margin-right:0}.mc{margin:0}.nb{max-width:1192px}.nj{margin-top:56px}.of{font-size:20px}.og{margin-top:2.14em}.oh{line-height:32px}.oi{letter-spacing:-0.003em}.pl{font-size:24px}.pm{margin-top:1.25em}.pn{line-height:30px}.po{letter-spacing:-0.016em}.px{margin-top:0.94em}.qf{margin-top:1.14em}.qk{margin-top:32px}.sa{margin-top:1.72em}.sb{line-height:24px}.sc{letter-spacing:0}.sx{margin-top:1.95em}.tr{margin-bottom:88px}.ui{padding-top:72px}.vm{margin-top:40px}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bt{width:64px}.cd{margin:0 48px}.cs{height:48px}.cz{margin-bottom:52px}.dl{margin-bottom:48px}.ea{font-size:13px}.eb{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:68px}.fz{max-width:680px}.hd{font-size:42px}.he{margin-top:1.19em}.hf{line-height:52px}.hg{letter-spacing:-0.011em}.hx{font-size:22px}.hy{margin-top:0.92em}.hz{line-height:28px}.in{align-items:center}.js{border-top:solid 1px #F2F2F2}.jt{border-bottom:solid 1px #F2F2F2}.ju{margin:32px 0 0}.jv{padding:3px 8px}.ki> *{margin-right:24px}.kj> :last-child{margin-right:0}.mb{margin:0}.na{max-width:100%}.ni{margin-top:56px}.ob{font-size:20px}.oc{margin-top:2.14em}.od{line-height:32px}.oe{letter-spacing:-0.003em}.ph{font-size:24px}.pi{margin-top:1.25em}.pj{line-height:30px}.pk{letter-spacing:-0.016em}.pw{margin-top:0.94em}.qe{margin-top:1.14em}.qj{margin-top:32px}.rx{margin-top:1.72em}.ry{line-height:24px}.rz{letter-spacing:0}.sw{margin-top:1.95em}.tq{margin-bottom:88px}.uh{padding-top:72px}.vl{margin-top:40px}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dy{font-size:13px}.dz{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.gz{font-size:32px}.ha{margin-top:1.01em}.hb{line-height:38px}.hc{letter-spacing:-0.014em}.hu{font-size:18px}.hv{margin-top:0.79em}.hw{line-height:24px}.im{align-items:flex-start}.jk{flex-direction:column}.jq{margin:24px 0 0}.jr{padding:0}.kg> *{margin-right:8px}.kh> :last-child{margin-right:8px}.ky{margin-left:0px}.ma{margin:0}.mq{border:1px solid #F2F2F2}.mr{border-radius:99em}.ms{padding:0px 16px 0px 12px}.mt{height:38px}.mu{align-items:center}.mw svg{margin-right:8px}.mz{max-width:100%}.nh{margin-top:40px}.ny{margin-top:1.56em}.nz{line-height:28px}.oa{letter-spacing:-0.003em}.pe{font-size:20px}.pf{margin-top:0.93em}.pg{letter-spacing:0}.pv{margin-top:0.67em}.qd{margin-top:1.34em}.qi{margin-top:24px}.rv{font-size:16px}.rw{margin-top:1.23em}.sv{margin-top:1.2em}.tp{margin-bottom:80px}.ug{padding-top:48px}.vk{margin-top:32px}.mv:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="print">.ty{display:none}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.nn{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style><style type="text/css" data-fela-rehydration="589" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.qx{max-height:none}</style><script type="text/javascript" async="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/recaptcha__ru.js" crossorigin="anonymous" integrity="sha384-YOJej8+SW24+azuKp+HMckOGxXSKPImXhB96OtWCBN5DufElue5LFQAg7ORt9JgM"></script><script async="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/branch-latest.min.js"></script><script type="application/ld+json" data-rh="true">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*5VfRfBEZqnNdt1F7o0yPBA.png"],"url":"https:\u002F\u002Fbgolus.medium.com\u002Frendering-a-sphere-on-a-quad-13c92025570c","dateCreated":"2021-01-10T02:03:11.120Z","datePublished":"2021-01-10T02:03:11.120Z","dateModified":"2024-05-24T17:37:29.084Z","headline":"Rendering a Sphere on a Quad - Ben Golus - Medium","name":"Rendering a Sphere on a Quad - Ben Golus - Medium","description":"GPU raytracing is all the rage these days, so lets talk about about it! Today we’re going to raytrace a single sphere. Yeah, I know. Not super fancy. You can do a search on Shadertoy and get hundreds…","identifier":"13c92025570c","author":{"@type":"Person","name":"Ben Golus","url":"https:\u002F\u002Fbgolus.medium.com"},"creator":["Ben Golus"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fbgolus.medium.com\u002F","logo":{"@type":"ImageObject","width":308,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:308\u002F1*OMF3fSqH8t4xBJ9-6oZDZw.png"}},"mainEntityOfPage":"https:\u002F\u002Fbgolus.medium.com\u002Frendering-a-sphere-on-a-quad-13c92025570c"}</script><script async="true" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/google-analytics_analytics.js" data-rh="true"></script><script data-rh="true">window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-7JY7T788PK');</script><script type="text/javascript" data-rh="true">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0);
branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {metadata: {}, 'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled': null}, function(err, data) {});</script><script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/enterprise.js" data-rh="true"></script></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div><script>if (window.self !== window.top) window.location = "about:blank"</script></div><div class="l c"><div class="l m n o c" style="transform: translateY(-57px);"><div class="p q r s t u v w x i d y z"><a class="dt ag du be ak b am an ao ap aq ar as at s u w i d q dv z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F13c92025570c&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;source=---two_column_layout_nav----------------------------------" rel="noopener follow">Open in app<svg width="10" height="10" viewBox="0 0 10 10" fill="none" class="ds"><path d="M.98 8.48a.37.37 0 1 0 .54.54l-.54-.54zm7.77-7.23h.38c0-.2-.17-.38-.38-.38v.38zM8.37 6.5a.37.37 0 1 0 .76 0h-.76zM3.5.87a.37.37 0 1 0 0 .76V.88zM1.52 9.03l7.5-7.5-.54-.54-7.5 7.5.54.54zm6.86-7.77V6.5h.74V1.25h-.74zm-4.88.38h5.25V.88H3.5v.74z" fill="currentColor"></path></svg></a><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">Sign up</button></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" href="https://medium.com/?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><svg viewBox="0 0 3940 610" class="au av"><path d="M594.79 308.2c0 163.76-131.85 296.52-294.5 296.52S5.8 472 5.8 308.2 137.65 11.69 300.29 11.69s294.5 132.75 294.5 296.51M917.86 308.2c0 154.16-65.93 279.12-147.25 279.12s-147.25-125-147.25-279.12S689.29 29.08 770.61 29.08s147.25 125 147.25 279.12M1050 308.2c0 138.12-23.19 250.08-51.79 250.08s-51.79-112-51.79-250.08 23.19-250.08 51.8-250.08S1050 170.09 1050 308.2M1862.77 37.4l.82-.18v-6.35h-167.48l-155.51 365.5-155.51-365.5h-180.48v6.35l.81.18c30.57 6.9 46.09 17.19 46.09 54.3v434.45c0 37.11-15.58 47.4-46.15 54.3l-.81.18V587H1327v-6.35l-.81-.18c-30.57-6.9-46.09-17.19-46.09-54.3V116.9L1479.87 587h11.33l205.59-483.21V536.9c-2.62 29.31-18 38.36-45.68 44.61l-.82.19v6.3h213.3v-6.3l-.82-.19c-27.71-6.25-43.46-15.3-46.08-44.61l-.14-445.2h.14c0-37.11 15.52-47.4 46.08-54.3m97.43 287.8c3.49-78.06 31.52-134.4 78.56-135.37 14.51.24 26.68 5 36.14 14.16 20.1 19.51 29.55 60.28 28.09 121.21zm-2.11 22h250v-1.05c-.71-59.69-18-106.12-51.34-138-28.82-27.55-71.49-42.71-116.31-42.71h-1c-23.26 0-51.79 5.64-72.09 15.86-23.11 10.7-43.49 26.7-60.45 47.7-27.3 33.83-43.84 79.55-47.86 130.93-.13 1.54-.24 3.08-.35 4.62s-.18 2.92-.25 4.39a332.64 332.64 0 0 0-.36 21.69C1860.79 507 1923.65 600 2035.3 600c98 0 155.07-71.64 169.3-167.8l-7.19-2.53c-25 51.68-69.9 83-121 79.18-69.76-5.22-123.2-75.95-118.35-161.63m532.69 157.68c-8.2 19.45-25.31 30.15-48.24 30.15s-43.89-15.74-58.78-44.34c-16-30.7-24.42-74.1-24.42-125.51 0-107 33.28-176.21 84.79-176.21 21.57 0 38.55 10.7 46.65 29.37zm165.84 76.28c-30.57-7.23-46.09-18-46.09-57V5.28L2424.77 60v6.7l1.14-.09c25.62-2.07 43 1.47 53.09 10.79 7.9 7.3 11.75 18.5 11.75 34.26v71.14c-18.31-11.69-40.09-17.38-66.52-17.38-53.6 0-102.59 22.57-137.92 63.56-36.83 42.72-56.3 101.1-56.3 168.81C2230 518.72 2289.53 600 2378.13 600c51.83 0 93.53-28.4 112.62-76.3V588h166.65v-6.66zm159.29-505.33c0-37.76-28.47-66.24-66.24-66.24-37.59 0-67 29.1-67 66.24s29.44 66.24 67 66.24c37.77 0 66.24-28.48 66.24-66.24m43.84 505.33c-30.57-7.23-46.09-18-46.09-57h-.13V166.65l-166.66 47.85v6.5l1 .09c36.06 3.21 45.93 15.63 45.93 57.77V588h166.8v-6.66zm427.05 0c-30.57-7.23-46.09-18-46.09-57V166.65L3082 212.92v6.52l.94.1c29.48 3.1 38 16.23 38 58.56v226c-9.83 19.45-28.27 31-50.61 31.78-36.23 0-56.18-24.47-56.18-68.9V166.66l-166.66 47.85V221l1 .09c36.06 3.2 45.94 15.62 45.94 57.77v191.27a214.48 214.48 0 0 0 3.47 39.82l3 13.05c14.11 50.56 51.08 77 109 77 49.06 0 92.06-30.37 111-77.89v66h166.66v-6.66zM3934.2 588v-6.67l-.81-.19c-33.17-7.65-46.09-22.07-46.09-51.43v-243.2c0-75.83-42.59-121.09-113.93-121.09-52 0-95.85 30.05-112.73 76.86-13.41-49.6-52-76.86-109.06-76.86-50.12 0-89.4 26.45-106.25 71.13v-69.87l-166.66 45.89v6.54l1 .09c35.63 3.16 45.93 15.94 45.93 57V588h155.5v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66V255.72c7-16.35 21.11-35.72 49-35.72 34.64 0 52.2 24 52.2 71.28V588h155.54v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66v-248a160.45 160.45 0 0 0-2.2-27.68c7.42-17.77 22.34-38.8 51.37-38.8 35.13 0 52.2 23.31 52.2 71.28V588z"></path></svg></a><div class="aw h"><div class="ab ax ay az ba q bb bc"><div class="bl" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bm bn ab"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ax bd be bf z bg bh bi bj bk" placeholder="Search"></div></div></div><div class="h k w ff fg"><div class="fh ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---two_column_layout_nav-----------------------new_post_topnav-----------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-label="Write"><path d="M14 4a.5.5 0 0 0 0-1v1zm7 6a.5.5 0 0 0-1 0h1zm-7-7H4v1h10V3zM3 4v16h1V4H3zm1 17h16v-1H4v1zm17-1V10h-1v10h1zm-1 1a1 1 0 0 0 1-1h-1v1zM3 20a1 1 0 0 0 1 1v-1H3zM4 3a1 1 0 0 0-1 1h1V3z" fill="currentColor"></path><path d="M17.5 4.5l-8.46 8.46a.25.25 0 0 0-.06.1l-.82 2.47c-.07.2.12.38.31.31l2.47-.82a.25.25 0 0 0 .1-.06L19.5 6.5m-2-2l2.32-2.32c.1-.1.26-.1.36 0l1.64 1.64c.1.1.1.26 0 .36L19.5 6.5m-2-2l2 2" stroke="currentColor"></path></svg><div class="ds l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fh ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" href="https://medium.com/search?source=---two_column_layout_nav----------------------------------" rel="noopener follow"><div class="be b bf z dt fi fj ab q fk fl"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-label="Search"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor"></path></svg></div></a></div></div><div class="fh h k j"><div class="ab q"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">Sign up</button></span></p><div class="aw l"><p class="be b dw dx dy dz ea eb ec ed ee ef dt"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" href="https://medium.com/m/signin?operation=login&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------" rel="noopener follow">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ax fm am ab q ao fn fo fp" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fi"><img alt="" class="l fc bx by bz cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"><div class="fq bx l by bz fr n ax fs"></div></div></button></div></div></div><div class="l"><div class="ty" role="dialog" aria-modal="true" tabindex="-1"><div class="we wf bg dv wg wh wi ao wj gl wk" aria-hidden="true" role="presentation"></div><div class="wl wg wm wn wo we dv fc wp wq wr ls ws wt wu wv ww wx wy wz xa" aria-hidden="true"></div></div><div class="ft fu fv fw fx l"><div class="ab ca"><div class="ch bg fy fz ga gb"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fr gh gi gj gk gl"></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><div><h1 id="ef18" class="pw-post-title gr gs gt be gu gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp bj" data-testid="storyTitle" data-selectable-paragraph="">Rendering a Sphere on a Quad</h1></div><div><h2 id="c45c" class="pw-subtitle-paragraph hq gs gt be b hr hs ht hu hv hw hx hy hz ia ib ic id ie if cp dt" data-selectable-paragraph="">Making the Sphere Impostor Feel More Competent</h2><div class="ig ih ii ij ik"><div class="speechify-ignore ab co"><div class="speechify-ignore bg l"><div class="il im in io ip ab"><div><div class="ab iq"><a rel="noopener follow" href="https://bgolus.medium.com/?source=post_page-----13c92025570c--------------------------------"><div><div class="bl" aria-hidden="false" aria-describedby="1" aria-labelledby="1"><div class="l ir is bx it iu"><div class="l fi"><img alt="Ben Golus" class="l fc bx dc dd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_002.png" width="44" height="44" loading="lazy" data-testid="authorPhoto"><div class="iv bx l dc dd fr n iw fs"></div></div></div></div></div></a></div></div><div class="bm bg l"><div class="ab"><div style="flex:1"><span class="be b bf z bj"><div class="ix ab q"><div class="ab q iy"><div class="ab q"><div><div class="bl" aria-hidden="false" aria-describedby="2" aria-labelledby="2"><p class="be b iz ja bj"><a class="af ag ah ai aj ak al am an ao ap aq ar jb" data-testid="authorName" rel="noopener follow" href="https://bgolus.medium.com/?source=post_page-----13c92025570c--------------------------------">Ben Golus</a></p></div></div></div><span class="jc jd" aria-hidden="true"><span class="be b bf z dt">·</span></span><p class="be b iz ja dt"><span><a class="je jf ah ai aj ak al am an ao ap aq ar ew jg jh" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2Fd4d33ac3d661&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=post_page-d4d33ac3d661----13c92025570c---------------------post_header-----------" rel="noopener follow">Follow</a></span></p></div></div></span></div></div><div class="l ji"><span class="be b bf z dt"><div class="ab cm jj jk jl"><span class="be b bf z dt"><div class="ab ae"><span data-testid="storyReadTime">36 min read</span><div class="jm jn l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="be b bf z dt">·</span></span></div><span data-testid="storyPublishDate">Jan 10, 2021</span></div></span></div></span></div></div></div><div class="ab co jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd"><div class="h k w ff fg q"><div class="kt l"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----13c92025570c---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="3" aria-labelledby="3"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="60" aria-labelledby="60"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">118<span class="l h g f ud ue"></span></button></p></div></div></div></div></div><div><div class="bl" aria-hidden="false" aria-describedby="4" aria-labelledby="4"><button class="ao la ls lt ab q fj lu lv" aria-label="responses"><svg width="24" height="24" viewBox="0 0 24 24" class="lr"><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">6</span></p></button></div></div></div><div class="ab q ke kf kg kh ki kj kk kl km kn ko kp kq kr ks"><div class="lw k j i d"></div><div class="h k"><div><div class="bl" aria-hidden="false" aria-describedby="5" aria-labelledby="5"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;source=-----13c92025570c---------------------bookmark_footer-----------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div><div class="fc ly cm"><div class="l ae"><div class="ab ca"><div class="lz ma mb mc md me ch bg"><div class="ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2Fplans%3Fdimension%3Dpost_audio_button%26postId%3D13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;source=-----13c92025570c---------------------post_audio_button-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="97" aria-labelledby="97"><button aria-label="Listen" data-testid="audioPlayButton" class="af fj ah ai aj ak al mf an ao ap ew mg mh lv mi mj mk ml mm s mn mo mp mq mr ms mt u mu mv mw"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0zm9-10a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm3.38 10.42l-4.6 3.06a.5.5 0 0 1-.78-.41V8.93c0-.4.45-.63.78-.41l4.6 3.06c.3.2.3.64 0 .84z" fill="currentColor"></path></svg><div class="j i d"><p class="be b bf z dt">Listen</p></div></button></div></div></a></span></div></div></div></div></div><div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bl" aria-hidden="false" aria-describedby="7" aria-labelledby="7"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fj ah ai aj ak al mf an ao ap ew mg mh lv mi mj mk ml mm s mn mo mp mq mr ms mt u mu mv mw"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor"></path></svg><div class="j i d"><p class="be b bf z dt">Share</p></div></button></div></div></div></div></div></div></div></div></div></div></div><div class="mx"><div class="ab ca"><div class="lz my ma mz mb na ce nb cf nc ch bg"><figure class="ng nh ni nj nk mx nl nm paragraph-image"><div role="button" tabindex="0" class="nn no fi np bg nq"><div class="nd ne nf"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_005.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%205VfRfBEZqnNdt1F7o0yPBA.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_006.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_007.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_003.webp 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%205VfRfBEZqnNdt1F7o0yPBA.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_007.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_003.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"><img alt="" class="bg me nr c" width="1000" height="482" loading="eager" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25205VfRfBEZqnNdt1F7o0yPBA_008.png"></picture></div></div></figure></div></div></div><div class="ab ca"><div class="ch bg fy fz ga gb"><p id="9136" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">GPU raytracing is all the rage these days, so lets talk about about it! Today we’re going to raytrace a <em class="oo">single </em>sphere.</p><p id="fb97" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Using a fragment shader.</p><p id="31d5" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Yeah, I know. Not super fancy. You can do a <a class="af op" href="https://www.shadertoy.com/results?query=sphere" rel="noopener ugc nofollow" target="_blank">search on Shadertoy and get hundreds of examples</a>. There are even several great tutorials out there already for doing <a class="af op" href="https://paroj.github.io/gltut/Illumination/Tutorial%2013.html" rel="noopener ugc nofollow" target="_blank">sphere impostors</a>, which is what this is. So why would I write another article on it? It’s not even the <em class="oo">right kind</em> of GPU raytracing!</p><p id="0f3f" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Well,
 because the raytracing part isn’t really the part I’m going to focus 
on. This article is more about how to inject opaque ray traced or ray 
marched objects into a rasterized scene in Unity. But also goes into 
some additional tricks for dealing with rendering a sphere impostor that
 aren’t always immediately obvious or covered by the other tutorials 
I’ve seen. By the end of this we’ll have a sphere impostor on a tight 
quad that supports multiple lights, shadow casting, shadow receiving, 
and orthographic cameras for the built in forward renderer that almost 
perfectly mimics a high poly mesh. With no extra c# script.</p></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="82bd" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Table of Contents</h1><ol class=""><li id="ae77" class="ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#aa33" rel="noopener ugc nofollow"><strong class="nu gu">My First Sphere Impostor</strong></a><br><a class="af op" href="#c582" rel="noopener ugc nofollow">Depth Finder</a></li><li id="9ede" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#33ec" rel="noopener ugc nofollow"><strong class="nu gu">Texturing a Sphere</strong></a><br> <a class="af op" href="#6622" rel="noopener ugc nofollow">Equirectangular UVs</a><br> <a class="af op" href="#8789" rel="noopener ugc nofollow">Unseamly</a><br> <a class="af op" href="#5cbf" rel="noopener ugc nofollow">Crunchy Edges (aka Derivatives Strike Again)</a></li><li id="dd0d" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#bac5" rel="noopener ugc nofollow"><strong class="nu gu">Object Scale &amp; Rotation</strong></a></li><li id="0c51" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#750d" rel="noopener ugc nofollow"><strong class="nu gu">Using a Quad</strong></a><br><a class="af op" href="#407a" rel="noopener ugc nofollow">Billboard Shader</a><br><a class="af op" href="#8fc9" rel="noopener ugc nofollow">View Facing Billboard</a><br><a class="af op" href="#6316" rel="noopener ugc nofollow">Camera Facing Billboard</a><br><a class="af op" href="#0172" rel="noopener ugc nofollow">Perfect Perspective Billboard Scaling</a><br><a class="af op" href="#497b" rel="noopener ugc nofollow">Accounting for Object Scale</a><br><a class="af op" href="#8016" rel="noopener ugc nofollow">Ellipsoid Bounds?</a><br><a class="af op" href="#b4c9" rel="noopener ugc nofollow">Frustum Culling</a></li><li id="bb6a" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#0552" rel="noopener ugc nofollow"><strong class="nu gu">Shadow Casting</strong></a><br><a class="af op" href="#ff6c" rel="noopener ugc nofollow">Orthographic Pain</a><br><a class="af op" href="#9a04" rel="noopener ugc nofollow">The Nearly View Plane</a><br><a class="af op" href="#a51c" rel="noopener ugc nofollow">Light Facing Billboard</a><br><a class="af op" href="#f867" rel="noopener ugc nofollow">A Point of Perspective</a><br><a class="af op" href="#1820" rel="noopener ugc nofollow">Shadow Bias</a></li><li id="488b" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#58bc" rel="noopener ugc nofollow"><strong class="nu gu">Shadow Receiving</strong></a><br><a class="af op" href="#38ad" rel="noopener ugc nofollow">Lighting it Up</a><br><a class="af op" href="#4ed6" rel="noopener ugc nofollow">Multiple Lights</a></li><li id="833c" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#bb36" rel="noopener ugc nofollow"><strong class="nu gu">Fragmented Depth</strong></a><br><a class="af op" href="#9800" rel="noopener ugc nofollow">Conservative Depth Output</a></li><li id="42f5" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#2be8" rel="noopener ugc nofollow"><strong class="nu gu">Finishing Touches</strong></a><br><a class="af op" href="#6699" rel="noopener ugc nofollow">“Per Vertex” Non-Important Lights</a><br><a class="af op" href="#95f9" rel="noopener ugc nofollow">Fog</a><br><a class="af op" href="#44aa" rel="noopener ugc nofollow">Instancing</a></li><li id="7c20" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#5e7b" rel="noopener ugc nofollow"><strong class="nu gu">The Finished Shader</strong></a></li><li id="8e88" class="ns nt gt nu b hr qc nw nx hu qd nz oa ob qe od oe of qf oh oi oj qg ol om on pz qa qb bj" data-selectable-paragraph=""><a class="af op" href="#d738" rel="noopener ugc nofollow"><strong class="nu gu">Additional Thoughts</strong></a><br><a class="af op" href="#3835" rel="noopener ugc nofollow">Surface Shaders &amp; Shader Graph</a><br><a class="af op" href="#5378" rel="noopener ugc nofollow">Anti-Aliasing</a><br><a class="af op" href="#873e" rel="noopener ugc nofollow">Deferred Rendering</a></li></ol></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="aa33" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">My First Sphere Impostor</h1><p id="fcd6" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">As
 mentioned in the intro, this is a well trodden area. The accurate and 
efficient math for drawing a sphere is already known. So I’m just going 
to steal the applicable function from Inigo Quilez to make a basic 
raytraced sphere shader that we can slap on a cube mesh.</p><div class="qh qi qj qk ql qm"><a href="https://www.iquilezles.org/www/articles/intersectors/intersectors.htm?source=post_page-----13c92025570c--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">Inigo Quilez :: fractals, computer graphics, mathematics, shaders, demoscene and more</h2><div class="qy l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Tutorials and articles of Inigo Quilez on computer graphics, fractals, demoscene, shaders and more.</h3></div><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">www.iquilezles.org</p></div></div><div class="ra l"><div class="rb l rc rd re ra rf me qm"></div></div></div></a></div><p id="7c16" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Inigo’s
 examples are all written in GLSL. So we have to modify that code 
slightly to work with HLSL. Luckily for this function that really just 
means a find and replace of <code class="cw rg rh ri rj b">vec</code> with <code class="cw rg rh ri rj b">float</code>.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="6755" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float sphIntersect( float3 ro, float3 rd, float4 sph )<br>{<br>    float3 oc = ro - sph.xyz;<br>    float b = dot( oc, rd );<br>    float c = dot( oc, oc ) - sph.w*sph.w;<br>    float h = b*b - c;<br>    if( h&lt;0.0 ) return -1.0;<br>    h = sqrt( h );<br>    return -b - h;<br>}</span></pre><p id="aa40" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">That function takes 3 arguments, the <code class="cw rg rh ri rj b">ro</code> (ray origin), <code class="cw rg rh ri rj b">rd</code> (normalized ray direction), and <code class="cw rg rh ri rj b">sph</code> (sphere position xyz and radius w). It returns the length of the ray from the origin to the sphere surface, or a <code class="cw rg rh ri rj b">-1.0</code> in the case of a miss. Nice and straight forward. So all we need is those three vectors and we’ve got a nice sphere.</p><p id="fb36" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 ray origin is perhaps the easiest point to get. For a Unity shader, 
that’s going to be the camera position. Conveniently pass to every 
shader in the global shader uniform <code class="cw rg rh ri rj b">_WorldSpaceCameraPos</code>. For an orthographic camera it’s a little more complex, but luckily we don’t need to worry about that.</p><p id="a09e" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*ominous foreshadowing*</em></p><p id="7600" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">For
 the sphere position we can use the world space position of the object 
we’re applying the shader to. That can be easily extracted from the 
object’s transform matrix with <code class="cw rg rh ri rj b">unity_ObjectToWorld._m03_m13_m23</code>. The radius we can set as some arbitrary value. Lets go with <code class="cw rg rh ri rj b">0.5</code> for no particular reason.</p><p id="511b" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Lastly
 is the ray direction. This is just the direction from the camera to the
 world position of our surrogate mesh. That’s easy enough to get by 
calculating it in the vertex shader and passing along the vector to the 
fragment.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="cf58" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float3 worldPos = mul(unity_ObjectToWorld, v.vertex);<br>float3 rayDir = _WorldSpaceCameraPos.xyz - worldPos;</span></pre><p id="ab2a" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Note,
 it is important to not normalize this in the vertex shader. You will 
need to do that in the fragment shader as otherwise the interpolated 
values won’t work out. The value we’re interpolating is the surface 
position, not actually the ray direction.</p><p id="d1b6" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But after all that we’ve got the three values we need to raytrace a sphere.</p><p id="2faa" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Now
 I said the above function returns the ray length. So to get the actual 
world space position of the sphere’s surface, you multiply the 
normalized ray by the ray length and add the ray origin. You can even 
get the world normal by subtracting the sphere’s position from the 
surface’s position and normalizing. And we pass the ray length to the <code class="cw rg rh ri rj b">clip()</code> function to hide anything outside the sphere as that function returns <code class="cw rg rh ri rj b">-1.0</code> in the case of a miss.</p><h2 id="c582" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Depth Finder</h2><p id="6085" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">The
 last little bit for an effective sphere impostor is the z depth. If we 
want our sphere to intersect with the world properly, we need to output 
the sphere’s depth from the fragment shader. Otherwise we’re stuck using
 the depth of the mesh we’re using to render. This is actually way 
easier than it sounds. Since we’re already calculating the world 
position in the fragment shader, we can apply the same view and 
projection matrices that we use in the vertex shader to get the z depth.
 Unity even includes a handy <code class="cw rg rh ri rj b">UnityWorldToClipPos()</code> function to make it even easier. Then it’s a matter of having an output argument that uses <code class="cw rg rh ri rj b">SV_Depth</code>with the clip space position’s z divided by its w.</p><p id="1fe9" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Put that all together with some basic lighting and you get something like this:</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_006.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_004.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_003.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20rMDjkdv9rJxaGHqE9YD_Vg.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_006.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_003.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_007.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_004.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20rMDjkdv9rJxaGHqE9YD_Vg.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_005.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rMDjkdv9rJxaGHqE9YD_Vg_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">It looks like a sphere, but it’s actually a cube.</figcaption></figure><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_006.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20B2WPIP8XQvyjd0fJHkPmTQ.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_004.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_007.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_005.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_007.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_002.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_006.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20B2WPIP8XQvyjd0fJHkPmTQ.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_004.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520B2WPIP8XQvyjd0fJHkPmTQ_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">A very round cube. Make all the boy cubes go *whaaah!*.</figcaption></figure><figure class="ng nh ni nj nk mx"><div class="sl qr l fi"><div class="aet sn l"><iframe src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/0442f572ddfbe1d7b739e186d3c45a6d.htm" allowfullscreen="" frameborder="0" height="2366" width="680" title="SimpleRaytracedSphere.shader" class="fr n gh dv bg" scrolling="no"></iframe></div></div></figure></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="33ec" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Texturing a Sphere</h1><p id="6da6" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Well,
 that’s not too exciting. We should put a texture on it. For that we 
need UVs, and luckily those are pretty easy for a sphere.</p><h2 id="6622" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Equirectangular UVs</h2><p id="15d3" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Lets slap an equirectangular texture on this thing. For that we just need to feed the normal direction into an <code class="cw rg rh ri rj b">atan2()</code> and an <code class="cw rg rh ri rj b">acos()</code> and we get something like this:</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="d200" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float2 uv = float2(<br>  // atan returns a value between -pi and pi<br>  // so we divide by pi * 2 to get -0.5 to 0.5<br>  atan2(normal.z, normal.x) / (UNITY_PI * 2.0),<br>  // acos returns 0.0 at the top, pi at the bottom<br>  // so we flip the y to align with Unity's OpenGL style<br>  // texture UVs so 0.0 is at the bottom<br>  acos(-normal.y) / UNITY_PI<br>);</span><span id="d663" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">fixed4 col = tex2D(_MainTex, uv);</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_004.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20VK9522EV2aIfcD5mkb8nvw.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_005.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_003.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20VK9522EV2aIfcD5mkb8nvw.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_007.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520VK9522EV2aIfcD5mkb8nvw_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Earth the final frontier.</figcaption></figure><p id="0423" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And look at that we’ve got a perfectly … wait. What’s this!?</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_003.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_004.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_006.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_002.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20rJXgyzMtBzuOgvxjTRRHyA.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20rJXgyzMtBzuOgvxjTRRHyA.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_008.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_005.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_004.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520rJXgyzMtBzuOgvxjTRRHyA_007.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Is that the Greenwich Mean Line?</figcaption></figure><p id="faa3" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">That’s a UV seam! How do we have a UV seam? Well, that comes down to how GPUs calculate mip level for mip maps.</p><h2 id="8789" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Unseamly</h2><p id="a47a" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">GPUs
 calculate the mip level by what are known as screen space partial 
derivatives. Roughly speaking, this is the amount a value changes from 
one pixel to the one next to it, either above or below. GPUs can 
calculate this value for each set of 2x2 pixels, so the mip level is 
determine by how much the UVs change with each of these 2x2 “pixel 
quads”. And when we’re calculating the UVs here, the <code class="cw rg rh ri rj b">atan2()</code> suddenly jumps from roughly <code class="cw rg rh ri rj b">0.5</code> to roughly <code class="cw rg rh ri rj b">-0.5</code>
 between two pixels. That makes the GPU think the entire texture is 
being displayed between those two pixel. And thus it uses the absolutely
 smallest mip map it has in response.</p><p id="e2e1" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">So how do we work around this? Why by disabling the mip maps of course!</p></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><p id="1116" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><strong class="nu gu"><em class="oo">No no no!</em></strong> <strong class="nu gu">We absolutely do <em class="oo">not</em> do that.</strong> But that’s the usual solution you’ll find to most mip map related issues. (As you may have seen me complain about <a class="af op" rel="noopener" href="https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec">elsewhere</a>.) Instead a solution was nicely presented by Marco Tarini.</p><div class="qh qi qj qk ql qm"><a href="http://vcg.isti.cnr.it/~tarini/no-seams/?source=post_page-----13c92025570c--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">Seamless cylindrical and toroidal UV-mapping - homepages</h2><div class="qy l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Cylindrical and toroidalparameterizationswithout vertex seams -- homepages Welcome! This is the project page for the…</h3></div><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">vcg.isti.cnr.it</p></div></div><div class="ra l"><div class="sp l rc rd re ra rf me qm"></div></div></div></a></div><p id="6369" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 idea is to use two UV sets with the seams in different places. And for 
our specific case, the longitudinal UVs calculated by the <code class="cw rg rh ri rj b">atan2()</code> are already a <code class="cw rg rh ri rj b">-0.5</code> to <code class="cw rg rh ri rj b">0.5</code> range, so all we need is a <code class="cw rg rh ri rj b">frac()</code> to get them into a <code class="cw rg rh ri rj b">0.0</code> to <code class="cw rg rh ri rj b">1.0</code> range. Then use those same partial derivatives to pick the UV set with the least change. The magical function <code class="cw rg rh ri rj b">fwidth()</code> gives us how much the value is changing in any screen space direction.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="e3ad" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// -0.5 to 0.5 range<br>float phi = atan2(worldNormal.z, worldNormal.x) / (UNITY_PI * 2.0);<br>// 0.0 to 1.0 range<br>float phi_frac = frac(phi);</span><span id="b3ec" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">float2 uv = float2(<br>  // uses a small bias to prefer the first 'UV set'<br>  fwidth(phi) &lt; fwidth(phi_frac) - 0.001 ? phi : phi_frac,<br>  acos(-worldNormal.y) / UNITY_PI<br>);</span></pre><p id="9b32" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And now we have no more seam!</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_007.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20XqcYESDNKHIvTV7qq3eklA.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_006.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_002.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_004.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_003.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20XqcYESDNKHIvTV7qq3eklA.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_006.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_007.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_004.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_003.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XqcYESDNKHIvTV7qq3eklA_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">I promise it’s not hiding on the other side.</figcaption></figure><p id="2a8d" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*
 edit: It’s come to my attention that this technique may only work 
properly when using Direct3D, integrated Intel GPUs, or (some?) Android 
OpenGLES devices. The </em><code class="cw rg rh ri rj b"><em class="oo">fwidth()</em></code><em class="oo">
 function when using OpenGL on desktop may run using higher accuracy 
derivatives than used by the GPU to determine mip levels meaning the 
seam will still be visible. Metal is guaranteed to always run at a 
higher accuracy. Vulkan can be forced to run at the lower accuracy by 
using coarse derivative functions, but as of writing this Unity doesn’t 
seems to properly transpile coarse or fine derivatives. I wrote a follow
 up with some alternate solutions here:</em></p><div class="qh qi qj qk ql qm"><a rel="noopener follow" target="_blank" href="https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b?source=post_page-----13c92025570c--------------------------------"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">Distinctive Derivative Differences</h2><div class="qy l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Pesky Problems with Procedural UVs</h3></div><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">bgolus.medium.com</p></div></div><div class="ra l"><div class="sq l rc rd re ra rf me qm"></div></div></div></a></div><p id="f69a" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Alternative
 you could just use a cube map instead. Unity can convert an imported 
equirectangular texture into a cube map for you. But that means you 
loose out on anisotropic filtering. The UVW for a cube map texture 
sample is essentially just the sphere’s normal. You do need to flip at 
least the x or z axis though, because cube maps are assumed to be viewed
 from the “inside” of a sphere and here we want it to map to the 
outside.</p><h2 id="5cbf" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Crunchy Edges (aka Derivatives Strike Again)</h2><p id="803b" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">At
 this point if we compare the raytraced sphere shader we have with an 
actual high poly mesh sphere using the same equirectangular UVs, you may
 notice something else odd. It looks like there’s an outline around the 
raytraced sphere that the mesh does not have. A really aliased outline.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_005.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20xO58uqY1S1Wesbn3mmVxoQ.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_003.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_004.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_007.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_002.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_006.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_005.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_003.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20xO58uqY1S1Wesbn3mmVxoQ.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_006.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_007.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520xO58uqY1S1Wesbn3mmVxoQ_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Crunchy “outline” on the impostor.</figcaption></figure><p id="a005" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 cause is our pesky derivatives again. There’s one more UV seam we 
missed! On a mesh, derivatives are calculated per pixel quad, per 
triangle. In fact, if a triangle only touches a single pixel of one of 
those 2x2 pixel quads, the GPU still runs the fragment shader for all 4 
pixels! The advantage of this is it can accurately calculate plausible 
derivatives which prevents this problem on a real mesh. But we don’t 
have a good UV outside of the sphere, the function just returns a 
constant <code class="cw rg rh ri rj b">-1.0</code> on a miss, so we have bogus UVs outside of the sphere. We can see this clearly if you comment out the <code class="cw rg rh ri rj b">clip()</code> and <code class="cw rg rh ri rj b">outDepth</code> lines in the shader.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_005.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_006.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_007.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20BOYv2VKjV1SXywxbhyFEow.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_003.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_004.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_005.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20BOYv2VKjV1SXywxbhyFEow.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_006.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_007.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520BOYv2VKjV1SXywxbhyFEow_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">The Hidden UV Seam</figcaption></figure><p id="6bd3" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">What
 we want is for the UVs to be something close to the value at the 
visible edge of the sphere, or maybe just past the edge. That’s 
surprisingly complicated to calculate. But we can get something 
reasonably close by finding the closest point on a ray to the sphere 
center. At the exact sphere edge, this is 100% accurate, but it starts 
to curve towards the camera slightly as you get further away from the 
sphere. But this is cheap and good enough to get rid of the problem and 
is nearly indistinguishable from a fully correct fix.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div role="button" tabindex="0" class="nn no fi np bg nq"><div class="nd ne sr"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_007.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20FgGjm-MZ0kCmCQ-LSm_V3g.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_004.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_005.webp 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_005.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_004.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_007.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_006.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20FgGjm-MZ0kCmCQ-LSm_V3g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"><img alt="" class="bg me nr c" width="700" height="419" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FgGjm-MZ0kCmCQ-LSm_V3g_008.png"></picture></div></div></figure><p id="1928" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Even better, we can apply this fix by replacing the ray length with a single <code class="cw rg rh ri rj b">dot()</code> when the sphere intersection function returns a <code class="cw rg rh ri rj b">-1.0</code>.
 A super power of the dot product of two vectors is, if at least one 
vector is normalized, the output is the magnitude other vector is along 
the direction of the normalized vector. This is great for getting how 
far away something is in a certain direction, like how far the camera is
 from the sphere’s pivot along the view ray.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="df03" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// same sphere intersection function<br>float rayHit = sphIntersect(rayOrigin, rayDir, float4(0,0,0,0.5));<br>// clip if -1.0 to hide sphere on miss<br>clip(rayHit);<br>// dot product gets ray length at position closest to sphere<br>rayHit = rayHit &lt; 0.0 ? dot(rayDir, spherePos - rayOrigin) : rayHit;</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20n71BMtBHmjsKY6kHoXZ2kg.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_007.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_006.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_004.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_003.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20n71BMtBHmjsKY6kHoXZ2kg.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_006.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_005.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_002.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_007.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_003.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_004.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520n71BMtBHmjsKY6kHoXZ2kg_008.png"></picture></div></figure><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_007.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20XotRnC1JfA6Bx1SA827fBw.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_003.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_007.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20XotRnC1JfA6Bx1SA827fBw.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_004.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520XotRnC1JfA6Bx1SA827fBw_008.png"></picture></div></figure><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_005.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_004.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_002.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20dRFv-XPObw_8zE3PNQ_sAw.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_007.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_005.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_006.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20dRFv-XPObw_8zE3PNQ_sAw.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dRFv-XPObw_8zE3PNQ_sAw_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">No longer seamful.</figcaption></figure></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="bac5" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Object Scale &amp; Rotation</h1><p id="d86f" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So
 that’s all going well, but what if we want to to make a bigger sphere 
or rotate it? We can move the mesh position around and the sphere tracks
 with it, but everything else is ignored.</p><p id="6a4c" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">We
 could change the sphere radius manually, but then you’d have to 
manually keep the mesh you’re using in sync. So it’d be easier to 
extract the scale from the object transform itself. And we could apply 
an arbitrary rotation matrix, but again it’d be way easier if we could 
just use the object transform.</p><p id="e793" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Or
 we could do something even easier and do the raytracing in object 
space! This comes with a few other benefits we’ll get into. But before 
that we want to add a few lines to our shader code. First we want to use
 the <code class="cw rg rh ri rj b">unity_WorldToObject</code> matrix to
 transform the ray origin and ray direction into object space in the 
vertex shader. In the fragment shader, we no longer need to get the 
world space object position from the transform since the sphere can now 
just be at the object’s origin.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="2db2" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// vertex shader<br>float3 worldSpaceRayDir = worldPos - _WorldSpaceCameraPos.xyz;<br>// only want to rotate and scale the dir vector, so w = 0<br>o.rayDir = mul(unity_WorldToObject, float4(worldSpaceRayDir, 0.0));<br>// need to apply full transform to the origin vector<br>o.rayOrigin = mul(unity_WorldToObject, float4(_WorldSpaceCameraPos.xyz, 1.0));</span><span id="dc46" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// fragment shader<br>float3 spherePos = float3(0,0,0);</span></pre><p id="1160" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">With
 this change alone, you can now rotate and scale the game object and the
 sphere scales and rotates as you would expect. It even supports 
non-uniform scaling! Just remember that all of those “world space” 
positions in the shader are now in object space. So we need to transform
 the normal and sphere surface position to world space. Just be sure to 
use the object space normal for the UVs.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="7fc5" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// now gets an object space surface position instead of world space<br>float3 objectSpacePos = rayDir * rayHit + rayOrigin;</span><span id="de8d" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// still need to normalize this in object space for the UVs<br>float3 objectSpaceNormal = normalize(objectSpacePos);</span><span id="9215" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">float3 worldNormal = UnityObjectToWorldNormal(objectSpaceNormal);<br>float3 worldPos = mul(unity_ObjectToWorld, float4(objectSpacePos, 1.0));</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne ss"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_006.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_005.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_007.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20V5QJcdMeYEhLOR5AIbNnMQ.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_003.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_004.webp 1294w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 647px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_007.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_004.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20V5QJcdMeYEhLOR5AIbNnMQ.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_003.png 1294w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 647px"><img alt="" class="bg me nr c" width="647" height="412" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520V5QJcdMeYEhLOR5AIbNnMQ_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Big, little, and terrible sandwich Earths.</figcaption></figure><p id="0dc8" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Other
 advantages are better overall precision, as using world space for 
everything can cause some precision issues when getting far away from 
the origin. Those are at least partially avoided when using object 
space. It also means we can remove the usage of <code class="cw rg rh ri rj b">spherePos</code> in several places since it’s all zeros, simplifying the code a bit.</p></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="750d" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Using a Quad</h1><p id="fbb0" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So far we’ve been using a cube mesh for all of this. There <em class="oo">are </em>some
 minor benefits to using a cube for some use cases, but I promised a 
quad in the title of this article. Also because really there’s no good 
reason to use an entire cube for a sphere. There’s a lot of wasted space
 around the sides where we’re paying the cost of rendering the sphere 
where we know it’s not going to be. <em class="oo">Especially</em> the default Unity cube which has 24 vertices! Why also waste calculating the extra 20 vertices?</p><h2 id="407a" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Billboard Shader</h2><p id="44a8" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">There
 are several examples of billboard shaders out there. The basic idea for
 all of them is you ignore the rotation (and scale!) of the object’s 
transform and instead align the mesh to face the camera in some way.</p><h2 id="8fc9" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">View Facing Billboard</h2><p id="01c1" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Probably
 the most common version of this is a view facing billboard. This is 
done by transforming the pivot position into view space and adding the 
vertex offsets to the view space position. This is relatively cheap to 
do. Just remember to update the ray direction to match.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="43a5" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// get object's world space pivot from the transform matrix<br>float3 worldSpacePivot = unity_ObjectToWorld._m03_m13_m23;</span><span id="f5fb" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// transform into view space<br>float3 viewSpacePivot = mul(UNITY_MATRIX_V, float4(worldSpacePivot, 1.0));</span><span id="1879" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// object space vertex position + view pivot = billboarded quad<br>float3 viewSpacePos = v.vertex.xyz + viewSpacePivot;</span><span id="5b55" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// calculate the object space ray dir from the view space position<br>o.rayDir = mul(unity_WorldToObject,<br>  mul(UNITY_MATRIX_I_V, float4(viewSpacePos, 0.0))<br>);</span><span id="8e38" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// apply projection matrix to get clip space position<br>o.pos = mul(UNITY_MATRIX_P, float4(viewSpacePos, 1.0));</span></pre><p id="3db3" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">However,
 if we just add the above code to our shader, there’s something not 
quite right with the sphere. It’s getting clipped on the edges, 
especially when the sphere is to the side or close to the camera.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%204LyY8MmH2IjEM17NGlk8ig.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_005.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_006.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_007.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_004.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_002.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_006.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_003.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_002.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%204LyY8MmH2IjEM17NGlk8ig.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_007.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_005.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25204LyY8MmH2IjEM17NGlk8ig_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Thinking too far outside the box.</figcaption></figure><p id="73c9" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">This
 is because the quad is a flat plane, and the sphere is not. A sphere 
has some depth. Due to perspective the volume of the sphere will cover 
more of the screen than the quad does!</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div role="button" tabindex="0" class="nn no fi np bg nq"><div class="nd ne st"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_003.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_004.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20zDUW0Mqj3iT4OUn2WNTK6A.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_002.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_007.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_006.webp 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20zDUW0Mqj3iT4OUn2WNTK6A.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_007.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_004.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"><img alt="" class="bg me nr c" width="700" height="545" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520zDUW0Mqj3iT4OUn2WNTK6A_008.png"></picture></div></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Artist’s Recreation of the Crime Scene</figcaption></figure><p id="13eb" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">A
 solution to this you might use is to scale the billboard up by some 
arbitrary amount. But this doesn’t fully solve the problem as you have 
to scale the quad up quite a bit. Especially if you can get close to the
 sphere or have a very wide FOV. And this partially defeats the purpose 
of using a quad over a cube to begin with. Indeed <em class="oo">more </em>pixels are now rendering empty space than before with even relatively small scale increases compared to the cube.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_005.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20A0CfCiV04GKZoQXTB1WhPQ.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_002.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_003.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_007.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_006.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20A0CfCiV04GKZoQXTB1WhPQ.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520A0CfCiV04GKZoQXTB1WhPQ_008.png"></picture></div></figure><h2 id="6316" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Camera Facing Billboard</h2><p id="b1d8" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Luckily,
 we can do a lot better. A partial fix is to use a camera facing 
billboard instead of a view facing billboard and pull the quad towards 
the camera slightly. The difference between view facing and camera 
facing billboards is a view facing billboard is aligned with the 
direction the view is facing. A camera facing billboard is facing the 
camera’s position. The difference can be subtle, and the code is a bit 
more complex.</p><p id="becc" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Instead
 of doing things in view space, we instead need to construct a rotation 
matrix that rotates a quad towards the camera. This sounds scarier than 
it is. You just need to get the vector that points from the object 
position to the camera, the forward vector, and use cross products to 
get the up and right vectors. Put those three vectors together and you 
have yourself a rotation matrix.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="39a1" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float3 worldSpacePivot = unity_ObjectToWorld._m03_m13_m23;</span><span id="015d" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// offset between pivot and camera<br>float3 worldSpacePivotToCamera = _WorldSpaceCameraPos.xyz - worldSpacePivot;</span><span id="53c6" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// camera up vector<br>// used as a somewhat arbitrary starting up orientation<br>float3 up = UNITY_MATRIX_I_V._m01_m11_m2;</span><span id="da0b" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// forward vector is the normalized offset<br>// this it the direction from the pivot to the camera<br>float3 forward = normalize(worldSpacePivotToCamera);</span><span id="b688" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// cross product gets a vector perpendicular to the input vectors<br>float3 right = normalize(cross(forward, up));</span><span id="37f2" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// another cross product ensures the up is perpendicular to both<br>up = cross(right, forward);</span><span id="3650" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// construct the rotation matrix<br>float3x3 rotMat = float3x3(right, up, forward);</span><span id="4a7b" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// the above rotate matrix is transposed, meaning the components are<br>// in the wrong order, but we can work with that by swapping the<br>// order of the matrix and vector in the mul()<br>float3 worldPos = mul(v.vertex.xyz, rotMat) + worldSpacePivot;</span><span id="b6e1" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// ray direction<br>float3 worldRayDir = worldPos - _WorldSpaceCameraPos.xyz;<br>o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));</span><span id="f9aa" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// clip space position output<br>o.pos = UnityWorldToClipPos(worldPos);</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%202wHgTB8d8i7-d30dP0uo-g.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_005.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_007.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_002.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_003.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_006.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_007.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_003.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_005.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%202wHgTB8d8i7-d30dP0uo-g.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_004.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202wHgTB8d8i7-d30dP0uo-g_008.png"></picture></div></figure><p id="8256" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">This
 is better, but still not good. The sphere is still clipping the edges 
of the quad. Actually, all the four edges now. At least it’s centered. 
Well, we forgot to move the quad toward the camera! Technically we could
 also scale the quad by an arbitrary amount too, but lets come back to 
that point.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="a3e1" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float3 worldPos = mul(float3(v.vertex.xy, 0.3), rotMat) + worldSpacePivot;</span></pre><p id="04ed" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">We’re
 ignoring the z of the quad and adding a small (arbitrary) offset to 
pull it towards the camera. The advantage of this option vs an arbitrary
 scaling is it should stay more closely confined to the bounds of the 
sphere when further away, and scale when closer just due to the 
perspective change, just like the sphere itself. It only starts to cover
 significantly more screen space than needed when really close. I chose <code class="cw rg rh ri rj b">0.3</code>
 in the above example because it was a good balance of not covering too 
much of the screen when close by, while still covering all of the 
viewable sphere until you’re really, really close.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20opK9W3PMgCq1IxwqVqQ-_A.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_006.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_007.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_003.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_007.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_004.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20opK9W3PMgCq1IxwqVqQ-_A.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_002.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_006.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_005.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520opK9W3PMgCq1IxwqVqQ-_A_008.png"></picture></div></figure><p id="6d5e" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">You
 know, you could probably figure the exact value to use to pull or scale
 the quad for a given distance from the sphere with a bit of math …</p><h2 id="0172" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Perfect Perspective Billboard Scaling</h2><p id="cd8c" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Wait! We can figure out the value using a bit of math! We can get the <em class="oo">exact size</em> the quad needs to be at all camera distances from the sphere. Just needs some basic high school math!</p><p id="2ed7" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">We
 can calculate the angle between the camera to pivot vector and camera 
to visible edge of the sphere. In fact it’s always a right triangle with
 the 90 degree corner at the sphere’s surface! Remember your old friend 
SOHCAHTOA? We know the distance from the camera to the pivot, that’s the
 hypotenuse. And we know the radius of the sphere. From that we can 
calculate the base of the right angle triangle formed from projecting 
that angle to the quad’s plane. With that we can scale the quad <em class="oo">instead</em> of modifying the <code class="cw rg rh ri rj b">v.vertex.z</code>.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="07ba" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// get the sine of the right triangle with the hypotenuse being the // sphere pivot distance and the opposite using the sphere radius<br>float sinAngle = 0.5 / length(viewOffset);</span><span id="bc4c" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// convert to cosine<br>float cosAngle = sqrt(1.0 - sinAngle * sinAngle);</span><span id="4cd7" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// convert to tangent<br>float tanAngle = sinAngle / cosAngle;</span><span id="0d87" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// those previous two lines are the equivalent of this, but faster<br>// tanAngle = tan(asin(sinAngle));</span><span id="892d" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// get the opposite face of the right triangle with the 90 degree<br>// angle at the sphere pivot, multiplied by 2 to get the quad size<br>float quadScale = tanAngle * length(viewOffset) * 2.0;</span><span id="c6f0" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// scale the quad by the calculated size<br>float3 worldPos = mul(float3(v.vertex.xy, 0.0) * quadScale, rotMat) + worldSpacePivot;</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_006.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20LiUmCd6Kiu-gCYcXJgvlTA.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_005.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_007.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20LiUmCd6Kiu-gCYcXJgvlTA.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_006.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520LiUmCd6Kiu-gCYcXJgvlTA_008.png"></picture></div></figure><h2 id="497b" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Accounting for Object Scale</h2><p id="a550" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">At
 the beginning of this we converted everything in to using object space 
so we could trivially support rotation and scale. We still support 
rotation, since the quad’s orientation doesn’t actually matter. But the 
quad doesn’t scale with the object’s transform like the cube did. The 
easiest fix for this is to extract the scale from the axis of the 
transform matrix and multiply the radius we’re using by the max scale.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="7842" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// get the object scale<br>float3 scale = float3(<br>  length(unity_ObjectToWorld._m00_m10_m20),<br>  length(unity_ObjectToWorld._m01_m11_m21),<br>  length(unity_ObjectToWorld._m02_m12_m22)<br>);<br>float maxScale = max(abs(scale.x), max(abs(scale.y), abs(scale.z)));</span><span id="2464" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// multiply the sphere radius by the max scale<br>float maxRadius = maxScale * 0.5;</span><span id="e5f3" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// update our sine calculation using the new radius<br>float sinAngle = maxRadius / length(viewOffset);</span><span id="4e0a" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// do the rest of the scaling code</span></pre><p id="5781" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Now you can uniformly scale the game object and the sphere will still remain perfectly bound by the quad.</p><h2 id="8016" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Ellipsoid Bounds?</h2><p id="9157" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">It
 should also be possible to calculate the exact bounds of an ellipsoid, 
or non-uniformly scaled sphere. Unfortunately that’s starting to get a 
bit more difficult. So I’m not going to put the effort into solving that
 problem now. I’ll leave this as “an exercise for the reader.”<em class="oo"> </em>(Aka, I have no idea how to do it.)</p><h2 id="b4c9" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Frustum Culling</h2><p id="02e1" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">One
 additional problem with using a quad is Unity’s frustum culling. It has
 no idea that the quad is being rotated in the shader, so if the game 
object is rotated so it’s being viewed edge on it may get frustum culled
 while the sphere should still be visible. The fix for this would be to 
use a custom quad mesh that’s had its bounds manually modified from c# 
code to be a box. Alternatively you can use a quad mesh with one vertex 
pushed forward and one back by 0.5 on the z axis. And we’re already 
flatten the mesh in the shader by replacing <code class="cw rg rh ri rj b">v.vertex.z</code> with <code class="cw rg rh ri rj b">0.0</code>.</p></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="0552" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Shadow Casting</h1><p id="da22" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So
 now we have a nicely rendered sphere on a quad that is lit, textured, 
and can be moved, scaled, and rotated around. So lets make it cast 
shadows! For that we’ll need to make a shadow caster pass in our shader.
 Luckily the same vertex shader can be reused for both passes, since all
 it does is create a quad and pass along the ray origin and direction. 
And those of course will be exactly the same for the shadows as it is 
for the camera, right? Then the fragment shader really just needs to 
output the depth, so you can delete all that pesky UV and lighting code.</p><p id="b695" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Oh.</p><p id="6502" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 ray origin and direction need to be coming from the light, not the 
camera. And the value we’re using for the ray origin is always the 
current camera position, not the light. The good news is that’s not hard
 to fix. We can replace any usage of <code class="cw rg rh ri rj b">_WorldSpaceCameraPos</code> with <code class="cw rg rh ri rj b">UNITY_MATRIX_I_V._m03_m13_m23</code>
 which gets the current view’s world position from the inverse view 
matrix. Now as long as the shadows are rendered with perspective 
projections it should all work!</p><p id="9e7c" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Oh. Oh, no.</p><p id="41f9" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Directional shadows use an orthographic projection.</p><h2 id="ff6c" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Orthographic Pain</h2><p id="5c81" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">The
 nice thing with perspective projection and ray tracing is the ray 
origin is where the camera is. That’s really easy to get, even for 
arbitrary views, as shown above. For orthographic projections the ray 
direction is the forward view vector. That’s easy enough to get from the
 inverse view matrix again.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="1436" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// forward in view space is -z, so we want the negative vector<br>float3 worldSpaceViewForward = -UNITY_MATRIX_I_V._m02_m12_m22;</span></pre><p id="ae93" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But
 how do we get the orthographic ray origin? If you try and search online
 you’ll probably come across a bunch of examples that use a c# script to
 get the inverse projection matrix. Or abuse the current <code class="cw rg rh ri rj b">unity_OrthoParams</code>
 which has information about the orthographic projection’s width and 
height. You can then use the clip space position to reconstruct the near
 view plane position the ray is originating from. The problem with these
 approaches is they’re all getting the <em class="oo">camera’s</em> orthographic settings, not the current light’s. So instead we have to calculate the inverse matrix in the shader!</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="25e4" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float4x4 inverse(float4x4 m) {<br>  float n11 = m[0][0], n12 = m[1][0], n13 = m[2][0], n14 = m[3][0];<br>  float n21 = m[0][1], n22 = m[1][1], n23 = m[2][1], n24 = m[3][1];<br>  float n31 = m[0][2], n32 = m[1][2], n33 = m[2][2], n34 = m[3][2];<br>  float n41 = m[0][3], n42 = m[1][3], n43 = m[2][3], n44 = m[3][3];</span><span id="f349" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  float t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;</span><span id="ed46" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// ... hold up, how many more lines are there of this?!</span></pre><p id="fd87" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Ok,
 lets not do that. Those are just the first few lines of a &gt;30 line 
function of increasing length and complexity. There’s got to be a better
 way.</p><h2 id="9a04" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">The Nearly View Plane</h2><p id="2ab1" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">As
 it turns out, you don’t need any of that. We don’t actually need the 
ray origin to be at the near plane. The ray origin really just needs to 
be the mesh’s position pulled back along the forward view vector. Just 
far enough to make sure it’s not starting inside the volume of the 
sphere. At least assuming the camera itself isn’t already inside the 
sphere. And a “near plane” at the camera’s position instead of the 
actual near plane totally fits that bill.</p><p id="69a8" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">We
 already know the world position of the vertex in the vertex shader. So 
we could transform the world position into view space. Zero out the <code class="cw rg rh ri rj b">viewSpacePos.z</code>, and transform back into world space. That results in a usable ray origin for an orthographic projection!</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="f05f" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// transform world space vertex position into view space<br>float4 viewSpacePos = mul(UNITY_MATRIX_V, float4(worldPos, 1.0));</span><span id="8411" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// flatten the view space position to be on the camera plane<br>viewSpacePos.z = 0.0;</span><span id="98c2" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// transform back into world space<br>float4 worldRayOrigin = mul(UNITY_MATRIX_I_V, viewSpacePos);</span><span id="03c7" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// orthographic ray dir<br>float3 worldRayDir = worldSpaceViewForward;</span><span id="74f9" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// and to object space<br>o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));<br>o.rayOrigin = mul(unity_WorldToObject, worldRayOrigin);</span></pre><p id="ef88" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And really we don’t even need to do all that. Remember that super power of the <code class="cw rg rh ri rj b">dot()</code>
 I mentioned above? We just need the camera to vertex position vector 
and the normalized forward view vector. We already have the camera to 
vertex position vector, that’s the original perspective world space ray 
direction. And we know the forward view vector by extracting it from the
 matrix mentioned above. Conveniently this vector comes already 
normalized! So we can remove two of the matrix multiplies in the above 
code and do this instead:</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="2964" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">float3 worldSpaceViewPos = <!-- -->UNITY_MATRIX_I_V._m03_m13_m23;<br>float3 worldSpaceViewForward = -UNITY_MATRIX_I_V._m02_m12_m22;</span><span id="f921" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// originally the perspective ray dir<br>float3 worldCameraToPos = worldPos - worldSpaceViewPos;</span><span id="e626" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// orthographic ray dir<br>float3 worldRayDir = worldSpaceViewForward * -dot(worldCameraToPos, worldSpaceViewForward);</span><span id="076a" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// orthographic ray origin<br>float3 worldRayOrigin = worldPos - worldRayDir;</span><span id="cc31" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));<br>o.rayOrigin = mul(unity_WorldToObject, float4(worldRayOrigin, 1.0));</span></pre><p id="4aa0" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*
 There is one minor caveat. This does not work for oblique projections 
(aka a sheared orthographic projection). For that you really do need the
 inverse projection matrix. Sheared perspective projections are fine 
though!</em></p><h2 id="a51c" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Light Facing Billboard</h2><p id="bee5" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Remember
 how we’re doing camera facing billboards? And that fancy math to scale 
the quad to account for the perspective? We don’t need any of that for 
an orthographic projection. Just need to do view facing billboarding and
 scale the quad by only the object transform’s max scale. However maybe 
lets not delete all of that code quite yet. We can use the existing 
rotation matrix construction as is, just change the <code class="cw rg rh ri rj b">forward</code> vector to be the negative <code class="cw rg rh ri rj b">worldSpaceViewForward</code> vector instead of the <code class="cw rg rh ri rj b">worldSpacePivotToCamera</code> vector.</p><h2 id="f867" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">A Point of Perspective</h2><p id="0609" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">In
 fact now might be a good time to talk about how the spot lights and 
point lights use perspective projection. If we want to support 
directional lights, spot lights, and point light shadows we’re going to 
need to support <em class="oo">both</em> perspective and orthographic in
 the same shader. Unity also uses this pass to render the camera depth 
texture. This means we need to detect if the current projection matrix 
is orthographic or not and choose between the two paths.</p><p id="4827" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Well,
 we can find out what kind of projection matrix we’re using by checking a
 specific component of it. The very last component of a projection 
matrix will be <code class="cw rg rh ri rj b">0.0</code> if it’s a perspective projection matrix, and will be <code class="cw rg rh ri rj b">1.0</code> if it’s an orthographic projection matrix.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="7d49" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">bool isOrtho = UNITY_MATRIX_P._m33 == 1.0;</span><span id="e3fa" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// billboard code<br>float3 forward = isOrtho ? -worldSpaceViewForward : normalize(worldSpacePivotToCamera);<br>// do the rest of the billboard code</span><span id="3a9b" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// quad scaling code<br>float quadScale = maxScale;<br>if (!isOrtho)<br>{<br>  // do that perfect scaling code<br>}</span><span id="7411" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// ray direction and origin code<br>float3 worldRayOrigin = worldSpaceViewPos;<br>float3 worldRayDir = worldPos - worldSpaceRayOrigin;<br>if (isOrtho)<br>{<br>  worldRayDir = worldSpaceViewForward * -dot(worldRayDir, worldSpaceViewForward);<br>  worldRayOrigin = worldPos - worldRayDir;<br>}</span><span id="861b" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));<br>o.rayOrigin = mul(unity_WorldToObject, float4(worldRayOrigin, 1.0));</span><span id="b8cc" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// don't worry, I'll show the whole vertex shader later</span></pre><p id="9117" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And
 now we have a vertex function that can correctly handle both 
orthographic and perspective projection! And nothing needs to change in 
the fragment shader to account for this. Oh, and we really can use the 
same function for both the shadow caster and forward lit pass. And now 
you can use an orthographic camera as well!</p><h2 id="1820" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Shadow Bias</h2><p id="2327" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Now
 if you’d been following along, you’ll have a shadow caster pass 
outputting depth. But we’re not calling any of the usual functions a 
shadow caster usually has for applying offset. At the moment this isn’t 
obvious since we’re not self shadowing yet, but it’ll be a problem if we
 don’t fix it.</p><p id="011a" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">We’re not going to use the built in <code class="cw rg rh ri rj b">TRANSFER_SHADOW_CASTER_NORMALOFFSET(o)</code>
 macro for the vertex shader for this since we need to do the bias in 
the fragment shader. Luckily, there’s another benefit to doing the 
raytracing in object space. The first function that the shadow caster 
vertex shader macro calls assumes the position being passed to it is in 
object space! I mean, that makes sense, since it assumes it’s working on
 the starting object space vertex position. But this means we can use 
the biasing functions the shadow caster macros call directly using the 
position we’ve raytraced and they’ll just work!</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_006.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20gQXVnXFpjPESwCtkEWGTiw.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_007.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_004.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_003.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_002.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_005.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_005.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_007.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_006.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20gQXVnXFpjPESwCtkEWGTiw.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520gQXVnXFpjPESwCtkEWGTiw_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Yeah, really still just a quad.</figcaption></figure><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="2cb6" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">Tags { "LightMode" = "ShadowCaster" }</span><span id="b149" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">ZWrite On ZTest LEqual</span><span id="cb09" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">CGPROGRAM<br>#pragma vertex vert<br>#pragma fragment frag_shadow</span><span id="b327" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">#pragma multi_compile_shadowcaster</span><span id="ceed" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// yes, I know the vertex function is missing</span><span id="dcff" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">fixed4 frag_shadow (v2f i,<br>  out float outDepth : SV_Depth<br>  ) : SV_Target<br>{<br>  // ray origin<br>  float3 rayOrigin = i.rayOrigin;</span><span id="547d" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  // normalize ray vector<br>  float3 rayDir = normalize(i.rayDir);</span><span id="06dc" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  // ray sphere intersection<br>  float rayHit = sphIntersect(rayOrigin, rayDir, float4(0,0,0,0.5));</span><span id="a9df" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  // above function returns -1 if there's no intersection<br>  clip(rayHit);</span><span id="3d04" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  // calculate object space position<br>  float3 objectSpacePos = rayDir * rayHit + rayOrigin;</span><span id="8c50" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  // output modified depth<br>  // yes, we pass in objectSpacePos as both arguments<br>  // second one is for the object space normal, which in this case<br>  // is the normalized position, but the function transforms it <br>  // into world space and normalizes it so we don't have to<br>  float4 clipPos = UnityClipSpaceShadowCasterPos(objectSpacePos, objectSpacePos);<br>  clipPos = UnityApplyLinearShadowBias(clipPos);<br>  outDepth = clipPos.z / clipPos.w;</span><span id="c5bf" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">  return 0;<br>}<br>ENDCG</span></pre><p id="3060" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">That
 it. And this works for every shadow caster variant.* Directional light 
shadows, spot light shadows, point light shadows, and the camera depth 
texture! You know, should we ever want to support multiple lights…</p><p id="6f44" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*
 I didn’t add support for GLES 2.0 point light shadows. That requires 
outputting the distance from the light as the shadow caster pass’s color
 value instead of just a hard coded </em><code class="cw rg rh ri rj b"><em class="oo">0</em></code><em class="oo">. It’s not too hard to add, but it makes the shader a bit messier with a few </em><code class="cw rg rh ri rj b"><em class="oo">#if</em></code><em class="oo"> and special case data we’d need to calculate. So I didn’t include it.</em></p><p id="715e" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*
 edit: I forgot one thing for handling depth on OpenGL platforms. Clip 
space z for OpenGL is a -w to +w range, so you need to do one extra step
 to convert that into the 0.0 to 1.0 range needed for the fragment 
shader output depth.</em></p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="b266" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">#if !defined(UNITY_REVERSED_Z) // basically only OpenGL<br>outDepth = outDepth * 0.5 + 0.5;<br>#endif</span></pre><h1 id="58bc" class="oy oz gt be pa pb su ht pd pe sv hw pg ph sw pj pk pl sx pn po pp sy pr ps pt bj" data-selectable-paragraph="">Shadow Receiving</h1><p id="b037" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So
 now we have a working shadow casting. What about shadow receiving? This
 is getting into the gritty underbelly of Unity specific stuff. Turn 
back now if ye be mortal … er, if you don’t care about Unity’s built in 
forward rendering path so much. (Or at least skip to the next section 
about <a class="af op" href="#9800" rel="noopener ugc nofollow">depth</a>.)</p><h2 id="38ad" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Lighting it Up</h2><p id="8436" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Early
 on I posted a shader with a basic diffuse lighting setup. If you’ve 
managed to keep up with the rest of the article, the lighting code for 
the forward base pass should look something like this now.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="1dca" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// world space surface normal and position<br>float3 worldNormal = UnityObjectToWorldNormal(objectSpaceNormal);<br>float3 worldPos = mul(unity_ObjectToWorld, float4(objectSpacePos, 1.0));</span><span id="1a06" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// basic lighting<br>half3 worldLightDir = UnityWorldSpaceLightDir(worldPos);<br>half ndotl = saturate(dot(worldNormal, worldLightDir));<br>half3 lighting = _LightColor0 * ndotl;</span><span id="5490" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// ambient lighting<br>half3 ambient = ShadeSH9(float4(worldNormal, 1));<br>lighting += ambient;</span><span id="98ed" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// apply lighting<br>col.rgb *= lighting;</span></pre><p id="7862" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Nothing
 too fancy. Get your world normal and world position. Get the world 
light direction. Do a clamped dot product. Multiply the light color by 
the dot product, add ambient lighting, and multiply the texture by the 
lighting. This is kind of your starting lit shader tutorial code. But 
we’re obviously missing shadows.</p><p id="920c" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">For
 a traditional forward base lit shader we’d want to add a hand full of 
macros to places and Unity automagically gets us what we need. Add the <code class="cw rg rh ri rj b">SHADOW_COORDS(#)</code> to the <code class="cw rg rh ri rj b">v2f</code> struct, call <code class="cw rg rh ri rj b">TRANSFER_SHADOW(o);</code> in the vertex function, and then call <code class="cw rg rh ri rj b">UNITY_LIGHT_ATTENUATION(atten, i, worldPos);</code>
 in the fragment shader. We could certainly do that, at least for the 
forward base pass. On desktop and console, Unity’s directional light’s 
shadows use screen space shadows. That is the shadow maps are rendered, 
then they’re cast onto the world position calculated from the camera 
depth texture before hand and saved into a screen space texture. So the 
above macros are just passing along the screen space position, which you
 can cheaply calculate from the clip space position.</p><p id="335f" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Usually this is done by that <code class="cw rg rh ri rj b">TRANSFER_SHADOW(o);</code>
 macro mentioned above, and passed from the vertex to the fragment 
shader. But we’re already calculating the clip space position in the 
fragment shader anyway. We can reuse it to calculate the screen space 
position with the same <code class="cw rg rh ri rj b">ComputeScreenPos(clipPos)</code> function the macro calls. Then we can use the final built in macro and have it do the rest of the work for us.</p><p id="380a" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And we do want to use that <code class="cw rg rh ri rj b">UNITY_LIGHT_ATTENUATION(atten, i, worldPos);</code> macro. It handles extra stuff like light cookies for us. And for another reason I’ll get to in a moment.</p><p id="a231" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But there’s one minor catch. The built in shadow macro expects you to pass in the a struct with screen space position. And our <code class="cw rg rh ri rj b">v2f</code> struct doesn’t have it, nor do we want to add it to that struct if we don’t have to.</p><p id="4196" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Thankfully we don’t, we can make a dummy struct! It just needs the <code class="cw rg rh ri rj b">SHADOW_COORDS(0)</code> macro to add the struct element the other macro expects, and then we can set the value it adds ourselves.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="6632" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// dummy struct<br>struct shadowInput {<br>  SHADOW_COORDS(0)<br>);</span><span id="f9ca" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// world space position and clip space position<br>float3 worldPos = mul(unity_ObjectToWorld, float4(surfacePos, 1.0));<br>float4 clipPos = UnityWorldToClipPos(float4(worldPos, 1.0));</span><span id="7fb9" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">#if defined (SHADOWS_SCREEN)<br>// setup shadow struct for screen space shadows<br>shadowInput shadowIN;<br>#if defined(UNITY_NO_SCREENSPACE_SHADOWS)<br>// mobile shadows<br>shadowIN._ShadowCoord = mul(unity_WorldToShadow[0], float4(worldPos, 1.0));<br>#else<br>// screen space shadows<br>shadowIN._ShadowCoord = ComputeScreenPos(clipPos);<br>#endif // UNITY_NO_SCREENSPACE_SHADOWS<br>#else<br>float shadowIN = 0;<br>#endif // SHADOWS_SCREEN</span><span id="07da" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// macro creates a variable named atten with the shadow<br>UNITY_LIGHT_ATTENUATION(atten, shadowIN, worldPos);</span><span id="2c3a" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// multiply the directional lighting by atten<br>half3 lighting = _LightColor0 * ndotl * atten;</span></pre><p id="dd18" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And now we can receive directional shadows!</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2067UJHSBLcotGWA_5CcYCLQ.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_007.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_004.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_005.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_002.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_006.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2067UJHSBLcotGWA_5CcYCLQ.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_003.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_008.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%252067UJHSBLcotGWA_5CcYCLQ_007.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">Catching shade.</figcaption></figure></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="4ed6" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Multiple Lights</h1><p id="fc8e" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So I mentioned how we really did want to use the <code class="cw rg rh ri rj b">UNITY_LIGHT_ATTENUATION</code>
 macro above. Here’s the real reason why. It also handles other lights 
types! Unity’s built in forward renderer draws multiple lights by 
rendering the object again for each light. So we need a forward add 
pass. And the only thing keeping the one we now have for the forward 
base pass from working with the forward add pass is the ambient 
lighting. So you can copy the fragment shader function and delete the 
two lines of ambient lighting code.</p><p id="74e6" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Or you could stick those three lines for the ambient lighting inside of an<br><code class="cw rg rh ri rj b">#if defined(UNITY_SHOULD_SAMPLE_SH)</code> which will only be true for the base pass. Then you can share the exact same function for both passes.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_003.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_007.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_002.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_006.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20Gg46Cg8Vv3Si9EiPHlCaYg.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_007.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20Gg46Cg8Vv3Si9EiPHlCaYg.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_006.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_005.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="eager" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520Gg46Cg8Vv3Si9EiPHlCaYg_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">RTX Off!</figcaption></figure></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="bb36" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Fragmented Depth</h1><p id="3e18" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">There’s one big caveat about using <code class="cw rg rh ri rj b">SV_Depth</code>.
 It disables early depth rejection. Basically that means you’re going to
 be paying the cost of rendering the impostor if it’s anywhere within 
the view frustum. Even if it’s behind something and not visible. 
Normally GPUs can use the depth buffer to skip running the fragment 
shader for meshes behind something else that has already been rendered 
closer to the camera. But since the GPU doesn’t know what the depth is 
going to be until <em class="oo">after </em>the fragment shader has run, it can’t do that.</p><blockquote class="sz ta tb"><p id="8236" class="ns nt oo nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">“What about <code class="cw rg rh ri rj b">SV_DepthLessEqual</code> or <code class="cw rg rh ri rj b">SV_DepthGreaterEqual</code>?”</p></blockquote><p id="7ffc" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Yes! Excellent question <em class="oo">Mr Pettineo.</em> <a class="af op" href="https://mynameismjp.wordpress.com/2010/11/14/d3d11-features/" rel="noopener ugc nofollow" target="_blank">How did you know</a> I was thinking that?</p><h2 id="9800" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Conservative Depth Output</h2><p id="184f" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">The <code class="cw rg rh ri rj b">SV_DepthLessEqual</code> and <code class="cw rg rh ri rj b">SV_DepthGreaterEqual</code> semantics are replacements for <code class="cw rg rh ri rj b">SV_Depth</code>
 that tell the GPU to still do early depth rejection added for Shader 
Model 5.0. However to use this we have to make sure the mesh is as close
 or closer to the camera than the sphere we’re about to render. To do 
that we’re going to want to pull the mesh towards the camera. Right now 
the camera facing quad is sitting at the sphere’s center.</p><p id="2b68" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The thing is we need to move the vertices closer to the camera <em class="oo">without</em>
 modifying their screen space position. We’ve already calculated the 
perfect bounds for them, so it’d be unfortunate if we end up undoing 
that.</p><p id="a715" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">One option would be to calculate the clip space position for a view plane <code class="cw rg rh ri rj b">maxRadius</code>
 closer to the camera than the sphere’s pivot. Then replace the z of the
 already calculated clip space position. Clip space has a really neat 
feature that you can change the z of a clip space position without 
affecting its position on screen or cause problems with interpolation.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="5be7" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// usual clip space at the end of the shader<br>o.pos = UnityWorldToClipPos(worldPos);</span><span id="9193" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// get a position maxRadius closer from the sphere pivot along the <br>// forward view vector<br>float4 nearerClip = UnityWorldToClipPos(worldSpacePivotPos — worldSpaceViewForward * maxRadius);</span><span id="5dee" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// convert apply "pespective divide" to get real depth Z<br>float nearerZ = nearerClip.z / nearerClip.w</span><span id="c3b4" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// replace the original clip space z with the new one<br>o.pos.z = nearerZ * o.pos.w;</span></pre><p id="2572" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But
 this technique has one big flaw. If you move the camera too close to or
 try to move past our impostor sphere, it’ll just disappear when we 
should still see it. The problem is the “nearer depth” is getting placed
 <em class="oo">behind</em> the camera. We can try to put some more work
 into this though. Like try and limit the z to the near plane. Or rather
 clamping to just inside the near clip plane as <em class="oo">on </em>the near clip plane will cause it to still get culled.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="fdc8" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// clamp to just inside the near clip plane<br>o.pos.z = min(o.pos.w - 1.0e-6f, nearerZ * o.pos.w);</span></pre><p id="8895" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But …<strong class="nu gu"> <em class="oo">this doesn’t actually work like you’d expect</em>.</strong></p><p id="1d11" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">I
 lied a bit when I said you could change the z of a clip space position 
without any problems. This fails in exactly one case, and it’s when some
 vertices of a mesh are behind the camera. The exact case we’re trying 
to work around. Even with the clamping, the quad is still more clipped 
than it should be. So this was a bust.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_007.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_006.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_004.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20qLDWavkasNDmg6Fqz_SorA.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_002.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_002.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20qLDWavkasNDmg6Fqz_SorA.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_007.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520qLDWavkasNDmg6Fqz_SorA_008.png"></picture></div></figure><p id="7cfb" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">And honestly, I don’t fully understand the problem well enough to explain why.</p><p id="2b79" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">But there is a <em class="oo">cheaper </em>solution
 that behaves just well in the general case and doesn’t fail in the 
“some vertices behind the camera” case! We can move the vertices one 
sphere radius along the ray direction. For orthographic projection this 
would literally just be the world position - the forward view ✕ the 
sphere radius. For perspective projection if we use the normalized ray 
direction it wouldn’t actually pull it far enough. So we need to bring 
back our friend the <code class="cw rg rh ri rj b">dot()</code> again to find out how far we need to offset it to properly pull the quad’s surface exactly one sphere radius closer.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="12b3" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// this pushes the vertices towards the camera<br>// add just before the UnityWorldToClipPos line in the vertex shader<br>worldPos += worldSpaceRayDir / dot(normalize(viewOffset), worldSpaceRayDir) * maxRadius;</span><span id="b4a5" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// usual clip space at the end of the shader<br>o.pos = UnityWorldToClipPos(worldPos);</span></pre><p id="c255" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Now
 the camera will still near clip with the sphere when you get close, but
 the result is very similar to clipping an actual sphere mesh. Generally
 speaking if the mesh isn’t getting clipped, neither will the ray offset
 quad.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_003.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20FiXqYc-4yjZe8CKFvpk-Mw.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_006.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_007.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_004.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_005.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20FiXqYc-4yjZe8CKFvpk-Mw.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_003.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_004.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_006.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_007.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520FiXqYc-4yjZe8CKFvpk-Mw_008.png"></picture></div></figure><p id="3213" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Once that’s added it’s only a matter of replacing the <code class="cw rg rh ri rj b">SV_Depth</code> semantic in the fragment shaders to the appropriate option. For anything <em class="oo">not</em> OpenGL, you’ll want to use <code class="cw rg rh ri rj b">SV_DepthLessEqual</code>.
 This is because Unity uses a reversed Z depth for non-OpenGL platforms.
 Reversed Z depth means things further away have a smaller depth value 
than closer objects. So really we can just check for if the <code class="cw rg rh ri rj b">UNITY_REVERSED_Z</code>
 keyword is active. For OpenGL … well, really this is all moot. We can’t
 guarantee an OpenGL platform supports the equivalent of <code class="cw rg rh ri rj b">SV_DepthGreaterEqual</code>
 until OpenGL 4.2. ̶A̶n̶d̶ ̶I̶ ̶t̶h̶i̶n̶k̶ ̶O̶p̶e̶n̶G̶L̶ ̶4̶.̶2̶ 
̶u̶s̶e̶s̶ ̶r̶e̶v̶e̶r̶s̶e̶d̶ ̶z̶ ̶d̶e̶p̶t̶h̶. Basically you’re likely 
stuck using <code class="cw rg rh ri rj b">SV_Depth</code> on any 
platform that’s not using the reversed z depth. And then all this 
offsetting of the quad closer to the camera to reduce over shading is 
sadly pointless for those platforms. But we can at least handle both 
cases in the shader.</p><p id="d6fa" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">* edit: Unity running OpenGL 4.2+ still uses regular z depth. You could use </em><code class="cw rg rh ri rj b"><em class="oo">SV_DepthGreaterEqual</em></code><em class="oo">
 for that, but realistically any platform that supports OpenGL 4.2 
you’ll want to be running Direct3D, Vulkan, or Metal on instead.</em></p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="f002" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// update the fragment shader functions like this<br>half4 frag_(forward/shadow) (v2f i<br>#if UNITY_REVERSED_Z &amp;&amp; SHADER_TARGET &gt; 40<br>  , out float outDepth : SV_DepthLessEqual<br>#else<br>// the device probably can't use conservative depth<br>  , out float outDepth : SV_Depth<br>#endif<br>  ) : SV_Target</span></pre></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="2be8" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Finishing Touches</h1><p id="4d46" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">There
 are a few minor items left to fully flesh out the shader. Support for 
“per vertex” non-important lights, fog, and basic instancing. These 
aren’t terribly interesting, so I’ll cover them quickly.</p><h2 id="6699" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">“Per Vertex” Non-Important Lights</h2><p id="2ad9" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Since
 we don’t really have a lot of vertices, we’ll also need to call the 
“vertex light” function in the fragment shader. This is really just a 
matter of copy and pasting the vertex lighting function, sticking it 
inside an <code class="cw rg rh ri rj b">#if</code>, and adding the returned value to the <code class="cw rg rh ri rj b">lighting</code>.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="9b92" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">#if defined(VERTEXLIGHT_ON)<br>// "per vertex" non-important lights<br>half3 vertexLighting = Shade4PointLights(<br>  unity_4LightPosX0, unity_4LightPosY0, unity_4LightPosZ0,<br>  unity_LightColor[0].rgb, unity_LightColor[1].rgb,<br>  unity_LightColor[2].rgb, unity_LightColor[3].rgb,<br>  unity_4LightAtten0,<br>  worldPos, worldNormal);</span><span id="0162" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">lighting += vertexLighting;<br>#endif</span></pre><p id="13d9" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Or at least it <em class="oo">should</em> be this simple. The <code class="cw rg rh ri rj b">VERTEXLIGHT_ON</code> is one of the keywords controlled by <code class="cw rg rh ri rj b">#pragma multi_compile_fwdbase</code>.
 But it seems like if you don’t have that function in the vertex shader 
the shader variant with the keyword is never created. So you also have 
to force it with your own multi compile line.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="7cba" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">#pragma multi_compile _ VERTEXLIGHT_ON</span></pre><h2 id="95f9" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Fog</h2><p id="5ab1" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Like
 with many things covered in this, Unity’s built in macros assume you’re
 outputting some kind of value from the vertex shader. For desktop, this
 is just passing the raw <code class="cw rg rh ri rj b">clipPos.z</code>
 to the fragment shader, which then calculates the actual fog falloff as
 part of the fog macro called there. So we can just put the usual macro 
with <code class="cw rg rh ri rj b">UNITY_APPLY_FOG(clipPos.z, col);</code> at the end of our fragment shader for the forward passes.</p><p id="238a" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">For mobile the falloff is calculated in the vertex shader. But we need to use the <code class="cw rg rh ri rj b">clipPos.z</code> we calculated in the fragment shader, so we can’t just use the usual <code class="cw rg rh ri rj b">UNITY_APPLY_FOG(clipPos.z, col)</code>
 macro if you want to support both mobile and desktop. So we have to 
calculate the falloff and pass that to the macro, but only when on 
mobile.</p><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="330b" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// fog<br>float fogCoord = clipPos.z;</span><span id="c5c4" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">#if (SHADER_TARGET &lt; 30) || defined(SHADER_API_MOBILE)<br>// macro calculates fog falloff<br>// and creates a unityFogFactor variable to hold it<br>UNITY_CALC_FOG_FACTOR(fogCoord);<br>fogCoord = unityFogFactor;<br>#endif</span><span id="bb2e" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">UNITY_APPLY_FOG(fogCoord, col);</span></pre><h2 id="44aa" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Instancing</h2><p id="4492" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">To add instancing to the shader, copy and paste the appropriate macros mentioned on Unity’s own documenation for this:</p><div class="qh qi qj qk ql qm"><a href="https://docs.unity3d.com/Manual/GPUInstancing.html?source=post_page-----13c92025570c--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">GPU instancing</h2><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">docs.unity3d.com</p></div></div><div class="ra l"><div class="tc l rc rd re ra rf me qm"></div></div></div></a></div><p id="1b29" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Go to the section <strong class="nu gu">Adding instancing to vertex and fragment Shaders </strong>and copy the macros into the <code class="cw rg rh ri rj b">appdata</code> &amp;<code class="cw rg rh ri rj b">v2f</code> structs, vertex function <em class="oo">and </em>fragment functions. Ignore the <code class="cw rg rh ri rj b">BUFFER</code> and<code class="cw rg rh ri rj b">PROP</code> macros. But yes you do need the <code class="cw rg rh ri rj b">UNITY_SETUP_INSTANCE_ID(i);</code> in the fragment shaders. In an instanced shader, the <code class="cw rg rh ri rj b">unity_ObjectToWorld</code> and <code class="cw rg rh ri rj b">unity_WorldToObject</code> matrices are instanced properties. And since we’re using those in the fragment shader, we need the instance id there too.</p></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="5e7b" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">The Finished Shader</h1><p id="dd8d" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Without futher ado, here’s the finished shader in its entirety.<br>(<a class="af op" href="https://gist.github.com/bgolus/1188cd89968b977d5c468bf7bbb3250b" rel="noopener ugc nofollow" target="_blank">direct link</a> to gist.)</p><figure class="ng nh ni nj nk mx"><div class="sl qr l fi"><div class="sm sn l"></div></div></figure></div></div></div><div class="ab ca oq or os ot" role="separator"><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow ox"></span><span class="ou bx bl ov ow"></span></div><div class="gm gn go gp gq"><div class="ab ca"><div class="ch bg fy fz ga gb"><h1 id="d738" class="oy oz gt be pa pb pc ht pd pe pf hw pg ph pi pj pk pl pm pn po pp pq pr ps pt bj" data-selectable-paragraph="">Additional Thoughts</h1><h2 id="3835" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Surface Shaders &amp; Shader Graph</h2><p id="11df" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">Because
 I know the next question everyone is going to ask is going to be some 
form of “how do I do this in Surface Shaders / Shader Graph?” Here’s the
 answer to those question.</p><p id="fc16" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">You can’t.*</p><p id="7ebe" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Well,
 you can construct the ray origin and direction. You can do the 
raytracing of the sphere. You can do all of the procedural UV stuff too,
 of course. You can even update the surface normals so it gets lit like a
 sphere.</p><p id="9d83" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The one thing you <em class="oo">can’t </em>do
 is adjust the depth or world position used for lighting and shadows 
from the fragment shader. So depth intersections will look wrong, 
shadows will look wrong, and lights really close to the surface won’t 
look correct either. Because they’ll all be using the original mesh 
surface’s position.</p><p id="f585" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">So
 the only option for using this technique in any of Unity’s renderers is
 to use hand written vertex fragment shaders. For the time being at 
least. I hope one day you’ll be able to output a modified depth value in
 Shader Graph. But as of writing this, they’ve made no mention of 
looking to add this feature.</p><p id="1386" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph=""><em class="oo">*
 It’s been pointed out that Shader Graph for the HDRP does have the 
ability to set a depth on the master node to do per fragment depth. It 
is using </em><code class="cw rg rh ri rj b"><em class="oo">SV_Depth</em></code><em class="oo"> instead of </em><code class="cw rg rh ri rj b"><em class="oo">SV_DepthLessEqual</em></code><em class="oo"> though, so there’s no need to do the ray direction offset of the quad. Thanks to </em><a class="af op" href="https://twitter.com/3DReMix/status/1348584176870633472?s=20" rel="noopener ugc nofollow" target="_blank"><em class="oo">Rémy</em></a><em class="oo"> for reminding me. Hopefully they add this feature to the URP at some point as well.</em></p><div class="qh qi qj qk ql qm"><a href="https://portal.productboard.com/unity/1-unity-graphics/tabs/7-shader-graph?source=post_page-----13c92025570c--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">Shader Graph - Unity Graphics</h2><div class="qy l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Product roadmap and feature requests. Welcome to our product portal.</h3></div><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">portal.productboard.com</p></div></div></div></a></div><h2 id="5378" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Anti-Aliasing</h2><p id="6380" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">So
 many of my other articles are about anti-aliasing, why did I skip that 
here? Because it’s a difficult problem that has no perfect solution.</p><p id="4c34" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">Inigo Quiles has an excellent example of how to handle anti-aliasing of ray traced spheres here:</p><div class="qh qi qj qk ql qm"><a href="https://www.shadertoy.com/view/MsSSWV?source=post_page-----13c92025570c--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qn ab ji"><div class="qo ab cn ca qp qq"><h2 class="be gu iz z qr qs qt qu qv qw qx gs bj">Shadertoy</h2><div class="qy l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Build shaders, share them, and learn from the best community.</h3></div><div class="qz l"><p class="be b du z qr qs qt qu qv qw qx dt">www.shadertoy.com</p></div></div><div class="ra l"><div class="td l rc rd re ra rf me qm"></div></div></div></a></div><p id="66fd" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 basic idea is to use a ray to point distance calculation (which is also
 being used to fix the UVs on the outer edge) to get an approximation of
 how close to the edge of the sphere the ray is in screen space. That 
can give you an gradient that can be sharpened using a function like 
that used in my Alpha to Coverage article and then use that as the 
output alpha. Could also be used for alpha blending in non-MSAA and 
non-opaque use cases.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_003.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_007.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_006.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20hdSrnGYFJolHVaZ5glxz0Q.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_002.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_006.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_005.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_004.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_003.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_007.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20hdSrnGYFJolHVaZ5glxz0Q.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520hdSrnGYFJolHVaZ5glxz0Q_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x MSAA with the original shader vs using Alpha to Coverage.</figcaption></figure><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="43cb" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// add this to the pass outside of the CGPROGRAM to enable<br>// alpha to coverage<br>AlphaToMask On<br></span><span id="c630" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// ray to sphere pivot distance<br>float rayToPointDist = length(rayDir * dot(rayDir, -rayOrigin) + rayOrigin);</span><span id="86cb" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// fwidth gets the sum of the ddx &amp; ddy partial derivatives<br>// float fDist = fwidth(rayToPointDist);</span><span id="dd55" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// fwidth is a coarse approximation of this<br>float fDist = length(float2(ddx(rayToPointDist), ddy(rayToPointDist)));</span><span id="d512" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// sharpen ray to point distance<br>// centered on sphere radius, +/- half a pixel based on derivatives<br>float alpha = (0.5 - rayToPointDist) / max(fDist, 0.0001) + 0.5;</span><span id="2b2b" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// clip based on sharpened alpha <br>// don't clip based on ray hit miss<br>clip(alpha);</span><span id="1a25" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// clamp alpha to a 0 to 1 range and apply to output alpha after<br>// sampling the texture<br>col.a = saturate(alpha);</span></pre><p id="9041" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">That
 seems like it should be good enough, right? So why did I say there’s no
 perfect solution? And why didn’t I implement that by default? 
Anti-aliasing the outside edge doesn’t solve aliasing on intersections 
with rasterized meshes or other shaders that output depth from the 
fragment shader. When rasterizing a triangle with MSAA enabled the depth
 is calculated for each subsample the triangle covers, but the fragment 
shader is only run once per pixel. This means the per subsample coverage
 of two intersecting meshes can be accurately determined down to the 
subsample count. This shader is writing the depth from the fragment 
shader, so there’s only a single depth per pixel. The same depth is then
 use for all of the subsamples. Thus no AA on intersections. Technically
 there is still <em class="oo">some</em> AA on intersections between 
rasterized geometry and fragment shaders that output depth, as the plane
 of the intersecting triangle is taken into account. But between two 
depth writing shaders there will be none.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20OTuu-3jJbYO-SJmMpAw2CQ.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_006.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_003.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_002.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_007.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_005.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_007.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_006.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_004.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20OTuu-3jJbYO-SJmMpAw2CQ.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_003.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_005.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520OTuu-3jJbYO-SJmMpAw2CQ_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x
 MSAA with the original shader vs using Alpha to Coverage. Note 
intersections are identical with both approaches. Rasterized surfaces 
that are aligned with the view plane show aliasing on intersections with
 impostor. Rasterized surfaces viewed at an angle show anti-aliasing, 
but it is equivalent to intersecting a view plane aligned surface.</figcaption></figure><p id="dc60" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">The
 Shadertoy example above can handle intersections just because it is 
rendering all of those spheres in one pass and doing per pixel sorting 
and compositing of the analytical shapes. It’s not even doing any MSAA.</p><p id="4adb" class="pw-post-body-paragraph ns nt gt nu b hr nv nw nx hu ny nz oa ob oc od oe of og oh oi oj ok ol om on gm bj" data-selectable-paragraph="">There’s
 no efficient way I’m aware of to handle fragment shader depth writes 
with MSAA enabled while still only running the fragment shader once per 
pixel. That leaves using the <code class="cw rg rh ri rj b">sample</code>
 interpolation modifier to force the fragment shader to be run for every
 subsample. Not exactly great for performance when the whole point of 
MSAA was to <em class="oo">not </em>do that. It does look nice though.</p><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_004.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_006.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20eiHTfqsm9Ng6zXgMWOx6wg.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_007.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_003.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_002.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_006.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_007.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20eiHTfqsm9Ng6zXgMWOx6wg.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_005.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_002.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_003.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520eiHTfqsm9Ng6zXgMWOx6wg_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x MSAA with the original shader vs shader forced to render per subsample.</figcaption></figure><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_007.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_004.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_005.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_003.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%202syMBVV_TijS0bAJ5IoFcg.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_006.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_005.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_007.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%202syMBVV_TijS0bAJ5IoFcg.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_006.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_002.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%25202syMBVV_TijS0bAJ5IoFcg_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x
 MSAA with the original shader vs shader forced to render per subsample.
 Note intersections for the super sampled case are all properly 
anti-aliased.</figcaption></figure><pre class="ng nh ni nj nk rk rj rl rm ax rn bj"><span id="027d" class="ro oz gt rj b iz rp rq l rr rs" data-selectable-paragraph="">// update the v2f struct to use the sample modifier for the<br>// interpolated ray dir and origin vectors to force fragment<br>// shader to run for each subsample and for the interpolated<br>// values to get computed uniquely for each subsample position<br>struct v2f<br>{<br>  float4 pos : SV_POSITION;<br>  sample float3 rayDir : TEXCOORD0;<br>  sample float3 rayOrigin : TEXCOORD1;<br>  UNITY_VERTEX_INPUT_INSTANCE_ID<br>};</span><span id="968e" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// add this inside the CGPROGRAM blocks for the passes as the<br>// sample modifier is a Shader Model 5.0 feature<br>#pragma target 5.0</span><span id="af58" class="ro oz gt rj b iz so rq l rr rs" data-selectable-paragraph="">// and you may want to bias the texture mip level<br>// because why not if we're already super sampling!<br>half4 col = tex2Dbias(_MainTex, float4(uv, 0, -1));</span></pre><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne cg"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20X00KxPSdiKe8HIMVYa1Pvw.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_005.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_006.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_003.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_002.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_007.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_004.webp 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_004.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_002.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_007.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_003.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_005.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20X00KxPSdiKe8HIMVYa1Pvw.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_006.png 1360w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 680px"><img alt="" class="bg me nr c" width="680" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520X00KxPSdiKe8HIMVYa1Pvw_008.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x MSAA with Alpha to Coverage vs shader forced to render per subsample.</figcaption></figure><figure class="ng nh ni nj nk mx nd ne paragraph-image"><div class="nd ne te"><picture><source srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_002.webp 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20x3I-gYUzsShsJlpXkXGlkQ.webp 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_003.webp 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_007.webp 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_005.webp 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_006.webp 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_004.webp 1380w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 690px" type="image/webp"><source data-testid="og" srcset="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_008.png 640w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_005.png 720w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_004.png 750w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_002.png 786w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_006.png 828w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_003.png 1100w, Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20x3I-gYUzsShsJlpXkXGlkQ.png 1380w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 690px"><img alt="" class="bg me nr c" width="690" height="420" loading="lazy" role="presentation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520x3I-gYUzsShsJlpXkXGlkQ_007.png"></picture></div><figcaption class="sh fe si nd ne sj sk be b bf z dt" data-selectable-paragraph="">4x MSAA with original shader vs Alpha to Coverage vs Forced Super Sampling intersection comparison.</figcaption></figure><h2 id="873e" class="ro oz gt be pa rt ru dx pd rv rw dz pg ob rx ry rz of sa sb sc oj sd se sf sg bj" data-selectable-paragraph="">Deferred Rendering</h2><p id="2654" class="pw-post-body-paragraph ns nt gt nu b hr pu nw nx hu pv nz oa ob pw od oe of px oh oi oj py ol om on gm bj" data-selectable-paragraph="">I
 didn’t include a deferred rendering pass in the example shader. There’s
 no reason why this wouldn’t work with deferred though. It’d be a lot 
easier of a shader to write even. But I was trying to keep the shader as
 straight forward as possible.</p></div></div></div></div></section></div></div></article><div class="ab ca"><div class="ch bg fy fz ga gb"></div></div></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="tf tg ab jl"><div class="qy ab"><a class="th ax am ao" href="https://medium.com/tag/shaders?source=post_page-----13c92025570c---------------shaders-----------------" rel="noopener follow"><div class="ti fi cw tj gd tk tl be b bf z bj tm">Shaders</div></a></div><div class="qy ab"><a class="th ax am ao" href="https://medium.com/tag/graphics-programming?source=post_page-----13c92025570c---------------graphics_programming-----------------" rel="noopener follow"><div class="ti fi cw tj gd tk tl be b bf z bj tm">Graphics Programming</div></a></div><div class="qy ab"><a class="th ax am ao" href="https://medium.com/tag/unity-game-development?source=post_page-----13c92025570c---------------unity_game_development-----------------" rel="noopener follow"><div class="ti fi cw tj gd tk tl be b bf z bj tm">Unity Game Development</div></a></div></div></div></div><div class="l"></div><footer class="tn to tp tq tr ts tt tu tv ab q tw tx c"><div class="l ae"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ab co ty"><div class="ab q ku"><div class="tz l"><span class="l ua ub uc e d"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----13c92025570c---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="8" aria-labelledby="8"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="66" aria-labelledby="66"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">118<span class="l h g f ud ue"></span></button></p></div></div></div></div></span><span class="l h g f ud ue"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----13c92025570c---------------------clap_footer-----------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="9" aria-labelledby="9"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="68" aria-labelledby="68"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">118</button></p></div></div></div></div></span></div><div class="bp ab"><div><div class="bl" aria-hidden="false" aria-describedby="10" aria-labelledby="10"><button class="ao la ls lt ab q fj lu lv" aria-label="responses"><svg width="24" height="24" viewBox="0 0 24 24" class="lr"><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b bf z dt"><span class="pw-responses-count lq lr">6</span></p></button></div></div></div></div><div class="ab q"><div class="ox l ji"><div><div class="bl" aria-hidden="false" aria-describedby="11" aria-labelledby="11"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F13c92025570c&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;source=--------------------------bookmark_footer-----------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div><div class="ox l ji"><div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bl" aria-hidden="false" aria-describedby="12" aria-labelledby="12"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fj ah ai aj ak al mf an ao ap ew mg mh lv mi"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="uf ug uh ui uj l bw"><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="ck ab uk co"><div class="ab iq"><a rel="noopener follow" href="https://bgolus.medium.com/?source=post_page-----13c92025570c--------------------------------"><div class="l ul um bx un iu"><div class="l fi"><img alt="Ben Golus" class="l fc bx uo up cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20aZ0riE9vn3VFI7v4H1V-GQ.png" width="72" height="72" loading="lazy"><div class="iv bx l uo up fr n iw fs"></div></div></div></a></div><div class="j i d"><div class="ab"><span><button class="be b bf z eo ti ep eq er es et eu ev ew ex ey ez uq fa fb fc bl fd fe">Follow</button></span><div class="ds l"><div><div><div class="bl" aria-hidden="false" aria-describedby="123" aria-labelledby="123"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2a9de43457d2&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;newsletterV3=d4d33ac3d661&amp;newsletterV3Id=2a9de43457d2&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----13c92025570c---------------------subscribe_user-----------" rel="noopener follow"><button class="be b bf z eo am ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" aria-label="Subscribe"><svg width="38" height="38" viewBox="0 0 38 38" fill="none" class="xd us ut"><rect x="26.25" y="9.25" width="0.5" height="6.5" rx="0.25"></rect><rect x="29.75" y="12.25" width="0.5" height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5L19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cm co"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=post_page-----13c92025570c--------------------------------"><h2 class="pw-author-name be vc vd ve vf bj"><span class="gm">Written by <!-- -->Ben Golus</span></h2></a></div><div class="qy ab"><div class="l ji"><span class="pw-follower-count be b bf z bj"><a class="af ag ah ai aj ak al am an ao ap aq ar jb" rel="noopener follow" href="https://bgolus.medium.com/followers?source=post_page-----13c92025570c--------------------------------">1K Followers</a></span></div></div><div class="vg l"><p class="be b bf z bj">Tech Artist &amp; Graphics Programmer lately focused on Unity VR game dev. <a class="af ag ah ai aj ak al am an ao ap aq ar op gn" href="https://ko-fi.com/bgolus" rel="noopener  ugc nofollow">https://ko-fi.com/bgolus</a></p></div></div><div class="h k"><div class="ab"><span><button class="be b bf z eo ti ep eq er es et eu ev ew ex ey ez uq fa fb fc bl fd fe">Follow</button></span><div class="ds l"><div><div><div class="bl" aria-hidden="false" aria-describedby="124" aria-labelledby="124"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F2a9de43457d2&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Frendering-a-sphere-on-a-quad-13c92025570c&amp;newsletterV3=d4d33ac3d661&amp;newsletterV3Id=2a9de43457d2&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----13c92025570c---------------------subscribe_user-----------" rel="noopener follow"><button class="be b bf z eo am ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" aria-label="Subscribe"><svg width="38" height="38" viewBox="0 0 38 38" fill="none" class="xd us ut"><rect x="26.25" y="9.25" width="0.5" height="6.5" rx="0.25"></rect><rect x="29.75" y="12.25" width="0.5" height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5L19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="vh bg vi vj vk vl vm vn"></div></div></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="xe xf l"><h2 class="be vc iz z gs bj">More from Ben Golus</h2></div><div class="xg ab ku jl xh xi xj xk xl xm xn xo xp xq xr xs xt xu xv"><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8" tabindex="0"><div class="zh"><div aria-label="The Best Darn Grid Shader (Yet)"><div class="zj zk zl zm zn"><img alt="The Best Darn Grid Shader (Yet)" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20dpockPHg8k6UHIx7iaYYAQ.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="125" aria-labelledby="125"><a tabindex="-1" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----0---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div class="l fi"><img alt="Ben Golus" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_003.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="126" aria-labelledby="126"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----0---------------------844add8f_204d_49e6_98d2_86b194199792-------"><p class="be b du z qr abf qt qu abg qw abh qx bj">Ben Golus</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8?source=author_recirc-----13c92025570c----0---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">The Best Darn Grid Shader (Yet)</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">For as long as I’ve been writing shaders, there’s been one specific shader I’ve always tried to write…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>25 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Oct 20, 2023</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F727f9278b9d8&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-best-darn-grid-shader-yet-727f9278b9d8&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----727f9278b9d8----0-----------------clap_footer----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="127" aria-labelledby="127"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="207" aria-labelledby="207"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">154<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="128" aria-labelledby="128"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" rel="noopener follow" href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=author_recirc-----13c92025570c----0---------------------844add8f_204d_49e6_98d2_86b194199792-------"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">9</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="129" aria-labelledby="129"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F727f9278b9d8&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-best-darn-grid-shader-yet-727f9278b9d8&amp;source=-----13c92025570c----0-----------------bookmark_preview----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://bgolus.medium.com/the-quest-for-very-wide-outlines-ba82ed442cd9" tabindex="0"><div class="zh"><div aria-label="The Quest for Very Wide Outlines"><div class="zj zk zl zm zn"><img alt="The Quest for Very Wide Outlines" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%208LO3WsI6IVnpLhqzzTDXgg.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="130" aria-labelledby="130"><a tabindex="-1" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----1---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div class="l fi"><img alt="Ben Golus" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_003.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="131" aria-labelledby="131"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----1---------------------844add8f_204d_49e6_98d2_86b194199792-------"><p class="be b du z qr abf qt qu abg qw abh qx bj">Ben Golus</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="https://bgolus.medium.com/the-quest-for-very-wide-outlines-ba82ed442cd9?source=author_recirc-----13c92025570c----1---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">The Quest for Very Wide Outlines</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">An Exploration of GPU Silhouette Rendering</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>29 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Jul 19, 2020</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2Fba82ed442cd9&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-quest-for-very-wide-outlines-ba82ed442cd9&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----ba82ed442cd9----1-----------------clap_footer----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="132" aria-labelledby="132"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="209" aria-labelledby="209"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">854<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="133" aria-labelledby="133"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" rel="noopener follow" href="https://bgolus.medium.com/the-quest-for-very-wide-outlines-ba82ed442cd9?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=author_recirc-----13c92025570c----1---------------------844add8f_204d_49e6_98d2_86b194199792-------"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">9</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="134" aria-labelledby="134"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fba82ed442cd9&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-quest-for-very-wide-outlines-ba82ed442cd9&amp;source=-----13c92025570c----1-----------------bookmark_preview----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://bgolus.medium.com/normal-mapping-for-a-triplanar-shader-10bf39dca05a" tabindex="0"><div class="zh"><div aria-label="Normal Mapping for a Triplanar Shader"><div class="zj zk zl zm zn"><img alt="Normal Mapping for a Triplanar Shader" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20cSw3oFH9WP9rrYmpllZcdQ.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="135" aria-labelledby="135"><a tabindex="-1" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----2---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div class="l fi"><img alt="Ben Golus" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_003.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="136" aria-labelledby="136"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----2---------------------844add8f_204d_49e6_98d2_86b194199792-------"><p class="be b du z qr abf qt qu abg qw abh qx bj">Ben Golus</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="https://bgolus.medium.com/normal-mapping-for-a-triplanar-shader-10bf39dca05a?source=author_recirc-----13c92025570c----2---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Normal Mapping for a Triplanar Shader</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Triplanar
 mapping is a great solution for dealing with texturing on complex 
geometry that is difficult or impossible to use traditional UVs…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>30 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Sep 17, 2017</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F10bf39dca05a&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fnormal-mapping-for-a-triplanar-shader-10bf39dca05a&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----10bf39dca05a----2-----------------clap_footer----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="137" aria-labelledby="137"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="211" aria-labelledby="211"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">973<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="138" aria-labelledby="138"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" rel="noopener follow" href="https://bgolus.medium.com/normal-mapping-for-a-triplanar-shader-10bf39dca05a?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=author_recirc-----13c92025570c----2---------------------844add8f_204d_49e6_98d2_86b194199792-------"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">7</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="139" aria-labelledby="139"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F10bf39dca05a&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fnormal-mapping-for-a-triplanar-shader-10bf39dca05a&amp;source=-----13c92025570c----2-----------------bookmark_preview----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://bgolus.medium.com/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f" tabindex="0"><div class="zh"><div aria-label="Anti-aliased Alpha Test: The Esoteric Alpha To Coverage"><div class="zj zk zl zm zn"><img alt="Anti-aliased Alpha Test: The Esoteric Alpha To Coverage" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20zu3SAj1FZ1C8cUyBDvCTUQ.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="140" aria-labelledby="140"><a tabindex="-1" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----3---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div class="l fi"><img alt="Ben Golus" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_003.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="141" aria-labelledby="141"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=author_recirc-----13c92025570c----3---------------------844add8f_204d_49e6_98d2_86b194199792-------"><p class="be b du z qr abf qt qu abg qw abh qx bj">Ben Golus</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="https://bgolus.medium.com/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f?source=author_recirc-----13c92025570c----3---------------------844add8f_204d_49e6_98d2_86b194199792-------"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Anti-aliased Alpha Test: The Esoteric Alpha To Coverage</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Aliasing
 is the bane of VR. We have several tools we use to try to remove, or at
 least reduce aliasing in real time graphics today. Tools…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>15 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Aug 13, 2017</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F8b177335ae4f&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fanti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----8b177335ae4f----3-----------------clap_footer----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="142" aria-labelledby="142"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="213" aria-labelledby="213"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">461<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="143" aria-labelledby="143"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" rel="noopener follow" href="https://bgolus.medium.com/anti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=author_recirc-----13c92025570c----3---------------------844add8f_204d_49e6_98d2_86b194199792-------"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">15</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="144" aria-labelledby="144"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F8b177335ae4f&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fanti-aliased-alpha-test-the-esoteric-alpha-to-coverage-8b177335ae4f&amp;source=-----13c92025570c----3-----------------bookmark_preview----844add8f_204d_49e6_98d2_86b194199792-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div class="vh bg vi dj dk add ade adf"></div><div class="ab jj jk adg adh adi"><a class="be b bf z bj ti adj adk adl lx lu adm eu ev ew adn ado adp ez adq adr ads adt adu fa fb fc bl fd fe" rel="noopener follow" href="https://bgolus.medium.com/?source=post_page-----13c92025570c--------------------------------"><div class="l fe">See all from Ben Golus</div></a></div></div></div><div class="vh bg vi adv adw adx ady adz"></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="aea aeb l"><h2 class="be vc pb ht pd pe hw pg ph pj pk pl pn po pp pr ps bj">Recommended from Medium</h2><div class="ng nh ni nj nk l"><div class="xg ab ku jl xh xi xj xk xl xm xn xo xp xq xr xs xt xu xv"><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8" tabindex="0"><div class="zh"><div aria-label="The Best Darn Grid Shader (Yet)"><div class="zj zk zl zm zn"><img alt="The Best Darn Grid Shader (Yet)" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20dpockPHg8k6UHIx7iaYYAQ.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="145" aria-labelledby="145"><a tabindex="-1" rel="noopener follow" href="https://bgolus.medium.com/?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------"><div class="l fi"><img alt="Ben Golus" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520aZ0riE9vn3VFI7v4H1V-GQ_003.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="146" aria-labelledby="146"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" rel="noopener follow" href="https://bgolus.medium.com/?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------"><p class="be b du z qr abf qt qu abg qw abh qx bj">Ben Golus</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">The Best Darn Grid Shader (Yet)</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">For as long as I’ve been writing shaders, there’s been one specific shader I’ve always tried to write…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>25 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Oct 20, 2023</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F727f9278b9d8&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-best-darn-grid-shader-yet-727f9278b9d8&amp;user=Ben+Golus&amp;userId=d4d33ac3d661&amp;source=-----727f9278b9d8----0-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="147" aria-labelledby="147"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="215" aria-labelledby="215"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">154<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="148" aria-labelledby="148"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" rel="noopener follow" href="https://bgolus.medium.com/the-best-darn-grid-shader-yet-727f9278b9d8?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">9</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="149" aria-labelledby="149"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F727f9278b9d8&amp;operation=register&amp;redirect=https%3A%2F%2Fbgolus.medium.com%2Fthe-best-darn-grid-shader-yet-727f9278b9d8&amp;source=-----13c92025570c----0-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://medium.com/@adder1812/dot-product-is-the-coolest-math-in-shaders-e5baa66a9bbf" tabindex="0"><div class="zh"><div aria-label="Dot Product is the coolest math in shaders."><div class="zj zk zl zm zn"><img alt="Dot Product is the coolest math in shaders." class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20hjHVdAaxskHfANNrqN3iSA.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="150" aria-labelledby="150"><a tabindex="-1" href="https://medium.com/@adder1812?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div class="l fi"><img alt="Mikołaj Fabjański" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%2520dmbNkD5D-u45r44go_cf0g_002.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="151" aria-labelledby="151"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/@adder1812?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">Mikołaj Fabjański</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/@adder1812/dot-product-is-the-coolest-math-in-shaders-e5baa66a9bbf?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Dot Product is the coolest math in shaders.</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Dot
 product is one of the most important, most versatile function used in 
shaders. There’s a chance you know and use it already — but if…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>9 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Apr 19, 2024</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2Fe5baa66a9bbf&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40adder1812%2Fdot-product-is-the-coolest-math-in-shaders-e5baa66a9bbf&amp;user=Miko%C5%82aj+Fabja%C5%84ski&amp;userId=86873fc2e38c&amp;source=-----e5baa66a9bbf----1-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="152" aria-labelledby="152"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="217" aria-labelledby="217"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">43<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="153" aria-labelledby="153"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" href="https://medium.com/@adder1812/dot-product-is-the-coolest-math-in-shaders-e5baa66a9bbf?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg><p class="be b du z dt"><span class="pw-responses-count lq lr">1</span></p></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="154" aria-labelledby="154"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fe5baa66a9bbf&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40adder1812%2Fdot-product-is-the-coolest-math-in-shaders-e5baa66a9bbf&amp;source=-----13c92025570c----1-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div><div class="vh bg vi aec"></div><h2 class="be vc iz z gs bj">Lists</h2><div class="oq l"><div class="cm ab ku jl xh xi xj xk xl xm xn xo xp xq xr xs xt xu xv"><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab ck cm" href="https://medium.com/@MediumStaff/list/staff-picks-c7bc6e1ee00f?source=read_next_recirc-----13c92025570c--------------------------------" rel="noopener follow"><div class="aei aej qr ab ji fi"><div class="fi zo aee bw aef"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20QYzTQ-IC4HWm7x2JzQbblw.png" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo aee bw kv aeg"><div class="zo is qr l"><img alt="A little girl sits on a stool, facing her mother who is working at her desk, back turned to her." class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/0%20DsQMwrAFlP1obU6b.jpg" width="48" height="48" loading="lazy"></div></div><div class="fi zo bw tx aeh"><div class="zo is qr l"><img alt="Book cover with a black pattern on an ivory background and colorful floating squares: Title reads: The Translator’s Daughter: A Memoir, by Grace Loh Prasad" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20WJPWikvL_pEwkb0i3DcawA.png" width="48" height="48" loading="lazy"></div></div></div><div class="aw l"><h2 class="be vc iz z qr qs qt qu qv qw qx gs bj">Staff Picks</h2><div class="be b du z dt ab aed">656 stories<span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span>1020 saves</div></div></a></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab ck cm" href="https://medium.com/@MediumStaff/list/stories-to-help-you-levelup-at-work-faca18b0622f?source=read_next_recirc-----13c92025570c--------------------------------" rel="noopener follow"><div class="aei aej qr ab ji fi"><div class="fi zo aee bw aef"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%204zC5ohNcmVDb1NXmzCvmNA.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo aee bw kv aeg"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%200dul7hn9LeV7U2XLVPvYYw.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo bw tx aeh"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20oO7uwYs0NMWV7B4mUCuoIw.png" width="48" height="48" loading="lazy" role="presentation"></div></div></div><div class="aw l"><h2 class="be vc iz z qr qs qt qu qv qw qx gs bj">Stories to Help You Level-Up at Work</h2><div class="be b du z dt ab aed">19 stories<span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span>640 saves</div></div></a></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab ck cm" href="https://medium.com/@MediumForTeams/list/selfimprovement-101-3c62b6cb0526?source=read_next_recirc-----13c92025570c--------------------------------" rel="noopener follow"><div class="aei aej qr ab ji fi"><div class="fi zo aee bw aef"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20VQhBEVqZRXlxFvFVqyTYVA.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo aee bw kv aeg"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20XRekBY0_j_KEo2_lK_SrkQ.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo bw tx aeh"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20c2stHqktjG8_XTqkC-bkfw.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div></div><div class="aw l"><h2 class="be vc iz z qr qs qt qu qv qw qx gs bj">Self-Improvement 101</h2><div class="be b du z dt ab aed">20 stories<span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span>1982 saves</div></div></a></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab ck cm" href="https://medium.com/@MediumForTeams/list/productivity-101-f09f1aaf38cd?source=read_next_recirc-----13c92025570c--------------------------------" rel="noopener follow"><div class="aei aej qr ab ji fi"><div class="fi zo aee bw aef"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20HWxGot_WiEOZ0fkB_ee2gg.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo aee bw kv aeg"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20kAzwx9sMsEYm0bMYDTa-lQ.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div><div class="fi zo bw tx aeh"><div class="zo is qr l"><img alt="" class="" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20GGLm6Juo_CxQAKEM-mAWfw.jpg" width="48" height="48" loading="lazy" role="presentation"></div></div></div><div class="aw l"><h2 class="be vc iz z qr qs qt qu qv qw qx gs bj">Productivity 101</h2><div class="be b du z dt ab aed">20 stories<span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span>1791 saves</div></div></a></div></div></div><div class="vh bg vi aek dj ael dk aem aen aeo aep aeq aer"></div><div class="xg ab ku jl xh xi xj xk xl xm xn xo xp xq xr xs xt xu xv"><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://medium.com/@echo3D/how-disney-is-using-3d-augmented-reality-and-virtual-reality-to-reshape-the-entertainment-0fcc203eff26" tabindex="0"><div class="zh"><div aria-label="How Disney is using 3D, Augmented Reality, and Virtual Reality to Reshape the Entertainment…"><div class="zj zk zl zm zn"><img alt="How Disney is using 3D, Augmented Reality, and Virtual Reality to Reshape the Entertainment…" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20ul4bYcVNtiyIEdzYHWVuHw.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="155" aria-labelledby="155"><a tabindex="-1" href="https://medium.com/@echo3D?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div class="l fi"><img alt="echo3D" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/2%20kTsjgrtBPXRBI2zLJ_WPQQ.jpg" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="156" aria-labelledby="156"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/@echo3D?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">echo3D</p></a></div></div></div><div class="abe l"><p class="be b du z dt">in</p></div><div class="l"><div><div class="l" aria-hidden="false" aria-describedby="157" aria-labelledby="157"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/echo3d?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">echo3D</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/@echo3D/how-disney-is-using-3d-augmented-reality-and-virtual-reality-to-reshape-the-entertainment-0fcc203eff26?source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div title="How Disney is using 3D, Augmented Reality, and Virtual Reality to Reshape the Entertainment…"><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">How Disney is using 3D, Augmented Reality, and Virtual Reality to Reshape the Entertainment…</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Augmented
 reality (AR) and virtual reality (VR) are powerful technologies that 
either overlay digital information onto the real world or…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>5 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Apr 2, 2024</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fecho3d%2F0fcc203eff26&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fecho3d%2Fhow-disney-is-using-3d-augmented-reality-and-virtual-reality-to-reshape-the-entertainment-0fcc203eff26&amp;user=echo3D&amp;userId=7c12cb6943a&amp;source=-----0fcc203eff26----0-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="158" aria-labelledby="158"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="219" aria-labelledby="219"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">60<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="159" aria-labelledby="159"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" href="https://medium.com/@echo3D/how-disney-is-using-3d-augmented-reality-and-virtual-reality-to-reshape-the-entertainment-0fcc203eff26?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----0---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="160" aria-labelledby="160"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F0fcc203eff26&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fecho3d%2Fhow-disney-is-using-3d-augmented-reality-and-virtual-reality-to-reshape-the-entertainment-0fcc203eff26&amp;source=-----13c92025570c----0-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://medium.com/@evolution352/unity-sound-in-3d-80ad06dd8c98" tabindex="0"><div class="zh"><div aria-label="Unity: Sound in 3D"><div class="zj zk zl zm zn"><img alt="Unity: Sound in 3D" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20rm2ehpbP27stQ3tdOfQ1TA.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="161" aria-labelledby="161"><a tabindex="-1" href="https://medium.com/@evolution352?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div class="l fi"><img alt="Bounchanh Kompackdee" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/0%208-4gdOA-0kdGYUN6.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="162" aria-labelledby="162"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/@evolution352?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">Bounchanh Kompackdee</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/@evolution352/unity-sound-in-3d-80ad06dd8c98?source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Unity: Sound in 3D</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Today
 I am going to be adding sound to the the pistol I have been working on.
 With the revolver/pistol selected, head over to the XR grab…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>2 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Jan 23, 2024</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi kw kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F80ad06dd8c98&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40evolution352%2Funity-sound-in-3d-80ad06dd8c98&amp;user=Bounchanh+Kompackdee&amp;userId=5d31872f151f&amp;source=-----80ad06dd8c98----1-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="163" aria-labelledby="163"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><div><div class="bl" aria-hidden="false" aria-describedby="221" aria-labelledby="221"><p class="be b du z dt"><button class="af ag ah ai aj ak al am an ao ap aq ar as at xb lx">1<span class="l h g f ud ue"></span></button></p></div></div></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="164" aria-labelledby="164"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" href="https://medium.com/@evolution352/unity-sound-in-3d-80ad06dd8c98?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----1---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="165" aria-labelledby="165"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F80ad06dd8c98&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40evolution352%2Funity-sound-in-3d-80ad06dd8c98&amp;source=-----13c92025570c----1-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://medium.com/@nagrajmashloras5954/materials-and-shaders-in-ue5-with-substance-suite-2811eb1301f3" tabindex="0"><div class="zh"><div aria-label="Materials and shaders in UE5 with Substance Suite"><div class="zj zk zl zm zn"><img alt="Materials and shaders in UE5 with Substance Suite" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20UZnyu0IW6BIF_gRBCohUfg.png" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="166" aria-labelledby="166"><a tabindex="-1" href="https://medium.com/@nagrajmashloras5954?source=read_next_recirc-----13c92025570c----2---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div class="l fi"><img alt="Nagraj Machana" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/0%20Bfy8YIl-elaFPwIE.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="167" aria-labelledby="167"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/@nagrajmashloras5954?source=read_next_recirc-----13c92025570c----2---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">Nagraj Machana</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/@nagrajmashloras5954/materials-and-shaders-in-ue5-with-substance-suite-2811eb1301f3?source=read_next_recirc-----13c92025570c----2---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Materials and shaders in UE5 with Substance Suite</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Shaders
 and materials are crucial to the design platform, just as they are to 
the creation of any 3D model used in movies, video games, or…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>12 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Mar 9, 2024</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi aes kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F2811eb1301f3&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40nagrajmashloras5954%2Fmaterials-and-shaders-in-ue5-with-substance-suite-2811eb1301f3&amp;user=Nagraj+Machana&amp;userId=bf3c357791f9&amp;source=-----2811eb1301f3----2-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="168" aria-labelledby="168"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="169" aria-labelledby="169"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" href="https://medium.com/@nagrajmashloras5954/materials-and-shaders-in-ue5-with-substance-suite-2811eb1301f3?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----2---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="170" aria-labelledby="170"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F2811eb1301f3&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40nagrajmashloras5954%2Fmaterials-and-shaders-in-ue5-with-substance-suite-2811eb1301f3&amp;source=-----13c92025570c----2-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div><div class="j i d"><div class="vh bg vi oq"></div></div></div></div></div></div></div></div></article></div></div><div class="xw xx xy my xz ya yb mz yc yd ye yf yg yh yi yj yk yl ym yn yo"><div class="yp yq yr ys yt dv l"><article class="dv"><div class="dv tv l"><div class="bg dv"><div class="dv l"><div class="fi dv yu yv yw yx yy yz za zb zc zd ze zf zg" role="link" data-href="https://medium.com/@sean.duggan/unity-ar-interface-03bed650a355" tabindex="0"><div class="zh"><div aria-label="Unity AR Interface"><div class="zj zk zl zm zn"><img alt="Unity AR Interface" class="bg zo zp zq zr bw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1%20D3gUGoYk7u7sZtudq9L0TQ.gif" loading="lazy"></div></div></div><div class="zi ab ca cn"><div class="ab cn zs bg zt zu zv zw"><div class="zx zy zz aba abb ab q"><div class="th l"><div><div class="l" aria-hidden="false" aria-describedby="171" aria-labelledby="171"><a tabindex="-1" href="https://medium.com/@sean.duggan?source=read_next_recirc-----13c92025570c----3---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div class="l fi"><img alt="Sean Duggan" class="l fc bx abc abd cw" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/0%20VGIpfo6hvY47P2Zi.png" width="20" height="20" loading="lazy"><div class="fq bx l abc abd fr n ax fs"></div></div></a></div></div></div><div class="abe l"><div><div class="l" aria-hidden="false" aria-describedby="172" aria-labelledby="172"><a class="af ag ah ai aj ak al am an ao ap aq ar jb ab q" href="https://medium.com/@sean.duggan?source=read_next_recirc-----13c92025570c----3---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><p class="be b du z qr abf qt qu abg qw abh qx bj">Sean Duggan</p></a></div></div></div></div><div class="abi abj abk abl abm abn abo abp abq abr l gm"><div class="abs abt abu abv abw abx aby abz"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/@sean.duggan/unity-ar-interface-03bed650a355?source=read_next_recirc-----13c92025570c----3---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div title=""><h2 class="be gu pb ht aca acb pd pe hw acc acd pg ob ry ace acf rz of sb acg ach sc oj se aci acj sf qr qt qu qw qx bj">Unity AR Interface</h2></div><div class="ack l"><h3 class="be b iz z qr qs qt qu qv qw qx dt">Now
 that we have two different items that we can place in our world, it 
would be nice to be able to use both of them, instead of just…</h3></div></a></div></div><span class="be b du z dt"><div class="ab q"><span>2 min read</span><span class="jc l" aria-hidden="true"><span class="be b bf z dt">·</span></span><span>Feb 14, 2024</span></div></span><div class="acl acm acn aco acp l"><div class="ab co"><div class="am acq acr acs act acu acv acw acx acy acz ab q"><div class="ab q ku kv"><div class="pw-multi-vote-icon fi aes kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F03bed650a355&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40sean.duggan%2Funity-ar-interface-03bed650a355&amp;user=Sean+Duggan&amp;userId=70ed62a2928e&amp;source=-----03bed650a355----3-----------------clap_footer----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><div><div class="bl" aria-hidden="false" aria-describedby="173" aria-labelledby="173"><div class="la ao lb lc ld le am lf lg lh kz"><svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z"></path></svg></div></div></div></a></span></div></div><div class="ada l"><div><div class="bl" aria-hidden="false" aria-describedby="174" aria-labelledby="174"><a class="af fj ah la aj ak al lt an ao ap aq ar as at ls ab q lu lv" aria-label="responses" href="https://medium.com/@sean.duggan/unity-ar-interface-03bed650a355?responsesOpen=true&amp;sortBy=REVERSE_CHRON&amp;source=read_next_recirc-----13c92025570c----3---------------------63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="24" height="24" viewBox="0 0 24 24" class=""><path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z"></path></svg></a></div></div></div></div><div class="ab q adb adc"><div class=""><div><div class="bl" aria-hidden="false" aria-describedby="175" aria-labelledby="175"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F03bed650a355&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40sean.duggan%2Funity-ar-interface-03bed650a355&amp;source=-----13c92025570c----3-----------------bookmark_preview----63684326_14c1_4a8b_b9e4_7ea20b7b6c44-------" rel="noopener follow"><svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt lx" aria-label="Add to list bookmark button"><path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor"></path></svg></a></span></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div class="vh bg vi dj dk add ade adf"></div><a class="be b bf z bj ti adj adk adl lx lu adm eu ev ew adn ado adp ez adq adr ads adt adu fa fb fc bl fd fe" href="https://medium.com/?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><div class="l fe">See more recommendations</div></a></div></div></div><div class="h k j"><div class="vh bg vi vo"></div><div class="ab ca"><div class="ch bg fy fz ga gb"><div class="vp ab ku jl"><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Help</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Status</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/about?autoplay=1&amp;source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">About</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Careers</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="mailto:pressinquiries@medium.com?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Press</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Blog</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Privacy</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Terms</p></a></div><div class="vq vr l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Text to speech</p></a></div><div class="vq l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.com/business?source=post_page-----13c92025570c--------------------------------" rel="noopener follow"><p class="be b du z dt">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20240605-095455-d179338c81"</script><script>window.__GRAPHQL_URI__ = "https://bgolus.medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-13c92025570c","user-d4d33ac3d661"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"updatedPostPreviewsEnabled":false,"lohpExperimentEnabled":"control"},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"USER","id":"d4d33ac3d661","explicit":true},"viewerIsBot":false},"debug":{"requestId":"925ab61a-7911-41ff-9e01-d198df54b8c3","hybridDevServices":[],"originalSpanCarrier":{"ot-tracer-spanid":"26303f7e536b0c49","ot-tracer-traceid":"3d6fedc32e81eafb","ot-tracer-sampled":"true"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fbgolus.medium.com\u002Frendering-a-sphere-on-a-quad-13c92025570c","host":"bgolus.medium.com","hostname":"bgolus.medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20240605-095455-d179338c81","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20240605-095455-d179338c81","commit":"d179338c814b9940851822379026403d478bdb86"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"1*OMF3fSqH8t4xBJ9-6oZDZw.png","height":106,"width":545},"postLogo":{"imageId":"1*kFrc4tBFM_tCis-2Ic87WA.png","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","isLoggedIn":false,"viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"bgolus.medium.com\"})":null,"postResult({\"id\":\"13c92025570c\"})":{"__ref":"Post:13c92025570c"}},"LinkedAccounts:d4d33ac3d661":{"__typename":"LinkedAccounts","mastodon":null,"id":"d4d33ac3d661"},"UserViewerEdge:userId:d4d33ac3d661-viewerId:lo_5970fcf9a0ae":{"__typename":"UserViewerEdge","id":"userId:d4d33ac3d661-viewerId:lo_5970fcf9a0ae","isFollowing":false,"isUser":false,"isMuting":false},"NewsletterV3:2a9de43457d2":{"__typename":"NewsletterV3","id":"2a9de43457d2","type":"NEWSLETTER_TYPE_AUTHOR","slug":"d4d33ac3d661","name":"d4d33ac3d661","collection":null,"user":{"__ref":"User:d4d33ac3d661"}},"User:d4d33ac3d661":{"__typename":"User","id":"d4d33ac3d661","name":"Ben Golus","username":"bgolus","newsletterV3":{"__ref":"NewsletterV3:2a9de43457d2"},"linkedAccounts":{"__ref":"LinkedAccounts:d4d33ac3d661"},"isSuspended":false,"imageId":"1*aZ0riE9vn3VFI7v4H1V-GQ.png","mediumMemberAt":0,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":1058},"customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"bgolus.medium.com"}},"hasSubdomain":true,"bio":"Tech Artist & Graphics Programmer lately focused on Unity VR game dev. https:\u002F\u002Fko-fi.com\u002Fbgolus","isPartnerProgramEnrolled":false,"viewerEdge":{"__ref":"UserViewerEdge:userId:d4d33ac3d661-viewerId:lo_5970fcf9a0ae"},"viewerIsUser":false,"postSubscribeMembershipUpsellShownAt":0,"allowNotes":true,"membership":null,"twitterScreenName":"bgolus"},"Paragraph:3f23ec7cad6a_0":{"__typename":"Paragraph","id":"3f23ec7cad6a_0","name":"ef18","type":"H3","href":null,"layout":null,"metadata":null,"text":"Rendering a Sphere on a Quad","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_1":{"__typename":"Paragraph","id":"3f23ec7cad6a_1","name":"c45c","type":"H4","href":null,"layout":null,"metadata":null,"text":"Making the Sphere Impostor Feel More Competent","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*5VfRfBEZqnNdt1F7o0yPBA.png":{"__typename":"ImageMetadata","id":"1*5VfRfBEZqnNdt1F7o0yPBA.png","originalHeight":613,"originalWidth":1274,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_2":{"__typename":"Paragraph","id":"3f23ec7cad6a_2","name":"5e94","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*5VfRfBEZqnNdt1F7o0yPBA.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_3":{"__typename":"Paragraph","id":"3f23ec7cad6a_3","name":"9136","type":"P","href":null,"layout":null,"metadata":null,"text":"GPU raytracing is all the rage these days, so lets talk about about it! Today we’re going to raytrace a single sphere.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":104,"end":111,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_4":{"__typename":"Paragraph","id":"3f23ec7cad6a_4","name":"fb97","type":"P","href":null,"layout":null,"metadata":null,"text":"Using a fragment shader.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_5":{"__typename":"Paragraph","id":"3f23ec7cad6a_5","name":"31d5","type":"P","href":null,"layout":null,"metadata":null,"text":"Yeah, I know. Not super fancy. You can do a search on Shadertoy and get hundreds of examples. There are even several great tutorials out there already for doing sphere impostors, which is what this is. So why would I write another article on it? It’s not even the right kind of GPU raytracing!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":44,"end":92,"href":"https:\u002F\u002Fwww.shadertoy.com\u002Fresults?query=sphere","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":161,"end":177,"href":"https:\u002F\u002Fparoj.github.io\u002Fgltut\u002FIllumination\u002FTutorial%2013.html","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":264,"end":274,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_6":{"__typename":"Paragraph","id":"3f23ec7cad6a_6","name":"0f3f","type":"P","href":null,"layout":null,"metadata":null,"text":"Well, because the raytracing part isn’t really the part I’m going to focus on. This article is more about how to inject opaque ray traced or ray marched objects into a rasterized scene in Unity. But also goes into some additional tricks for dealing with rendering a sphere impostor that aren’t always immediately obvious or covered by the other tutorials I’ve seen. By the end of this we’ll have a sphere impostor on a tight quad that supports multiple lights, shadow casting, shadow receiving, and orthographic cameras for the built in forward renderer that almost perfectly mimics a high poly mesh. With no extra c# script.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_7":{"__typename":"Paragraph","id":"3f23ec7cad6a_7","name":"82bd","type":"H3","href":null,"layout":null,"metadata":null,"text":"Table of Contents","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_8":{"__typename":"Paragraph","id":"3f23ec7cad6a_8","name":"ae77","type":"OLI","href":null,"layout":null,"metadata":null,"text":"My First Sphere Impostor\nDepth Finder","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":24,"href":"#aa33","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":25,"end":37,"href":"#c582","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_9":{"__typename":"Paragraph","id":"3f23ec7cad6a_9","name":"9ede","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Texturing a Sphere\n Equirectangular UVs\n Unseamly\n Crunchy Edges (aka Derivatives Strike Again)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":18,"href":"#33ec","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":20,"end":39,"href":"#6622","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":41,"end":49,"href":"#8789","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":51,"end":95,"href":"#5cbf","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":18,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_10":{"__typename":"Paragraph","id":"3f23ec7cad6a_10","name":"dd0d","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Object Scale & Rotation","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":23,"href":"#bac5","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_11":{"__typename":"Paragraph","id":"3f23ec7cad6a_11","name":"0c51","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Using a Quad\nBillboard Shader\nView Facing Billboard\nCamera Facing Billboard\nPerfect Perspective Billboard Scaling\nAccounting for Object Scale\nEllipsoid Bounds?\nFrustum Culling","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":12,"href":"#750d","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":13,"end":29,"href":"#407a","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":30,"end":51,"href":"#8fc9","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":52,"end":75,"href":"#6316","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":76,"end":113,"href":"#0172","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":114,"end":141,"href":"#497b","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":142,"end":159,"href":"#8016","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":160,"end":175,"href":"#b4c9","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_12":{"__typename":"Paragraph","id":"3f23ec7cad6a_12","name":"bb6a","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Shadow Casting\nOrthographic Pain\nThe Nearly View Plane\nLight Facing Billboard\nA Point of Perspective\nShadow Bias","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":14,"href":"#0552","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":15,"end":32,"href":"#ff6c","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":33,"end":54,"href":"#9a04","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":55,"end":77,"href":"#a51c","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":78,"end":100,"href":"#f867","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":101,"end":112,"href":"#1820","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":14,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_13":{"__typename":"Paragraph","id":"3f23ec7cad6a_13","name":"488b","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Shadow Receiving\nLighting it Up\nMultiple Lights","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":16,"href":"#58bc","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":17,"end":31,"href":"#38ad","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":32,"end":47,"href":"#4ed6","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_14":{"__typename":"Paragraph","id":"3f23ec7cad6a_14","name":"833c","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Fragmented Depth\nConservative Depth Output","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":16,"href":"#bb36","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":17,"end":42,"href":"#9800","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_15":{"__typename":"Paragraph","id":"3f23ec7cad6a_15","name":"42f5","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Finishing Touches\n“Per Vertex” Non-Important Lights\nFog\nInstancing","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":17,"href":"#2be8","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":18,"end":51,"href":"#6699","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":52,"end":55,"href":"#95f9","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":56,"end":66,"href":"#44aa","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":17,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_16":{"__typename":"Paragraph","id":"3f23ec7cad6a_16","name":"7c20","type":"OLI","href":null,"layout":null,"metadata":null,"text":"The Finished Shader","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":19,"href":"#5e7b","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_17":{"__typename":"Paragraph","id":"3f23ec7cad6a_17","name":"8e88","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Additional Thoughts\nSurface Shaders & Shader Graph\nAnti-Aliasing\nDeferred Rendering","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":19,"href":"#d738","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":20,"end":50,"href":"#3835","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":51,"end":64,"href":"#5378","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":65,"end":83,"href":"#873e","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_18":{"__typename":"Paragraph","id":"3f23ec7cad6a_18","name":"aa33","type":"H3","href":null,"layout":null,"metadata":null,"text":"My First Sphere Impostor","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_19":{"__typename":"Paragraph","id":"3f23ec7cad6a_19","name":"fcd6","type":"P","href":null,"layout":null,"metadata":null,"text":"As mentioned in the intro, this is a well trodden area. The accurate and efficient math for drawing a sphere is already known. So I’m just going to steal the applicable function from Inigo Quilez to make a basic raytraced sphere shader that we can slap on a cube mesh.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_20":{"__typename":"Paragraph","id":"3f23ec7cad6a_20","name":"212f","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Inigo Quilez :: fractals, computer graphics, mathematics, shaders, demoscene and more\nTutorials and articles of Inigo Quilez on computer graphics, fractals, demoscene, shaders and more.www.iquilezles.org","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":203,"href":"https:\u002F\u002Fwww.iquilezles.org\u002Fwww\u002Farticles\u002Fintersectors\u002Fintersectors.htm","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":85,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":86,"end":185,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fwww.iquilezles.org\u002Fwww\u002Farticles\u002Fintersectors\u002Fintersectors.htm","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*Idz4mxvO6WeQZvu2"}},"Paragraph:3f23ec7cad6a_21":{"__typename":"Paragraph","id":"3f23ec7cad6a_21","name":"7c16","type":"P","href":null,"layout":null,"metadata":null,"text":"Inigo’s examples are all written in GLSL. So we have to modify that code slightly to work with HLSL. Luckily for this function that really just means a find and replace of vec with float.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":172,"end":175,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":181,"end":186,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_22":{"__typename":"Paragraph","id":"3f23ec7cad6a_22","name":"6755","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float sphIntersect( float3 ro, float3 rd, float4 sph )\n{\n    float3 oc = ro - sph.xyz;\n    float b = dot( oc, rd );\n    float c = dot( oc, oc ) - sph.w*sph.w;\n    float h = b*b - c;\n    if( h\u003C0.0 ) return -1.0;\n    h = sqrt( h );\n    return -b - h;\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_23":{"__typename":"Paragraph","id":"3f23ec7cad6a_23","name":"aa40","type":"P","href":null,"layout":null,"metadata":null,"text":"That function takes 3 arguments, the ro (ray origin), rd (normalized ray direction), and sph (sphere position xyz and radius w). It returns the length of the ray from the origin to the sphere surface, or a -1.0 in the case of a miss. Nice and straight forward. So all we need is those three vectors and we’ve got a nice sphere.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":37,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":54,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":89,"end":92,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":206,"end":210,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_24":{"__typename":"Paragraph","id":"3f23ec7cad6a_24","name":"fb36","type":"P","href":null,"layout":null,"metadata":null,"text":"The ray origin is perhaps the easiest point to get. For a Unity shader, that’s going to be the camera position. Conveniently pass to every shader in the global shader uniform _WorldSpaceCameraPos. For an orthographic camera it’s a little more complex, but luckily we don’t need to worry about that.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":175,"end":195,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_25":{"__typename":"Paragraph","id":"3f23ec7cad6a_25","name":"a09e","type":"P","href":null,"layout":null,"metadata":null,"text":"*ominous foreshadowing*","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":0,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_26":{"__typename":"Paragraph","id":"3f23ec7cad6a_26","name":"7600","type":"P","href":null,"layout":null,"metadata":null,"text":"For the sphere position we can use the world space position of the object we’re applying the shader to. That can be easily extracted from the object’s transform matrix with unity_ObjectToWorld._m03_m13_m23. The radius we can set as some arbitrary value. Lets go with 0.5 for no particular reason.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":173,"end":205,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":267,"end":270,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_27":{"__typename":"Paragraph","id":"3f23ec7cad6a_27","name":"511b","type":"P","href":null,"layout":null,"metadata":null,"text":"Lastly is the ray direction. This is just the direction from the camera to the world position of our surrogate mesh. That’s easy enough to get by calculating it in the vertex shader and passing along the vector to the fragment.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_28":{"__typename":"Paragraph","id":"3f23ec7cad6a_28","name":"cf58","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float3 worldPos = mul(unity_ObjectToWorld, v.vertex);\nfloat3 rayDir = _WorldSpaceCameraPos.xyz - worldPos;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_29":{"__typename":"Paragraph","id":"3f23ec7cad6a_29","name":"ab2a","type":"P","href":null,"layout":null,"metadata":null,"text":"Note, it is important to not normalize this in the vertex shader. You will need to do that in the fragment shader as otherwise the interpolated values won’t work out. The value we’re interpolating is the surface position, not actually the ray direction.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_30":{"__typename":"Paragraph","id":"3f23ec7cad6a_30","name":"d1b6","type":"P","href":null,"layout":null,"metadata":null,"text":"But after all that we’ve got the three values we need to raytrace a sphere.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_31":{"__typename":"Paragraph","id":"3f23ec7cad6a_31","name":"2faa","type":"P","href":null,"layout":null,"metadata":null,"text":"Now I said the above function returns the ray length. So to get the actual world space position of the sphere’s surface, you multiply the normalized ray by the ray length and add the ray origin. You can even get the world normal by subtracting the sphere’s position from the surface’s position and normalizing. And we pass the ray length to the clip() function to hide anything outside the sphere as that function returns -1.0 in the case of a miss.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":345,"end":351,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":422,"end":426,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_32":{"__typename":"Paragraph","id":"3f23ec7cad6a_32","name":"c582","type":"H4","href":null,"layout":null,"metadata":null,"text":"Depth Finder","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_33":{"__typename":"Paragraph","id":"3f23ec7cad6a_33","name":"6085","type":"P","href":null,"layout":null,"metadata":null,"text":"The last little bit for an effective sphere impostor is the z depth. If we want our sphere to intersect with the world properly, we need to output the sphere’s depth from the fragment shader. Otherwise we’re stuck using the depth of the mesh we’re using to render. This is actually way easier than it sounds. Since we’re already calculating the world position in the fragment shader, we can apply the same view and projection matrices that we use in the vertex shader to get the z depth. Unity even includes a handy UnityWorldToClipPos() function to make it even easier. Then it’s a matter of having an output argument that uses SV_Depthwith the clip space position’s z divided by its w.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":516,"end":537,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":629,"end":637,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_34":{"__typename":"Paragraph","id":"3f23ec7cad6a_34","name":"1fe9","type":"P","href":null,"layout":null,"metadata":null,"text":"Put that all together with some basic lighting and you get something like this:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*rMDjkdv9rJxaGHqE9YD_Vg.png":{"__typename":"ImageMetadata","id":"1*rMDjkdv9rJxaGHqE9YD_Vg.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_35":{"__typename":"Paragraph","id":"3f23ec7cad6a_35","name":"332f","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*rMDjkdv9rJxaGHqE9YD_Vg.png"},"text":"It looks like a sphere, but it’s actually a cube.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*B2WPIP8XQvyjd0fJHkPmTQ.png":{"__typename":"ImageMetadata","id":"1*B2WPIP8XQvyjd0fJHkPmTQ.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_36":{"__typename":"Paragraph","id":"3f23ec7cad6a_36","name":"0f0d","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*B2WPIP8XQvyjd0fJHkPmTQ.png"},"text":"A very round cube. Make all the boy cubes go *whaaah!*.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:0442f572ddfbe1d7b739e186d3c45a6d":{"__typename":"MediaResource","id":"0442f572ddfbe1d7b739e186d3c45a6d","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"SimpleRaytracedSphere.shader"},"Paragraph:3f23ec7cad6a_37":{"__typename":"Paragraph","id":"3f23ec7cad6a_37","name":"2392","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:0442f572ddfbe1d7b739e186d3c45a6d"}},"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_38":{"__typename":"Paragraph","id":"3f23ec7cad6a_38","name":"33ec","type":"H3","href":null,"layout":null,"metadata":null,"text":"Texturing a Sphere","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_39":{"__typename":"Paragraph","id":"3f23ec7cad6a_39","name":"6da6","type":"P","href":null,"layout":null,"metadata":null,"text":"Well, that’s not too exciting. We should put a texture on it. For that we need UVs, and luckily those are pretty easy for a sphere.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_40":{"__typename":"Paragraph","id":"3f23ec7cad6a_40","name":"6622","type":"H4","href":null,"layout":null,"metadata":null,"text":"Equirectangular UVs","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_41":{"__typename":"Paragraph","id":"3f23ec7cad6a_41","name":"15d3","type":"P","href":null,"layout":null,"metadata":null,"text":"Lets slap an equirectangular texture on this thing. For that we just need to feed the normal direction into an atan2() and an acos() and we get something like this:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":111,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":126,"end":132,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_42":{"__typename":"Paragraph","id":"3f23ec7cad6a_42","name":"d200","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float2 uv = float2(\n  \u002F\u002F atan returns a value between -pi and pi\n  \u002F\u002F so we divide by pi * 2 to get -0.5 to 0.5\n  atan2(normal.z, normal.x) \u002F (UNITY_PI * 2.0),\n  \u002F\u002F acos returns 0.0 at the top, pi at the bottom\n  \u002F\u002F so we flip the y to align with Unity's OpenGL style\n  \u002F\u002F texture UVs so 0.0 is at the bottom\n  acos(-normal.y) \u002F UNITY_PI\n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_43":{"__typename":"Paragraph","id":"3f23ec7cad6a_43","name":"d663","type":"PRE","href":null,"layout":null,"metadata":null,"text":"fixed4 col = tex2D(_MainTex, uv);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*VK9522EV2aIfcD5mkb8nvw.png":{"__typename":"ImageMetadata","id":"1*VK9522EV2aIfcD5mkb8nvw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_44":{"__typename":"Paragraph","id":"3f23ec7cad6a_44","name":"5848","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*VK9522EV2aIfcD5mkb8nvw.png"},"text":"Earth the final frontier.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_45":{"__typename":"Paragraph","id":"3f23ec7cad6a_45","name":"0423","type":"P","href":null,"layout":null,"metadata":null,"text":"And look at that we’ve got a perfectly … wait. What’s this!?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*rJXgyzMtBzuOgvxjTRRHyA.png":{"__typename":"ImageMetadata","id":"1*rJXgyzMtBzuOgvxjTRRHyA.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_46":{"__typename":"Paragraph","id":"3f23ec7cad6a_46","name":"282b","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*rJXgyzMtBzuOgvxjTRRHyA.png"},"text":"Is that the Greenwich Mean Line?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_47":{"__typename":"Paragraph","id":"3f23ec7cad6a_47","name":"faa3","type":"P","href":null,"layout":null,"metadata":null,"text":"That’s a UV seam! How do we have a UV seam? Well, that comes down to how GPUs calculate mip level for mip maps.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_48":{"__typename":"Paragraph","id":"3f23ec7cad6a_48","name":"8789","type":"H4","href":null,"layout":null,"metadata":null,"text":"Unseamly","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_49":{"__typename":"Paragraph","id":"3f23ec7cad6a_49","name":"a47a","type":"P","href":null,"layout":null,"metadata":null,"text":"GPUs calculate the mip level by what are known as screen space partial derivatives. Roughly speaking, this is the amount a value changes from one pixel to the one next to it, either above or below. GPUs can calculate this value for each set of 2x2 pixels, so the mip level is determine by how much the UVs change with each of these 2x2 “pixel quads”. And when we’re calculating the UVs here, the atan2() suddenly jumps from roughly 0.5 to roughly -0.5 between two pixels. That makes the GPU think the entire texture is being displayed between those two pixel. And thus it uses the absolutely smallest mip map it has in response.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":396,"end":403,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":432,"end":435,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":447,"end":451,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_50":{"__typename":"Paragraph","id":"3f23ec7cad6a_50","name":"e2e1","type":"P","href":null,"layout":null,"metadata":null,"text":"So how do we work around this? Why by disabling the mip maps of course!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_51":{"__typename":"Paragraph","id":"3f23ec7cad6a_51","name":"1116","type":"P","href":null,"layout":null,"metadata":null,"text":"No no no! We absolutely do not do that. But that’s the usual solution you’ll find to most mip map related issues. (As you may have seen me complain about elsewhere.) Instead a solution was nicely presented by Marco Tarini.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":154,"end":163,"href":"https:\u002F\u002Fbgolus.medium.com\u002Fsharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":9,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":10,"end":39,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":9,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":27,"end":30,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_52":{"__typename":"Paragraph","id":"3f23ec7cad6a_52","name":"b23e","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Seamless cylindrical and toroidal UV-mapping - homepages\nCylindrical and toroidalparameterizationswithout vertex seams -- homepages Welcome! This is the project page for the…vcg.isti.cnr.it","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":189,"href":"http:\u002F\u002Fvcg.isti.cnr.it\u002F~tarini\u002Fno-seams\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":57,"end":174,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"http:\u002F\u002Fvcg.isti.cnr.it\u002F~tarini\u002Fno-seams\u002F","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*QjgsXLFVWkJjuTyf"}},"Paragraph:3f23ec7cad6a_53":{"__typename":"Paragraph","id":"3f23ec7cad6a_53","name":"6369","type":"P","href":null,"layout":null,"metadata":null,"text":"The idea is to use two UV sets with the seams in different places. And for our specific case, the longitudinal UVs calculated by the atan2() are already a -0.5 to 0.5 range, so all we need is a frac() to get them into a 0.0 to 1.0 range. Then use those same partial derivatives to pick the UV set with the least change. The magical function fwidth() gives us how much the value is changing in any screen space direction.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":133,"end":140,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":155,"end":159,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":163,"end":166,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":194,"end":200,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":220,"end":223,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":227,"end":230,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":341,"end":349,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_54":{"__typename":"Paragraph","id":"3f23ec7cad6a_54","name":"e3ad","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F -0.5 to 0.5 range\nfloat phi = atan2(worldNormal.z, worldNormal.x) \u002F (UNITY_PI * 2.0);\n\u002F\u002F 0.0 to 1.0 range\nfloat phi_frac = frac(phi);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_55":{"__typename":"Paragraph","id":"3f23ec7cad6a_55","name":"b3ec","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float2 uv = float2(\n  \u002F\u002F uses a small bias to prefer the first 'UV set'\n  fwidth(phi) \u003C fwidth(phi_frac) - 0.001 ? phi : phi_frac,\n  acos(-worldNormal.y) \u002F UNITY_PI\n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_56":{"__typename":"Paragraph","id":"3f23ec7cad6a_56","name":"9b32","type":"P","href":null,"layout":null,"metadata":null,"text":"And now we have no more seam!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*XqcYESDNKHIvTV7qq3eklA.png":{"__typename":"ImageMetadata","id":"1*XqcYESDNKHIvTV7qq3eklA.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_57":{"__typename":"Paragraph","id":"3f23ec7cad6a_57","name":"fbcb","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*XqcYESDNKHIvTV7qq3eklA.png"},"text":"I promise it’s not hiding on the other side.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_58":{"__typename":"Paragraph","id":"3f23ec7cad6a_58","name":"2a8d","type":"P","href":null,"layout":null,"metadata":null,"text":"* edit: It’s come to my attention that this technique may only work properly when using Direct3D, integrated Intel GPUs, or (some?) Android OpenGLES devices. The fwidth() function when using OpenGL on desktop may run using higher accuracy derivatives than used by the GPU to determine mip levels meaning the seam will still be visible. Metal is guaranteed to always run at a higher accuracy. Vulkan can be forced to run at the lower accuracy by using coarse derivative functions, but as of writing this Unity doesn’t seems to properly transpile coarse or fine derivatives. I wrote a follow up with some alternate solutions here:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":162,"end":170,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":628,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_59":{"__typename":"Paragraph","id":"3f23ec7cad6a_59","name":"dba8","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Distinctive Derivative Differences\nPesky Problems with Procedural UVsbgolus.medium.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":86,"href":"https:\u002F\u002Fbgolus.medium.com\u002Fdistinctive-derivative-differences-cce38d36797b","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":35,"end":69,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fbgolus.medium.com\u002Fdistinctive-derivative-differences-cce38d36797b","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*rqVk4RKYCy5-RGKs.png"}},"Paragraph:3f23ec7cad6a_60":{"__typename":"Paragraph","id":"3f23ec7cad6a_60","name":"f69a","type":"P","href":null,"layout":null,"metadata":null,"text":"Alternative you could just use a cube map instead. Unity can convert an imported equirectangular texture into a cube map for you. But that means you loose out on anisotropic filtering. The UVW for a cube map texture sample is essentially just the sphere’s normal. You do need to flip at least the x or z axis though, because cube maps are assumed to be viewed from the “inside” of a sphere and here we want it to map to the outside.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_61":{"__typename":"Paragraph","id":"3f23ec7cad6a_61","name":"5cbf","type":"H4","href":null,"layout":null,"metadata":null,"text":"Crunchy Edges (aka Derivatives Strike Again)","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_62":{"__typename":"Paragraph","id":"3f23ec7cad6a_62","name":"803b","type":"P","href":null,"layout":null,"metadata":null,"text":"At this point if we compare the raytraced sphere shader we have with an actual high poly mesh sphere using the same equirectangular UVs, you may notice something else odd. It looks like there’s an outline around the raytraced sphere that the mesh does not have. A really aliased outline.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*xO58uqY1S1Wesbn3mmVxoQ.png":{"__typename":"ImageMetadata","id":"1*xO58uqY1S1Wesbn3mmVxoQ.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_63":{"__typename":"Paragraph","id":"3f23ec7cad6a_63","name":"19e4","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*xO58uqY1S1Wesbn3mmVxoQ.png"},"text":"Crunchy “outline” on the impostor.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_64":{"__typename":"Paragraph","id":"3f23ec7cad6a_64","name":"a005","type":"P","href":null,"layout":null,"metadata":null,"text":"The cause is our pesky derivatives again. There’s one more UV seam we missed! On a mesh, derivatives are calculated per pixel quad, per triangle. In fact, if a triangle only touches a single pixel of one of those 2x2 pixel quads, the GPU still runs the fragment shader for all 4 pixels! The advantage of this is it can accurately calculate plausible derivatives which prevents this problem on a real mesh. But we don’t have a good UV outside of the sphere, the function just returns a constant -1.0 on a miss, so we have bogus UVs outside of the sphere. We can see this clearly if you comment out the clip() and outDepth lines in the shader.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":494,"end":498,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":601,"end":607,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":612,"end":620,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*BOYv2VKjV1SXywxbhyFEow.png":{"__typename":"ImageMetadata","id":"1*BOYv2VKjV1SXywxbhyFEow.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_65":{"__typename":"Paragraph","id":"3f23ec7cad6a_65","name":"cbec","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*BOYv2VKjV1SXywxbhyFEow.png"},"text":"The Hidden UV Seam","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_66":{"__typename":"Paragraph","id":"3f23ec7cad6a_66","name":"6bd3","type":"P","href":null,"layout":null,"metadata":null,"text":"What we want is for the UVs to be something close to the value at the visible edge of the sphere, or maybe just past the edge. That’s surprisingly complicated to calculate. But we can get something reasonably close by finding the closest point on a ray to the sphere center. At the exact sphere edge, this is 100% accurate, but it starts to curve towards the camera slightly as you get further away from the sphere. But this is cheap and good enough to get rid of the problem and is nearly indistinguishable from a fully correct fix.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*FgGjm-MZ0kCmCQ-LSm_V3g.png":{"__typename":"ImageMetadata","id":"1*FgGjm-MZ0kCmCQ-LSm_V3g.png","originalHeight":512,"originalWidth":856,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_67":{"__typename":"Paragraph","id":"3f23ec7cad6a_67","name":"0275","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*FgGjm-MZ0kCmCQ-LSm_V3g.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_68":{"__typename":"Paragraph","id":"3f23ec7cad6a_68","name":"1928","type":"P","href":null,"layout":null,"metadata":null,"text":"Even better, we can apply this fix by replacing the ray length with a single dot() when the sphere intersection function returns a -1.0. A super power of the dot product of two vectors is, if at least one vector is normalized, the output is the magnitude other vector is along the direction of the normalized vector. This is great for getting how far away something is in a certain direction, like how far the camera is from the sphere’s pivot along the view ray.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":77,"end":82,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":131,"end":135,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_69":{"__typename":"Paragraph","id":"3f23ec7cad6a_69","name":"df03","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F same sphere intersection function\nfloat rayHit = sphIntersect(rayOrigin, rayDir, float4(0,0,0,0.5));\n\u002F\u002F clip if -1.0 to hide sphere on miss\nclip(rayHit);\n\u002F\u002F dot product gets ray length at position closest to sphere\nrayHit = rayHit \u003C 0.0 ? dot(rayDir, spherePos - rayOrigin) : rayHit;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*n71BMtBHmjsKY6kHoXZ2kg.png":{"__typename":"ImageMetadata","id":"1*n71BMtBHmjsKY6kHoXZ2kg.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_70":{"__typename":"Paragraph","id":"3f23ec7cad6a_70","name":"5cbc","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*n71BMtBHmjsKY6kHoXZ2kg.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*XotRnC1JfA6Bx1SA827fBw.png":{"__typename":"ImageMetadata","id":"1*XotRnC1JfA6Bx1SA827fBw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_71":{"__typename":"Paragraph","id":"3f23ec7cad6a_71","name":"5340","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*XotRnC1JfA6Bx1SA827fBw.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*dRFv-XPObw_8zE3PNQ_sAw.png":{"__typename":"ImageMetadata","id":"1*dRFv-XPObw_8zE3PNQ_sAw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_72":{"__typename":"Paragraph","id":"3f23ec7cad6a_72","name":"8ced","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*dRFv-XPObw_8zE3PNQ_sAw.png"},"text":"No longer seamful.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_73":{"__typename":"Paragraph","id":"3f23ec7cad6a_73","name":"bac5","type":"H3","href":null,"layout":null,"metadata":null,"text":"Object Scale & Rotation","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_74":{"__typename":"Paragraph","id":"3f23ec7cad6a_74","name":"d86f","type":"P","href":null,"layout":null,"metadata":null,"text":"So that’s all going well, but what if we want to to make a bigger sphere or rotate it? We can move the mesh position around and the sphere tracks with it, but everything else is ignored.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_75":{"__typename":"Paragraph","id":"3f23ec7cad6a_75","name":"6a4c","type":"P","href":null,"layout":null,"metadata":null,"text":"We could change the sphere radius manually, but then you’d have to manually keep the mesh you’re using in sync. So it’d be easier to extract the scale from the object transform itself. And we could apply an arbitrary rotation matrix, but again it’d be way easier if we could just use the object transform.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_76":{"__typename":"Paragraph","id":"3f23ec7cad6a_76","name":"e793","type":"P","href":null,"layout":null,"metadata":null,"text":"Or we could do something even easier and do the raytracing in object space! This comes with a few other benefits we’ll get into. But before that we want to add a few lines to our shader code. First we want to use the unity_WorldToObject matrix to transform the ray origin and ray direction into object space in the vertex shader. In the fragment shader, we no longer need to get the world space object position from the transform since the sphere can now just be at the object’s origin.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":217,"end":236,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_77":{"__typename":"Paragraph","id":"3f23ec7cad6a_77","name":"2db2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F vertex shader\nfloat3 worldSpaceRayDir = worldPos - _WorldSpaceCameraPos.xyz;\n\u002F\u002F only want to rotate and scale the dir vector, so w = 0\no.rayDir = mul(unity_WorldToObject, float4(worldSpaceRayDir, 0.0));\n\u002F\u002F need to apply full transform to the origin vector\no.rayOrigin = mul(unity_WorldToObject, float4(_WorldSpaceCameraPos.xyz, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_78":{"__typename":"Paragraph","id":"3f23ec7cad6a_78","name":"dc46","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F fragment shader\nfloat3 spherePos = float3(0,0,0);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_79":{"__typename":"Paragraph","id":"3f23ec7cad6a_79","name":"1160","type":"P","href":null,"layout":null,"metadata":null,"text":"With this change alone, you can now rotate and scale the game object and the sphere scales and rotates as you would expect. It even supports non-uniform scaling! Just remember that all of those “world space” positions in the shader are now in object space. So we need to transform the normal and sphere surface position to world space. Just be sure to use the object space normal for the UVs.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_80":{"__typename":"Paragraph","id":"3f23ec7cad6a_80","name":"7fc5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F now gets an object space surface position instead of world space\nfloat3 objectSpacePos = rayDir * rayHit + rayOrigin;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_81":{"__typename":"Paragraph","id":"3f23ec7cad6a_81","name":"de8d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F still need to normalize this in object space for the UVs\nfloat3 objectSpaceNormal = normalize(objectSpacePos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_82":{"__typename":"Paragraph","id":"3f23ec7cad6a_82","name":"9215","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float3 worldNormal = UnityObjectToWorldNormal(objectSpaceNormal);\nfloat3 worldPos = mul(unity_ObjectToWorld, float4(objectSpacePos, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*V5QJcdMeYEhLOR5AIbNnMQ.png":{"__typename":"ImageMetadata","id":"1*V5QJcdMeYEhLOR5AIbNnMQ.png","originalHeight":412,"originalWidth":647,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_83":{"__typename":"Paragraph","id":"3f23ec7cad6a_83","name":"c3c2","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*V5QJcdMeYEhLOR5AIbNnMQ.png"},"text":"Big, little, and terrible sandwich Earths.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_84":{"__typename":"Paragraph","id":"3f23ec7cad6a_84","name":"0dc8","type":"P","href":null,"layout":null,"metadata":null,"text":"Other advantages are better overall precision, as using world space for everything can cause some precision issues when getting far away from the origin. Those are at least partially avoided when using object space. It also means we can remove the usage of spherePos in several places since it’s all zeros, simplifying the code a bit.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":257,"end":266,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_85":{"__typename":"Paragraph","id":"3f23ec7cad6a_85","name":"750d","type":"H3","href":null,"layout":null,"metadata":null,"text":"Using a Quad","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_86":{"__typename":"Paragraph","id":"3f23ec7cad6a_86","name":"fbb0","type":"P","href":null,"layout":null,"metadata":null,"text":"So far we’ve been using a cube mesh for all of this. There are some minor benefits to using a cube for some use cases, but I promised a quad in the title of this article. Also because really there’s no good reason to use an entire cube for a sphere. There’s a lot of wasted space around the sides where we’re paying the cost of rendering the sphere where we know it’s not going to be. Especially the default Unity cube which has 24 vertices! Why also waste calculating the extra 20 vertices?","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":59,"end":63,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":385,"end":395,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_87":{"__typename":"Paragraph","id":"3f23ec7cad6a_87","name":"407a","type":"H4","href":null,"layout":null,"metadata":null,"text":"Billboard Shader","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_88":{"__typename":"Paragraph","id":"3f23ec7cad6a_88","name":"44a8","type":"P","href":null,"layout":null,"metadata":null,"text":"There are several examples of billboard shaders out there. The basic idea for all of them is you ignore the rotation (and scale!) of the object’s transform and instead align the mesh to face the camera in some way.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_89":{"__typename":"Paragraph","id":"3f23ec7cad6a_89","name":"8fc9","type":"H4","href":null,"layout":null,"metadata":null,"text":"View Facing Billboard","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_90":{"__typename":"Paragraph","id":"3f23ec7cad6a_90","name":"01c1","type":"P","href":null,"layout":null,"metadata":null,"text":"Probably the most common version of this is a view facing billboard. This is done by transforming the pivot position into view space and adding the vertex offsets to the view space position. This is relatively cheap to do. Just remember to update the ray direction to match.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_91":{"__typename":"Paragraph","id":"3f23ec7cad6a_91","name":"43a5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F get object's world space pivot from the transform matrix\nfloat3 worldSpacePivot = unity_ObjectToWorld._m03_m13_m23;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_92":{"__typename":"Paragraph","id":"3f23ec7cad6a_92","name":"f5fb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F transform into view space\nfloat3 viewSpacePivot = mul(UNITY_MATRIX_V, float4(worldSpacePivot, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_93":{"__typename":"Paragraph","id":"3f23ec7cad6a_93","name":"1879","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F object space vertex position + view pivot = billboarded quad\nfloat3 viewSpacePos = v.vertex.xyz + viewSpacePivot;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_94":{"__typename":"Paragraph","id":"3f23ec7cad6a_94","name":"5b55","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F calculate the object space ray dir from the view space position\no.rayDir = mul(unity_WorldToObject,\n  mul(UNITY_MATRIX_I_V, float4(viewSpacePos, 0.0))\n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_95":{"__typename":"Paragraph","id":"3f23ec7cad6a_95","name":"8e38","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F apply projection matrix to get clip space position\no.pos = mul(UNITY_MATRIX_P, float4(viewSpacePos, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_96":{"__typename":"Paragraph","id":"3f23ec7cad6a_96","name":"3db3","type":"P","href":null,"layout":null,"metadata":null,"text":"However, if we just add the above code to our shader, there’s something not quite right with the sphere. It’s getting clipped on the edges, especially when the sphere is to the side or close to the camera.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*4LyY8MmH2IjEM17NGlk8ig.png":{"__typename":"ImageMetadata","id":"1*4LyY8MmH2IjEM17NGlk8ig.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_97":{"__typename":"Paragraph","id":"3f23ec7cad6a_97","name":"feee","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*4LyY8MmH2IjEM17NGlk8ig.png"},"text":"Thinking too far outside the box.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_98":{"__typename":"Paragraph","id":"3f23ec7cad6a_98","name":"73c9","type":"P","href":null,"layout":null,"metadata":null,"text":"This is because the quad is a flat plane, and the sphere is not. A sphere has some depth. Due to perspective the volume of the sphere will cover more of the screen than the quad does!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*zDUW0Mqj3iT4OUn2WNTK6A.png":{"__typename":"ImageMetadata","id":"1*zDUW0Mqj3iT4OUn2WNTK6A.png","originalHeight":778,"originalWidth":1000,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_99":{"__typename":"Paragraph","id":"3f23ec7cad6a_99","name":"fa82","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*zDUW0Mqj3iT4OUn2WNTK6A.png"},"text":"Artist’s Recreation of the Crime Scene","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_100":{"__typename":"Paragraph","id":"3f23ec7cad6a_100","name":"13eb","type":"P","href":null,"layout":null,"metadata":null,"text":"A solution to this you might use is to scale the billboard up by some arbitrary amount. But this doesn’t fully solve the problem as you have to scale the quad up quite a bit. Especially if you can get close to the sphere or have a very wide FOV. And this partially defeats the purpose of using a quad over a cube to begin with. Indeed more pixels are now rendering empty space than before with even relatively small scale increases compared to the cube.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":335,"end":340,"href":"","anchorType":"LINK","userId":"","linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*A0CfCiV04GKZoQXTB1WhPQ.png":{"__typename":"ImageMetadata","id":"1*A0CfCiV04GKZoQXTB1WhPQ.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_101":{"__typename":"Paragraph","id":"3f23ec7cad6a_101","name":"4588","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*A0CfCiV04GKZoQXTB1WhPQ.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_102":{"__typename":"Paragraph","id":"3f23ec7cad6a_102","name":"6316","type":"H4","href":null,"layout":null,"metadata":null,"text":"Camera Facing Billboard","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_103":{"__typename":"Paragraph","id":"3f23ec7cad6a_103","name":"b1d8","type":"P","href":null,"layout":null,"metadata":null,"text":"Luckily, we can do a lot better. A partial fix is to use a camera facing billboard instead of a view facing billboard and pull the quad towards the camera slightly. The difference between view facing and camera facing billboards is a view facing billboard is aligned with the direction the view is facing. A camera facing billboard is facing the camera’s position. The difference can be subtle, and the code is a bit more complex.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_104":{"__typename":"Paragraph","id":"3f23ec7cad6a_104","name":"becc","type":"P","href":null,"layout":null,"metadata":null,"text":"Instead of doing things in view space, we instead need to construct a rotation matrix that rotates a quad towards the camera. This sounds scarier than it is. You just need to get the vector that points from the object position to the camera, the forward vector, and use cross products to get the up and right vectors. Put those three vectors together and you have yourself a rotation matrix.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_105":{"__typename":"Paragraph","id":"3f23ec7cad6a_105","name":"39a1","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float3 worldSpacePivot = unity_ObjectToWorld._m03_m13_m23;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_106":{"__typename":"Paragraph","id":"3f23ec7cad6a_106","name":"015d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F offset between pivot and camera\nfloat3 worldSpacePivotToCamera = _WorldSpaceCameraPos.xyz - worldSpacePivot;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_107":{"__typename":"Paragraph","id":"3f23ec7cad6a_107","name":"53c6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F camera up vector\n\u002F\u002F used as a somewhat arbitrary starting up orientation\nfloat3 up = UNITY_MATRIX_I_V._m01_m11_m2;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_108":{"__typename":"Paragraph","id":"3f23ec7cad6a_108","name":"da0b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F forward vector is the normalized offset\n\u002F\u002F this it the direction from the pivot to the camera\nfloat3 forward = normalize(worldSpacePivotToCamera);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_109":{"__typename":"Paragraph","id":"3f23ec7cad6a_109","name":"b688","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F cross product gets a vector perpendicular to the input vectors\nfloat3 right = normalize(cross(forward, up));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_110":{"__typename":"Paragraph","id":"3f23ec7cad6a_110","name":"37f2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F another cross product ensures the up is perpendicular to both\nup = cross(right, forward);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_111":{"__typename":"Paragraph","id":"3f23ec7cad6a_111","name":"3650","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F construct the rotation matrix\nfloat3x3 rotMat = float3x3(right, up, forward);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_112":{"__typename":"Paragraph","id":"3f23ec7cad6a_112","name":"4a7b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F the above rotate matrix is transposed, meaning the components are\n\u002F\u002F in the wrong order, but we can work with that by swapping the\n\u002F\u002F order of the matrix and vector in the mul()\nfloat3 worldPos = mul(v.vertex.xyz, rotMat) + worldSpacePivot;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_113":{"__typename":"Paragraph","id":"3f23ec7cad6a_113","name":"b6e1","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ray direction\nfloat3 worldRayDir = worldPos - _WorldSpaceCameraPos.xyz;\no.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_114":{"__typename":"Paragraph","id":"3f23ec7cad6a_114","name":"f9aa","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F clip space position output\no.pos = UnityWorldToClipPos(worldPos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*2wHgTB8d8i7-d30dP0uo-g.png":{"__typename":"ImageMetadata","id":"1*2wHgTB8d8i7-d30dP0uo-g.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_115":{"__typename":"Paragraph","id":"3f23ec7cad6a_115","name":"bf90","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*2wHgTB8d8i7-d30dP0uo-g.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_116":{"__typename":"Paragraph","id":"3f23ec7cad6a_116","name":"8256","type":"P","href":null,"layout":null,"metadata":null,"text":"This is better, but still not good. The sphere is still clipping the edges of the quad. Actually, all the four edges now. At least it’s centered. Well, we forgot to move the quad toward the camera! Technically we could also scale the quad by an arbitrary amount too, but lets come back to that point.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_117":{"__typename":"Paragraph","id":"3f23ec7cad6a_117","name":"a3e1","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float3 worldPos = mul(float3(v.vertex.xy, 0.3), rotMat) + worldSpacePivot;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_118":{"__typename":"Paragraph","id":"3f23ec7cad6a_118","name":"04ed","type":"P","href":null,"layout":null,"metadata":null,"text":"We’re ignoring the z of the quad and adding a small (arbitrary) offset to pull it towards the camera. The advantage of this option vs an arbitrary scaling is it should stay more closely confined to the bounds of the sphere when further away, and scale when closer just due to the perspective change, just like the sphere itself. It only starts to cover significantly more screen space than needed when really close. I chose 0.3 in the above example because it was a good balance of not covering too much of the screen when close by, while still covering all of the viewable sphere until you’re really, really close.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":424,"end":427,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*opK9W3PMgCq1IxwqVqQ-_A.png":{"__typename":"ImageMetadata","id":"1*opK9W3PMgCq1IxwqVqQ-_A.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_119":{"__typename":"Paragraph","id":"3f23ec7cad6a_119","name":"c71e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*opK9W3PMgCq1IxwqVqQ-_A.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_120":{"__typename":"Paragraph","id":"3f23ec7cad6a_120","name":"6d5e","type":"P","href":null,"layout":null,"metadata":null,"text":"You know, you could probably figure the exact value to use to pull or scale the quad for a given distance from the sphere with a bit of math …","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_121":{"__typename":"Paragraph","id":"3f23ec7cad6a_121","name":"0172","type":"H4","href":null,"layout":null,"metadata":null,"text":"Perfect Perspective Billboard Scaling","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_122":{"__typename":"Paragraph","id":"3f23ec7cad6a_122","name":"cd8c","type":"P","href":null,"layout":null,"metadata":null,"text":"Wait! We can figure out the value using a bit of math! We can get the exact size the quad needs to be at all camera distances from the sphere. Just needs some basic high school math!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":70,"end":80,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_123":{"__typename":"Paragraph","id":"3f23ec7cad6a_123","name":"2ed7","type":"P","href":null,"layout":null,"metadata":null,"text":"We can calculate the angle between the camera to pivot vector and camera to visible edge of the sphere. In fact it’s always a right triangle with the 90 degree corner at the sphere’s surface! Remember your old friend SOHCAHTOA? We know the distance from the camera to the pivot, that’s the hypotenuse. And we know the radius of the sphere. From that we can calculate the base of the right angle triangle formed from projecting that angle to the quad’s plane. With that we can scale the quad instead of modifying the v.vertex.z.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":516,"end":526,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":491,"end":498,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_124":{"__typename":"Paragraph","id":"3f23ec7cad6a_124","name":"07ba","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F get the sine of the right triangle with the hypotenuse being the \u002F\u002F sphere pivot distance and the opposite using the sphere radius\nfloat sinAngle = 0.5 \u002F length(viewOffset);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_125":{"__typename":"Paragraph","id":"3f23ec7cad6a_125","name":"bc4c","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F convert to cosine\nfloat cosAngle = sqrt(1.0 - sinAngle * sinAngle);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_126":{"__typename":"Paragraph","id":"3f23ec7cad6a_126","name":"4cd7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F convert to tangent\nfloat tanAngle = sinAngle \u002F cosAngle;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_127":{"__typename":"Paragraph","id":"3f23ec7cad6a_127","name":"0d87","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F those previous two lines are the equivalent of this, but faster\n\u002F\u002F tanAngle = tan(asin(sinAngle));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_128":{"__typename":"Paragraph","id":"3f23ec7cad6a_128","name":"892d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F get the opposite face of the right triangle with the 90 degree\n\u002F\u002F angle at the sphere pivot, multiplied by 2 to get the quad size\nfloat quadScale = tanAngle * length(viewOffset) * 2.0;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_129":{"__typename":"Paragraph","id":"3f23ec7cad6a_129","name":"c6f0","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F scale the quad by the calculated size\nfloat3 worldPos = mul(float3(v.vertex.xy, 0.0) * quadScale, rotMat) + worldSpacePivot;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*LiUmCd6Kiu-gCYcXJgvlTA.png":{"__typename":"ImageMetadata","id":"1*LiUmCd6Kiu-gCYcXJgvlTA.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_130":{"__typename":"Paragraph","id":"3f23ec7cad6a_130","name":"8064","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*LiUmCd6Kiu-gCYcXJgvlTA.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_131":{"__typename":"Paragraph","id":"3f23ec7cad6a_131","name":"497b","type":"H4","href":null,"layout":null,"metadata":null,"text":"Accounting for Object Scale","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_132":{"__typename":"Paragraph","id":"3f23ec7cad6a_132","name":"a550","type":"P","href":null,"layout":null,"metadata":null,"text":"At the beginning of this we converted everything in to using object space so we could trivially support rotation and scale. We still support rotation, since the quad’s orientation doesn’t actually matter. But the quad doesn’t scale with the object’s transform like the cube did. The easiest fix for this is to extract the scale from the axis of the transform matrix and multiply the radius we’re using by the max scale.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_133":{"__typename":"Paragraph","id":"3f23ec7cad6a_133","name":"7842","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F get the object scale\nfloat3 scale = float3(\n  length(unity_ObjectToWorld._m00_m10_m20),\n  length(unity_ObjectToWorld._m01_m11_m21),\n  length(unity_ObjectToWorld._m02_m12_m22)\n);\nfloat maxScale = max(abs(scale.x), max(abs(scale.y), abs(scale.z)));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_134":{"__typename":"Paragraph","id":"3f23ec7cad6a_134","name":"2464","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F multiply the sphere radius by the max scale\nfloat maxRadius = maxScale * 0.5;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_135":{"__typename":"Paragraph","id":"3f23ec7cad6a_135","name":"e5f3","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F update our sine calculation using the new radius\nfloat sinAngle = maxRadius \u002F length(viewOffset);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_136":{"__typename":"Paragraph","id":"3f23ec7cad6a_136","name":"4e0a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F do the rest of the scaling code","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_137":{"__typename":"Paragraph","id":"3f23ec7cad6a_137","name":"5781","type":"P","href":null,"layout":null,"metadata":null,"text":"Now you can uniformly scale the game object and the sphere will still remain perfectly bound by the quad.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_138":{"__typename":"Paragraph","id":"3f23ec7cad6a_138","name":"8016","type":"H4","href":null,"layout":null,"metadata":null,"text":"Ellipsoid Bounds?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_139":{"__typename":"Paragraph","id":"3f23ec7cad6a_139","name":"9157","type":"P","href":null,"layout":null,"metadata":null,"text":"It should also be possible to calculate the exact bounds of an ellipsoid, or non-uniformly scaled sphere. Unfortunately that’s starting to get a bit more difficult. So I’m not going to put the effort into solving that problem now. I’ll leave this as “an exercise for the reader.” (Aka, I have no idea how to do it.)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":279,"end":280,"href":"","anchorType":"LINK","userId":"","linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_140":{"__typename":"Paragraph","id":"3f23ec7cad6a_140","name":"b4c9","type":"H4","href":null,"layout":null,"metadata":null,"text":"Frustum Culling","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_141":{"__typename":"Paragraph","id":"3f23ec7cad6a_141","name":"02e1","type":"P","href":null,"layout":null,"metadata":null,"text":"One additional problem with using a quad is Unity’s frustum culling. It has no idea that the quad is being rotated in the shader, so if the game object is rotated so it’s being viewed edge on it may get frustum culled while the sphere should still be visible. The fix for this would be to use a custom quad mesh that’s had its bounds manually modified from c# code to be a box. Alternatively you can use a quad mesh with one vertex pushed forward and one back by 0.5 on the z axis. And we’re already flatten the mesh in the shader by replacing v.vertex.z with 0.0.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":544,"end":554,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":560,"end":563,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_142":{"__typename":"Paragraph","id":"3f23ec7cad6a_142","name":"0552","type":"H3","href":null,"layout":null,"metadata":null,"text":"Shadow Casting","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_143":{"__typename":"Paragraph","id":"3f23ec7cad6a_143","name":"da22","type":"P","href":null,"layout":null,"metadata":null,"text":"So now we have a nicely rendered sphere on a quad that is lit, textured, and can be moved, scaled, and rotated around. So lets make it cast shadows! For that we’ll need to make a shadow caster pass in our shader. Luckily the same vertex shader can be reused for both passes, since all it does is create a quad and pass along the ray origin and direction. And those of course will be exactly the same for the shadows as it is for the camera, right? Then the fragment shader really just needs to output the depth, so you can delete all that pesky UV and lighting code.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_144":{"__typename":"Paragraph","id":"3f23ec7cad6a_144","name":"b695","type":"P","href":null,"layout":null,"metadata":null,"text":"Oh.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_145":{"__typename":"Paragraph","id":"3f23ec7cad6a_145","name":"6502","type":"P","href":null,"layout":null,"metadata":null,"text":"The ray origin and direction need to be coming from the light, not the camera. And the value we’re using for the ray origin is always the current camera position, not the light. The good news is that’s not hard to fix. We can replace any usage of _WorldSpaceCameraPos with UNITY_MATRIX_I_V._m03_m13_m23 which gets the current view’s world position from the inverse view matrix. Now as long as the shadows are rendered with perspective projections it should all work!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":247,"end":267,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":273,"end":302,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_146":{"__typename":"Paragraph","id":"3f23ec7cad6a_146","name":"9e7c","type":"P","href":null,"layout":null,"metadata":null,"text":"Oh. Oh, no.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_147":{"__typename":"Paragraph","id":"3f23ec7cad6a_147","name":"41f9","type":"P","href":null,"layout":null,"metadata":null,"text":"Directional shadows use an orthographic projection.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_148":{"__typename":"Paragraph","id":"3f23ec7cad6a_148","name":"ff6c","type":"H4","href":null,"layout":null,"metadata":null,"text":"Orthographic Pain","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_149":{"__typename":"Paragraph","id":"3f23ec7cad6a_149","name":"5c81","type":"P","href":null,"layout":null,"metadata":null,"text":"The nice thing with perspective projection and ray tracing is the ray origin is where the camera is. That’s really easy to get, even for arbitrary views, as shown above. For orthographic projections the ray direction is the forward view vector. That’s easy enough to get from the inverse view matrix again.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_150":{"__typename":"Paragraph","id":"3f23ec7cad6a_150","name":"1436","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F forward in view space is -z, so we want the negative vector\nfloat3 worldSpaceViewForward = -UNITY_MATRIX_I_V._m02_m12_m22;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_151":{"__typename":"Paragraph","id":"3f23ec7cad6a_151","name":"ae93","type":"P","href":null,"layout":null,"metadata":null,"text":"But how do we get the orthographic ray origin? If you try and search online you’ll probably come across a bunch of examples that use a c# script to get the inverse projection matrix. Or abuse the current unity_OrthoParams which has information about the orthographic projection’s width and height. You can then use the clip space position to reconstruct the near view plane position the ray is originating from. The problem with these approaches is they’re all getting the camera’s orthographic settings, not the current light’s. So instead we have to calculate the inverse matrix in the shader!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":204,"end":221,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":473,"end":481,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_152":{"__typename":"Paragraph","id":"3f23ec7cad6a_152","name":"25e4","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float4x4 inverse(float4x4 m) {\n  float n11 = m[0][0], n12 = m[1][0], n13 = m[2][0], n14 = m[3][0];\n  float n21 = m[0][1], n22 = m[1][1], n23 = m[2][1], n24 = m[3][1];\n  float n31 = m[0][2], n32 = m[1][2], n33 = m[2][2], n34 = m[3][2];\n  float n41 = m[0][3], n42 = m[1][3], n43 = m[2][3], n44 = m[3][3];","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_153":{"__typename":"Paragraph","id":"3f23ec7cad6a_153","name":"f349","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  float t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_154":{"__typename":"Paragraph","id":"3f23ec7cad6a_154","name":"ed46","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ... hold up, how many more lines are there of this?!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_155":{"__typename":"Paragraph","id":"3f23ec7cad6a_155","name":"fd87","type":"P","href":null,"layout":null,"metadata":null,"text":"Ok, lets not do that. Those are just the first few lines of a \u003E30 line function of increasing length and complexity. There’s got to be a better way.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_156":{"__typename":"Paragraph","id":"3f23ec7cad6a_156","name":"9a04","type":"H4","href":null,"layout":null,"metadata":null,"text":"The Nearly View Plane","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_157":{"__typename":"Paragraph","id":"3f23ec7cad6a_157","name":"2ab1","type":"P","href":null,"layout":null,"metadata":null,"text":"As it turns out, you don’t need any of that. We don’t actually need the ray origin to be at the near plane. The ray origin really just needs to be the mesh’s position pulled back along the forward view vector. Just far enough to make sure it’s not starting inside the volume of the sphere. At least assuming the camera itself isn’t already inside the sphere. And a “near plane” at the camera’s position instead of the actual near plane totally fits that bill.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_158":{"__typename":"Paragraph","id":"3f23ec7cad6a_158","name":"69a8","type":"P","href":null,"layout":null,"metadata":null,"text":"We already know the world position of the vertex in the vertex shader. So we could transform the world position into view space. Zero out the viewSpacePos.z, and transform back into world space. That results in a usable ray origin for an orthographic projection!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":142,"end":156,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_159":{"__typename":"Paragraph","id":"3f23ec7cad6a_159","name":"f05f","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F transform world space vertex position into view space\nfloat4 viewSpacePos = mul(UNITY_MATRIX_V, float4(worldPos, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_160":{"__typename":"Paragraph","id":"3f23ec7cad6a_160","name":"8411","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F flatten the view space position to be on the camera plane\nviewSpacePos.z = 0.0;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_161":{"__typename":"Paragraph","id":"3f23ec7cad6a_161","name":"98c2","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F transform back into world space\nfloat4 worldRayOrigin = mul(UNITY_MATRIX_I_V, viewSpacePos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_162":{"__typename":"Paragraph","id":"3f23ec7cad6a_162","name":"03c7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F orthographic ray dir\nfloat3 worldRayDir = worldSpaceViewForward;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_163":{"__typename":"Paragraph","id":"3f23ec7cad6a_163","name":"74f9","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F and to object space\no.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));\no.rayOrigin = mul(unity_WorldToObject, worldRayOrigin);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_164":{"__typename":"Paragraph","id":"3f23ec7cad6a_164","name":"ef88","type":"P","href":null,"layout":null,"metadata":null,"text":"And really we don’t even need to do all that. Remember that super power of the dot() I mentioned above? We just need the camera to vertex position vector and the normalized forward view vector. We already have the camera to vertex position vector, that’s the original perspective world space ray direction. And we know the forward view vector by extracting it from the matrix mentioned above. Conveniently this vector comes already normalized! So we can remove two of the matrix multiplies in the above code and do this instead:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":79,"end":84,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_165":{"__typename":"Paragraph","id":"3f23ec7cad6a_165","name":"2964","type":"PRE","href":null,"layout":null,"metadata":null,"text":"float3 worldSpaceViewPos = UNITY_MATRIX_I_V._m03_m13_m23;\nfloat3 worldSpaceViewForward = -UNITY_MATRIX_I_V._m02_m12_m22;","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":57,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_166":{"__typename":"Paragraph","id":"3f23ec7cad6a_166","name":"f921","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F originally the perspective ray dir\nfloat3 worldCameraToPos = worldPos - worldSpaceViewPos;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_167":{"__typename":"Paragraph","id":"3f23ec7cad6a_167","name":"e626","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F orthographic ray dir\nfloat3 worldRayDir = worldSpaceViewForward * -dot(worldCameraToPos, worldSpaceViewForward);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_168":{"__typename":"Paragraph","id":"3f23ec7cad6a_168","name":"076a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F orthographic ray origin\nfloat3 worldRayOrigin = worldPos - worldRayDir;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_169":{"__typename":"Paragraph","id":"3f23ec7cad6a_169","name":"cc31","type":"PRE","href":null,"layout":null,"metadata":null,"text":"o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));\no.rayOrigin = mul(unity_WorldToObject, float4(worldRayOrigin, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_170":{"__typename":"Paragraph","id":"3f23ec7cad6a_170","name":"4aa0","type":"P","href":null,"layout":null,"metadata":null,"text":"* There is one minor caveat. This does not work for oblique projections (aka a sheared orthographic projection). For that you really do need the inverse projection matrix. Sheared perspective projections are fine though!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":0,"end":220,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_171":{"__typename":"Paragraph","id":"3f23ec7cad6a_171","name":"a51c","type":"H4","href":null,"layout":null,"metadata":null,"text":"Light Facing Billboard","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_172":{"__typename":"Paragraph","id":"3f23ec7cad6a_172","name":"bee5","type":"P","href":null,"layout":null,"metadata":null,"text":"Remember how we’re doing camera facing billboards? And that fancy math to scale the quad to account for the perspective? We don’t need any of that for an orthographic projection. Just need to do view facing billboarding and scale the quad by only the object transform’s max scale. However maybe lets not delete all of that code quite yet. We can use the existing rotation matrix construction as is, just change the forward vector to be the negative worldSpaceViewForward vector instead of the worldSpacePivotToCamera vector.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":415,"end":422,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":449,"end":470,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":493,"end":516,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_173":{"__typename":"Paragraph","id":"3f23ec7cad6a_173","name":"f867","type":"H4","href":null,"layout":null,"metadata":null,"text":"A Point of Perspective","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_174":{"__typename":"Paragraph","id":"3f23ec7cad6a_174","name":"0609","type":"P","href":null,"layout":null,"metadata":null,"text":"In fact now might be a good time to talk about how the spot lights and point lights use perspective projection. If we want to support directional lights, spot lights, and point light shadows we’re going to need to support both perspective and orthographic in the same shader. Unity also uses this pass to render the camera depth texture. This means we need to detect if the current projection matrix is orthographic or not and choose between the two paths.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":222,"end":226,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_175":{"__typename":"Paragraph","id":"3f23ec7cad6a_175","name":"4827","type":"P","href":null,"layout":null,"metadata":null,"text":"Well, we can find out what kind of projection matrix we’re using by checking a specific component of it. The very last component of a projection matrix will be 0.0 if it’s a perspective projection matrix, and will be 1.0 if it’s an orthographic projection matrix.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":160,"end":163,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":217,"end":220,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_176":{"__typename":"Paragraph","id":"3f23ec7cad6a_176","name":"7d49","type":"PRE","href":null,"layout":null,"metadata":null,"text":"bool isOrtho = UNITY_MATRIX_P._m33 == 1.0;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_177":{"__typename":"Paragraph","id":"3f23ec7cad6a_177","name":"e3fa","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F billboard code\nfloat3 forward = isOrtho ? -worldSpaceViewForward : normalize(worldSpacePivotToCamera);\n\u002F\u002F do the rest of the billboard code","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_178":{"__typename":"Paragraph","id":"3f23ec7cad6a_178","name":"3a9b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F quad scaling code\nfloat quadScale = maxScale;\nif (!isOrtho)\n{\n  \u002F\u002F do that perfect scaling code\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_179":{"__typename":"Paragraph","id":"3f23ec7cad6a_179","name":"7411","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ray direction and origin code\nfloat3 worldRayOrigin = worldSpaceViewPos;\nfloat3 worldRayDir = worldPos - worldSpaceRayOrigin;\nif (isOrtho)\n{\n  worldRayDir = worldSpaceViewForward * -dot(worldRayDir, worldSpaceViewForward);\n  worldRayOrigin = worldPos - worldRayDir;\n}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_180":{"__typename":"Paragraph","id":"3f23ec7cad6a_180","name":"861b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"o.rayDir = mul(unity_WorldToObject, float4(worldRayDir, 0.0));\no.rayOrigin = mul(unity_WorldToObject, float4(worldRayOrigin, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_181":{"__typename":"Paragraph","id":"3f23ec7cad6a_181","name":"b8cc","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F don't worry, I'll show the whole vertex shader later","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_182":{"__typename":"Paragraph","id":"3f23ec7cad6a_182","name":"9117","type":"P","href":null,"layout":null,"metadata":null,"text":"And now we have a vertex function that can correctly handle both orthographic and perspective projection! And nothing needs to change in the fragment shader to account for this. Oh, and we really can use the same function for both the shadow caster and forward lit pass. And now you can use an orthographic camera as well!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_183":{"__typename":"Paragraph","id":"3f23ec7cad6a_183","name":"1820","type":"H4","href":null,"layout":null,"metadata":null,"text":"Shadow Bias","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_184":{"__typename":"Paragraph","id":"3f23ec7cad6a_184","name":"2327","type":"P","href":null,"layout":null,"metadata":null,"text":"Now if you’d been following along, you’ll have a shadow caster pass outputting depth. But we’re not calling any of the usual functions a shadow caster usually has for applying offset. At the moment this isn’t obvious since we’re not self shadowing yet, but it’ll be a problem if we don’t fix it.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_185":{"__typename":"Paragraph","id":"3f23ec7cad6a_185","name":"011a","type":"P","href":null,"layout":null,"metadata":null,"text":"We’re not going to use the built in TRANSFER_SHADOW_CASTER_NORMALOFFSET(o) macro for the vertex shader for this since we need to do the bias in the fragment shader. Luckily, there’s another benefit to doing the raytracing in object space. The first function that the shadow caster vertex shader macro calls assumes the position being passed to it is in object space! I mean, that makes sense, since it assumes it’s working on the starting object space vertex position. But this means we can use the biasing functions the shadow caster macros call directly using the position we’ve raytraced and they’ll just work!","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":36,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*gQXVnXFpjPESwCtkEWGTiw.png":{"__typename":"ImageMetadata","id":"1*gQXVnXFpjPESwCtkEWGTiw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_186":{"__typename":"Paragraph","id":"3f23ec7cad6a_186","name":"89c0","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*gQXVnXFpjPESwCtkEWGTiw.png"},"text":"Yeah, really still just a quad.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_187":{"__typename":"Paragraph","id":"3f23ec7cad6a_187","name":"2cb6","type":"PRE","href":null,"layout":null,"metadata":null,"text":"Tags { \"LightMode\" = \"ShadowCaster\" }","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_188":{"__typename":"Paragraph","id":"3f23ec7cad6a_188","name":"b149","type":"PRE","href":null,"layout":null,"metadata":null,"text":"ZWrite On ZTest LEqual","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_189":{"__typename":"Paragraph","id":"3f23ec7cad6a_189","name":"cb09","type":"PRE","href":null,"layout":null,"metadata":null,"text":"CGPROGRAM\n#pragma vertex vert\n#pragma fragment frag_shadow","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_190":{"__typename":"Paragraph","id":"3f23ec7cad6a_190","name":"b327","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#pragma multi_compile_shadowcaster","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_191":{"__typename":"Paragraph","id":"3f23ec7cad6a_191","name":"ceed","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F yes, I know the vertex function is missing","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_192":{"__typename":"Paragraph","id":"3f23ec7cad6a_192","name":"dcff","type":"PRE","href":null,"layout":null,"metadata":null,"text":"fixed4 frag_shadow (v2f i,\n  out float outDepth : SV_Depth\n  ) : SV_Target\n{\n  \u002F\u002F ray origin\n  float3 rayOrigin = i.rayOrigin;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_193":{"__typename":"Paragraph","id":"3f23ec7cad6a_193","name":"547d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  \u002F\u002F normalize ray vector\n  float3 rayDir = normalize(i.rayDir);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_194":{"__typename":"Paragraph","id":"3f23ec7cad6a_194","name":"06dc","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  \u002F\u002F ray sphere intersection\n  float rayHit = sphIntersect(rayOrigin, rayDir, float4(0,0,0,0.5));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_195":{"__typename":"Paragraph","id":"3f23ec7cad6a_195","name":"a9df","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  \u002F\u002F above function returns -1 if there's no intersection\n  clip(rayHit);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_196":{"__typename":"Paragraph","id":"3f23ec7cad6a_196","name":"3d04","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  \u002F\u002F calculate object space position\n  float3 objectSpacePos = rayDir * rayHit + rayOrigin;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_197":{"__typename":"Paragraph","id":"3f23ec7cad6a_197","name":"8c50","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  \u002F\u002F output modified depth\n  \u002F\u002F yes, we pass in objectSpacePos as both arguments\n  \u002F\u002F second one is for the object space normal, which in this case\n  \u002F\u002F is the normalized position, but the function transforms it \n  \u002F\u002F into world space and normalizes it so we don't have to\n  float4 clipPos = UnityClipSpaceShadowCasterPos(objectSpacePos, objectSpacePos);\n  clipPos = UnityApplyLinearShadowBias(clipPos);\n  outDepth = clipPos.z \u002F clipPos.w;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_198":{"__typename":"Paragraph","id":"3f23ec7cad6a_198","name":"c5bf","type":"PRE","href":null,"layout":null,"metadata":null,"text":"  return 0;\n}\nENDCG","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_199":{"__typename":"Paragraph","id":"3f23ec7cad6a_199","name":"3060","type":"P","href":null,"layout":null,"metadata":null,"text":"That it. And this works for every shadow caster variant.* Directional light shadows, spot light shadows, point light shadows, and the camera depth texture! You know, should we ever want to support multiple lights…","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_200":{"__typename":"Paragraph","id":"3f23ec7cad6a_200","name":"6f44","type":"P","href":null,"layout":null,"metadata":null,"text":"* I didn’t add support for GLES 2.0 point light shadows. That requires outputting the distance from the light as the shadow caster pass’s color value instead of just a hard coded 0. It’s not too hard to add, but it makes the shader a bit messier with a few #if and special case data we’d need to calculate. So I didn’t include it.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":179,"end":180,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":257,"end":260,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":330,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_201":{"__typename":"Paragraph","id":"3f23ec7cad6a_201","name":"715e","type":"P","href":null,"layout":null,"metadata":null,"text":"* edit: I forgot one thing for handling depth on OpenGL platforms. Clip space z for OpenGL is a -w to +w range, so you need to do one extra step to convert that into the 0.0 to 1.0 range needed for the fragment shader output depth.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":0,"end":231,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_202":{"__typename":"Paragraph","id":"3f23ec7cad6a_202","name":"b266","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#if !defined(UNITY_REVERSED_Z) \u002F\u002F basically only OpenGL\noutDepth = outDepth * 0.5 + 0.5;\n#endif","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_203":{"__typename":"Paragraph","id":"3f23ec7cad6a_203","name":"58bc","type":"H3","href":null,"layout":null,"metadata":null,"text":"Shadow Receiving","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_204":{"__typename":"Paragraph","id":"3f23ec7cad6a_204","name":"b037","type":"P","href":null,"layout":null,"metadata":null,"text":"So now we have a working shadow casting. What about shadow receiving? This is getting into the gritty underbelly of Unity specific stuff. Turn back now if ye be mortal … er, if you don’t care about Unity’s built in forward rendering path so much. (Or at least skip to the next section about depth.)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":291,"end":296,"href":"#9800","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_205":{"__typename":"Paragraph","id":"3f23ec7cad6a_205","name":"38ad","type":"H4","href":null,"layout":null,"metadata":null,"text":"Lighting it Up","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_206":{"__typename":"Paragraph","id":"3f23ec7cad6a_206","name":"8436","type":"P","href":null,"layout":null,"metadata":null,"text":"Early on I posted a shader with a basic diffuse lighting setup. If you’ve managed to keep up with the rest of the article, the lighting code for the forward base pass should look something like this now.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_207":{"__typename":"Paragraph","id":"3f23ec7cad6a_207","name":"1dca","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F world space surface normal and position\nfloat3 worldNormal = UnityObjectToWorldNormal(objectSpaceNormal);\nfloat3 worldPos = mul(unity_ObjectToWorld, float4(objectSpacePos, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_208":{"__typename":"Paragraph","id":"3f23ec7cad6a_208","name":"1a06","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F basic lighting\nhalf3 worldLightDir = UnityWorldSpaceLightDir(worldPos);\nhalf ndotl = saturate(dot(worldNormal, worldLightDir));\nhalf3 lighting = _LightColor0 * ndotl;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_209":{"__typename":"Paragraph","id":"3f23ec7cad6a_209","name":"5490","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ambient lighting\nhalf3 ambient = ShadeSH9(float4(worldNormal, 1));\nlighting += ambient;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_210":{"__typename":"Paragraph","id":"3f23ec7cad6a_210","name":"98ed","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F apply lighting\ncol.rgb *= lighting;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_211":{"__typename":"Paragraph","id":"3f23ec7cad6a_211","name":"7862","type":"P","href":null,"layout":null,"metadata":null,"text":"Nothing too fancy. Get your world normal and world position. Get the world light direction. Do a clamped dot product. Multiply the light color by the dot product, add ambient lighting, and multiply the texture by the lighting. This is kind of your starting lit shader tutorial code. But we’re obviously missing shadows.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_212":{"__typename":"Paragraph","id":"3f23ec7cad6a_212","name":"920c","type":"P","href":null,"layout":null,"metadata":null,"text":"For a traditional forward base lit shader we’d want to add a hand full of macros to places and Unity automagically gets us what we need. Add the SHADOW_COORDS(#) to the v2f struct, call TRANSFER_SHADOW(o); in the vertex function, and then call UNITY_LIGHT_ATTENUATION(atten, i, worldPos); in the fragment shader. We could certainly do that, at least for the forward base pass. On desktop and console, Unity’s directional light’s shadows use screen space shadows. That is the shadow maps are rendered, then they’re cast onto the world position calculated from the camera depth texture before hand and saved into a screen space texture. So the above macros are just passing along the screen space position, which you can cheaply calculate from the clip space position.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":145,"end":161,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":169,"end":172,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":186,"end":205,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":244,"end":288,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_213":{"__typename":"Paragraph","id":"3f23ec7cad6a_213","name":"335f","type":"P","href":null,"layout":null,"metadata":null,"text":"Usually this is done by that TRANSFER_SHADOW(o); macro mentioned above, and passed from the vertex to the fragment shader. But we’re already calculating the clip space position in the fragment shader anyway. We can reuse it to calculate the screen space position with the same ComputeScreenPos(clipPos) function the macro calls. Then we can use the final built in macro and have it do the rest of the work for us.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":29,"end":48,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":277,"end":302,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_214":{"__typename":"Paragraph","id":"3f23ec7cad6a_214","name":"380a","type":"P","href":null,"layout":null,"metadata":null,"text":"And we do want to use that UNITY_LIGHT_ATTENUATION(atten, i, worldPos); macro. It handles extra stuff like light cookies for us. And for another reason I’ll get to in a moment.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":27,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_215":{"__typename":"Paragraph","id":"3f23ec7cad6a_215","name":"a231","type":"P","href":null,"layout":null,"metadata":null,"text":"But there’s one minor catch. The built in shadow macro expects you to pass in the a struct with screen space position. And our v2f struct doesn’t have it, nor do we want to add it to that struct if we don’t have to.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":127,"end":130,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_216":{"__typename":"Paragraph","id":"3f23ec7cad6a_216","name":"4196","type":"P","href":null,"layout":null,"metadata":null,"text":"Thankfully we don’t, we can make a dummy struct! It just needs the SHADOW_COORDS(0) macro to add the struct element the other macro expects, and then we can set the value it adds ourselves.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":67,"end":83,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_217":{"__typename":"Paragraph","id":"3f23ec7cad6a_217","name":"6632","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F dummy struct\nstruct shadowInput {\n  SHADOW_COORDS(0)\n);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_218":{"__typename":"Paragraph","id":"3f23ec7cad6a_218","name":"f9ca","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F world space position and clip space position\nfloat3 worldPos = mul(unity_ObjectToWorld, float4(surfacePos, 1.0));\nfloat4 clipPos = UnityWorldToClipPos(float4(worldPos, 1.0));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_219":{"__typename":"Paragraph","id":"3f23ec7cad6a_219","name":"7fb9","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#if defined (SHADOWS_SCREEN)\n\u002F\u002F setup shadow struct for screen space shadows\nshadowInput shadowIN;\n#if defined(UNITY_NO_SCREENSPACE_SHADOWS)\n\u002F\u002F mobile shadows\nshadowIN._ShadowCoord = mul(unity_WorldToShadow[0], float4(worldPos, 1.0));\n#else\n\u002F\u002F screen space shadows\nshadowIN._ShadowCoord = ComputeScreenPos(clipPos);\n#endif \u002F\u002F UNITY_NO_SCREENSPACE_SHADOWS\n#else\nfloat shadowIN = 0;\n#endif \u002F\u002F SHADOWS_SCREEN","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_220":{"__typename":"Paragraph","id":"3f23ec7cad6a_220","name":"07da","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F macro creates a variable named atten with the shadow\nUNITY_LIGHT_ATTENUATION(atten, shadowIN, worldPos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_221":{"__typename":"Paragraph","id":"3f23ec7cad6a_221","name":"2c3a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F multiply the directional lighting by atten\nhalf3 lighting = _LightColor0 * ndotl * atten;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_222":{"__typename":"Paragraph","id":"3f23ec7cad6a_222","name":"dd18","type":"P","href":null,"layout":null,"metadata":null,"text":"And now we can receive directional shadows!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*67UJHSBLcotGWA_5CcYCLQ.png":{"__typename":"ImageMetadata","id":"1*67UJHSBLcotGWA_5CcYCLQ.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_223":{"__typename":"Paragraph","id":"3f23ec7cad6a_223","name":"9b25","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*67UJHSBLcotGWA_5CcYCLQ.png"},"text":"Catching shade.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_224":{"__typename":"Paragraph","id":"3f23ec7cad6a_224","name":"4ed6","type":"H3","href":null,"layout":null,"metadata":null,"text":"Multiple Lights","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_225":{"__typename":"Paragraph","id":"3f23ec7cad6a_225","name":"fc8e","type":"P","href":null,"layout":null,"metadata":null,"text":"So I mentioned how we really did want to use the UNITY_LIGHT_ATTENUATION macro above. Here’s the real reason why. It also handles other lights types! Unity’s built in forward renderer draws multiple lights by rendering the object again for each light. So we need a forward add pass. And the only thing keeping the one we now have for the forward base pass from working with the forward add pass is the ambient lighting. So you can copy the fragment shader function and delete the two lines of ambient lighting code.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":49,"end":72,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_226":{"__typename":"Paragraph","id":"3f23ec7cad6a_226","name":"74e6","type":"P","href":null,"layout":null,"metadata":null,"text":"Or you could stick those three lines for the ambient lighting inside of an\n#if defined(UNITY_SHOULD_SAMPLE_SH) which will only be true for the base pass. Then you can share the exact same function for both passes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":75,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*Gg46Cg8Vv3Si9EiPHlCaYg.png":{"__typename":"ImageMetadata","id":"1*Gg46Cg8Vv3Si9EiPHlCaYg.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_227":{"__typename":"Paragraph","id":"3f23ec7cad6a_227","name":"872a","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*Gg46Cg8Vv3Si9EiPHlCaYg.png"},"text":"RTX Off!","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_228":{"__typename":"Paragraph","id":"3f23ec7cad6a_228","name":"bb36","type":"H3","href":null,"layout":null,"metadata":null,"text":"Fragmented Depth","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_229":{"__typename":"Paragraph","id":"3f23ec7cad6a_229","name":"3e18","type":"P","href":null,"layout":null,"metadata":null,"text":"There’s one big caveat about using SV_Depth. It disables early depth rejection. Basically that means you’re going to be paying the cost of rendering the impostor if it’s anywhere within the view frustum. Even if it’s behind something and not visible. Normally GPUs can use the depth buffer to skip running the fragment shader for meshes behind something else that has already been rendered closer to the camera. But since the GPU doesn’t know what the depth is going to be until after the fragment shader has run, it can’t do that.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":35,"end":43,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":479,"end":485,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_230":{"__typename":"Paragraph","id":"3f23ec7cad6a_230","name":"8236","type":"BQ","href":null,"layout":null,"metadata":null,"text":"“What about SV_DepthLessEqual or SV_DepthGreaterEqual?”","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":12,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":33,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_231":{"__typename":"Paragraph","id":"3f23ec7cad6a_231","name":"7ffc","type":"P","href":null,"layout":null,"metadata":null,"text":"Yes! Excellent question Mr Pettineo. How did you know I was thinking that?","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":37,"end":53,"href":"https:\u002F\u002Fmynameismjp.wordpress.com\u002F2010\u002F11\u002F14\u002Fd3d11-features\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":24,"end":36,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_232":{"__typename":"Paragraph","id":"3f23ec7cad6a_232","name":"9800","type":"H4","href":null,"layout":null,"metadata":null,"text":"Conservative Depth Output","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_233":{"__typename":"Paragraph","id":"3f23ec7cad6a_233","name":"184f","type":"P","href":null,"layout":null,"metadata":null,"text":"The SV_DepthLessEqual and SV_DepthGreaterEqual semantics are replacements for SV_Depth that tell the GPU to still do early depth rejection added for Shader Model 5.0. However to use this we have to make sure the mesh is as close or closer to the camera than the sphere we’re about to render. To do that we’re going to want to pull the mesh towards the camera. Right now the camera facing quad is sitting at the sphere’s center.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":4,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":26,"end":46,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":78,"end":86,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_234":{"__typename":"Paragraph","id":"3f23ec7cad6a_234","name":"2b68","type":"P","href":null,"layout":null,"metadata":null,"text":"The thing is we need to move the vertices closer to the camera without modifying their screen space position. We’ve already calculated the perfect bounds for them, so it’d be unfortunate if we end up undoing that.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":63,"end":70,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_235":{"__typename":"Paragraph","id":"3f23ec7cad6a_235","name":"a715","type":"P","href":null,"layout":null,"metadata":null,"text":"One option would be to calculate the clip space position for a view plane maxRadius closer to the camera than the sphere’s pivot. Then replace the z of the already calculated clip space position. Clip space has a really neat feature that you can change the z of a clip space position without affecting its position on screen or cause problems with interpolation.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":74,"end":83,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_236":{"__typename":"Paragraph","id":"3f23ec7cad6a_236","name":"5be7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F usual clip space at the end of the shader\no.pos = UnityWorldToClipPos(worldPos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_237":{"__typename":"Paragraph","id":"3f23ec7cad6a_237","name":"9193","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F get a position maxRadius closer from the sphere pivot along the \n\u002F\u002F forward view vector\nfloat4 nearerClip = UnityWorldToClipPos(worldSpacePivotPos — worldSpaceViewForward * maxRadius);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_238":{"__typename":"Paragraph","id":"3f23ec7cad6a_238","name":"5dee","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F convert apply \"pespective divide\" to get real depth Z\nfloat nearerZ = nearerClip.z \u002F nearerClip.w","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_239":{"__typename":"Paragraph","id":"3f23ec7cad6a_239","name":"c3b4","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F replace the original clip space z with the new one\no.pos.z = nearerZ * o.pos.w;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_240":{"__typename":"Paragraph","id":"3f23ec7cad6a_240","name":"2572","type":"P","href":null,"layout":null,"metadata":null,"text":"But this technique has one big flaw. If you move the camera too close to or try to move past our impostor sphere, it’ll just disappear when we should still see it. The problem is the “nearer depth” is getting placed behind the camera. We can try to put some more work into this though. Like try and limit the z to the near plane. Or rather clamping to just inside the near clip plane as on the near clip plane will cause it to still get culled.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":216,"end":222,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":387,"end":390,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_241":{"__typename":"Paragraph","id":"3f23ec7cad6a_241","name":"fdc8","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F clamp to just inside the near clip plane\no.pos.z = min(o.pos.w - 1.0e-6f, nearerZ * o.pos.w);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_242":{"__typename":"Paragraph","id":"3f23ec7cad6a_242","name":"8895","type":"P","href":null,"layout":null,"metadata":null,"text":"But … this doesn’t actually work like you’d expect.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":5,"end":51,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":6,"end":50,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_243":{"__typename":"Paragraph","id":"3f23ec7cad6a_243","name":"1d11","type":"P","href":null,"layout":null,"metadata":null,"text":"I lied a bit when I said you could change the z of a clip space position without any problems. This fails in exactly one case, and it’s when some vertices of a mesh are behind the camera. The exact case we’re trying to work around. Even with the clamping, the quad is still more clipped than it should be. So this was a bust.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*qLDWavkasNDmg6Fqz_SorA.png":{"__typename":"ImageMetadata","id":"1*qLDWavkasNDmg6Fqz_SorA.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_244":{"__typename":"Paragraph","id":"3f23ec7cad6a_244","name":"b7d4","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*qLDWavkasNDmg6Fqz_SorA.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_245":{"__typename":"Paragraph","id":"3f23ec7cad6a_245","name":"7cfb","type":"P","href":null,"layout":null,"metadata":null,"text":"And honestly, I don’t fully understand the problem well enough to explain why.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_246":{"__typename":"Paragraph","id":"3f23ec7cad6a_246","name":"2b79","type":"P","href":null,"layout":null,"metadata":null,"text":"But there is a cheaper solution that behaves just well in the general case and doesn’t fail in the “some vertices behind the camera” case! We can move the vertices one sphere radius along the ray direction. For orthographic projection this would literally just be the world position - the forward view ✕ the sphere radius. For perspective projection if we use the normalized ray direction it wouldn’t actually pull it far enough. So we need to bring back our friend the dot() again to find out how far we need to offset it to properly pull the quad’s surface exactly one sphere radius closer.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":470,"end":475,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":15,"end":23,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_247":{"__typename":"Paragraph","id":"3f23ec7cad6a_247","name":"12b3","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F this pushes the vertices towards the camera\n\u002F\u002F add just before the UnityWorldToClipPos line in the vertex shader\nworldPos += worldSpaceRayDir \u002F dot(normalize(viewOffset), worldSpaceRayDir) * maxRadius;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_248":{"__typename":"Paragraph","id":"3f23ec7cad6a_248","name":"b4a5","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F usual clip space at the end of the shader\no.pos = UnityWorldToClipPos(worldPos);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_249":{"__typename":"Paragraph","id":"3f23ec7cad6a_249","name":"c255","type":"P","href":null,"layout":null,"metadata":null,"text":"Now the camera will still near clip with the sphere when you get close, but the result is very similar to clipping an actual sphere mesh. Generally speaking if the mesh isn’t getting clipped, neither will the ray offset quad.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*FiXqYc-4yjZe8CKFvpk-Mw.png":{"__typename":"ImageMetadata","id":"1*FiXqYc-4yjZe8CKFvpk-Mw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_250":{"__typename":"Paragraph","id":"3f23ec7cad6a_250","name":"0c87","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*FiXqYc-4yjZe8CKFvpk-Mw.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_251":{"__typename":"Paragraph","id":"3f23ec7cad6a_251","name":"3213","type":"P","href":null,"layout":null,"metadata":null,"text":"Once that’s added it’s only a matter of replacing the SV_Depth semantic in the fragment shaders to the appropriate option. For anything not OpenGL, you’ll want to use SV_DepthLessEqual. This is because Unity uses a reversed Z depth for non-OpenGL platforms. Reversed Z depth means things further away have a smaller depth value than closer objects. So really we can just check for if the UNITY_REVERSED_Z keyword is active. For OpenGL … well, really this is all moot. We can’t guarantee an OpenGL platform supports the equivalent of SV_DepthGreaterEqual until OpenGL 4.2. ̶A̶n̶d̶ ̶I̶ ̶t̶h̶i̶n̶k̶ ̶O̶p̶e̶n̶G̶L̶ ̶4̶.̶2̶ ̶u̶s̶e̶s̶ ̶r̶e̶v̶e̶r̶s̶e̶d̶ ̶z̶ ̶d̶e̶p̶t̶h̶. Basically you’re likely stuck using SV_Depth on any platform that’s not using the reversed z depth. And then all this offsetting of the quad closer to the camera to reduce over shading is sadly pointless for those platforms. But we can at least handle both cases in the shader.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":54,"end":62,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":167,"end":184,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":388,"end":404,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":533,"end":553,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":699,"end":707,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":136,"end":139,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_252":{"__typename":"Paragraph","id":"3f23ec7cad6a_252","name":"d6fa","type":"P","href":null,"layout":null,"metadata":null,"text":"* edit: Unity running OpenGL 4.2+ still uses regular z depth. You could use SV_DepthGreaterEqual for that, but realistically any platform that supports OpenGL 4.2 you’ll want to be running Direct3D, Vulkan, or Metal on instead.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":76,"end":96,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":227,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_253":{"__typename":"Paragraph","id":"3f23ec7cad6a_253","name":"f002","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F update the fragment shader functions like this\nhalf4 frag_(forward\u002Fshadow) (v2f i\n#if UNITY_REVERSED_Z && SHADER_TARGET \u003E 40\n  , out float outDepth : SV_DepthLessEqual\n#else\n\u002F\u002F the device probably can't use conservative depth\n  , out float outDepth : SV_Depth\n#endif\n  ) : SV_Target","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_254":{"__typename":"Paragraph","id":"3f23ec7cad6a_254","name":"2be8","type":"H3","href":null,"layout":null,"metadata":null,"text":"Finishing Touches","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_255":{"__typename":"Paragraph","id":"3f23ec7cad6a_255","name":"4d46","type":"P","href":null,"layout":null,"metadata":null,"text":"There are a few minor items left to fully flesh out the shader. Support for “per vertex” non-important lights, fog, and basic instancing. These aren’t terribly interesting, so I’ll cover them quickly.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_256":{"__typename":"Paragraph","id":"3f23ec7cad6a_256","name":"6699","type":"H4","href":null,"layout":null,"metadata":null,"text":"“Per Vertex” Non-Important Lights","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_257":{"__typename":"Paragraph","id":"3f23ec7cad6a_257","name":"2ad9","type":"P","href":null,"layout":null,"metadata":null,"text":"Since we don’t really have a lot of vertices, we’ll also need to call the “vertex light” function in the fragment shader. This is really just a matter of copy and pasting the vertex lighting function, sticking it inside an #if, and adding the returned value to the lighting.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":223,"end":226,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":265,"end":273,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_258":{"__typename":"Paragraph","id":"3f23ec7cad6a_258","name":"9b92","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#if defined(VERTEXLIGHT_ON)\n\u002F\u002F \"per vertex\" non-important lights\nhalf3 vertexLighting = Shade4PointLights(\n  unity_4LightPosX0, unity_4LightPosY0, unity_4LightPosZ0,\n  unity_LightColor[0].rgb, unity_LightColor[1].rgb,\n  unity_LightColor[2].rgb, unity_LightColor[3].rgb,\n  unity_4LightAtten0,\n  worldPos, worldNormal);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_259":{"__typename":"Paragraph","id":"3f23ec7cad6a_259","name":"0162","type":"PRE","href":null,"layout":null,"metadata":null,"text":"lighting += vertexLighting;\n#endif","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_260":{"__typename":"Paragraph","id":"3f23ec7cad6a_260","name":"13d9","type":"P","href":null,"layout":null,"metadata":null,"text":"Or at least it should be this simple. The VERTEXLIGHT_ON is one of the keywords controlled by #pragma multi_compile_fwdbase. But it seems like if you don’t have that function in the vertex shader the shader variant with the keyword is never created. So you also have to force it with your own multi compile line.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":42,"end":56,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":94,"end":123,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":15,"end":21,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_261":{"__typename":"Paragraph","id":"3f23ec7cad6a_261","name":"7cba","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#pragma multi_compile _ VERTEXLIGHT_ON","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_262":{"__typename":"Paragraph","id":"3f23ec7cad6a_262","name":"95f9","type":"H4","href":null,"layout":null,"metadata":null,"text":"Fog","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_263":{"__typename":"Paragraph","id":"3f23ec7cad6a_263","name":"5ab1","type":"P","href":null,"layout":null,"metadata":null,"text":"Like with many things covered in this, Unity’s built in macros assume you’re outputting some kind of value from the vertex shader. For desktop, this is just passing the raw clipPos.z to the fragment shader, which then calculates the actual fog falloff as part of the fog macro called there. So we can just put the usual macro with UNITY_APPLY_FOG(clipPos.z, col); at the end of our fragment shader for the forward passes.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":173,"end":182,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":331,"end":363,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_264":{"__typename":"Paragraph","id":"3f23ec7cad6a_264","name":"238a","type":"P","href":null,"layout":null,"metadata":null,"text":"For mobile the falloff is calculated in the vertex shader. But we need to use the clipPos.z we calculated in the fragment shader, so we can’t just use the usual UNITY_APPLY_FOG(clipPos.z, col) macro if you want to support both mobile and desktop. So we have to calculate the falloff and pass that to the macro, but only when on mobile.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":82,"end":91,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":161,"end":192,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_265":{"__typename":"Paragraph","id":"3f23ec7cad6a_265","name":"330b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F fog\nfloat fogCoord = clipPos.z;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_266":{"__typename":"Paragraph","id":"3f23ec7cad6a_266","name":"c5c4","type":"PRE","href":null,"layout":null,"metadata":null,"text":"#if (SHADER_TARGET \u003C 30) || defined(SHADER_API_MOBILE)\n\u002F\u002F macro calculates fog falloff\n\u002F\u002F and creates a unityFogFactor variable to hold it\nUNITY_CALC_FOG_FACTOR(fogCoord);\nfogCoord = unityFogFactor;\n#endif","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_267":{"__typename":"Paragraph","id":"3f23ec7cad6a_267","name":"bb2e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"UNITY_APPLY_FOG(fogCoord, col);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_268":{"__typename":"Paragraph","id":"3f23ec7cad6a_268","name":"44aa","type":"H4","href":null,"layout":null,"metadata":null,"text":"Instancing","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_269":{"__typename":"Paragraph","id":"3f23ec7cad6a_269","name":"4492","type":"P","href":null,"layout":null,"metadata":null,"text":"To add instancing to the shader, copy and paste the appropriate macros mentioned on Unity’s own documenation for this:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_270":{"__typename":"Paragraph","id":"3f23ec7cad6a_270","name":"df0f","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"GPU instancing\ndocs.unity3d.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":31,"href":"https:\u002F\u002Fdocs.unity3d.com\u002FManual\u002FGPUInstancing.html","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":14,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fdocs.unity3d.com\u002FManual\u002FGPUInstancing.html","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*pRcdY50Py0BVmMKT"}},"Paragraph:3f23ec7cad6a_271":{"__typename":"Paragraph","id":"3f23ec7cad6a_271","name":"1b29","type":"P","href":null,"layout":null,"metadata":null,"text":"Go to the section Adding instancing to vertex and fragment Shaders and copy the macros into the appdata &v2f structs, vertex function and fragment functions. Ignore the BUFFER andPROP macros. But yes you do need the UNITY_SETUP_INSTANCE_ID(i); in the fragment shaders. In an instanced shader, the unity_ObjectToWorld and unity_WorldToObject matrices are instanced properties. And since we’re using those in the fragment shader, we need the instance id there too.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":96,"end":103,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":105,"end":108,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":169,"end":175,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":179,"end":183,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":216,"end":243,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":297,"end":316,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":321,"end":340,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":18,"end":67,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":134,"end":138,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_272":{"__typename":"Paragraph","id":"3f23ec7cad6a_272","name":"5e7b","type":"H3","href":null,"layout":null,"metadata":null,"text":"The Finished Shader","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_273":{"__typename":"Paragraph","id":"3f23ec7cad6a_273","name":"dd8d","type":"P","href":null,"layout":null,"metadata":null,"text":"Without futher ado, here’s the finished shader in its entirety.\n(direct link to gist.)","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":65,"end":76,"href":"https:\u002F\u002Fgist.github.com\u002Fbgolus\u002F1188cd89968b977d5c468bf7bbb3250b","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:65a11c489323f4bae248382fdcf40717":{"__typename":"MediaResource","id":"65a11c489323f4bae248382fdcf40717","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"Sphere Impostor Shader from https:\u002F\u002Fmedium.com\u002F@bgolus\u002Frendering-a-sphere-with-a-quad-13c92025570c"},"Paragraph:3f23ec7cad6a_274":{"__typename":"Paragraph","id":"3f23ec7cad6a_274","name":"8a0b","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:65a11c489323f4bae248382fdcf40717"}},"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_275":{"__typename":"Paragraph","id":"3f23ec7cad6a_275","name":"d738","type":"H3","href":null,"layout":null,"metadata":null,"text":"Additional Thoughts","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_276":{"__typename":"Paragraph","id":"3f23ec7cad6a_276","name":"3835","type":"H4","href":null,"layout":null,"metadata":null,"text":"Surface Shaders & Shader Graph","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_277":{"__typename":"Paragraph","id":"3f23ec7cad6a_277","name":"11df","type":"P","href":null,"layout":null,"metadata":null,"text":"Because I know the next question everyone is going to ask is going to be some form of “how do I do this in Surface Shaders \u002F Shader Graph?” Here’s the answer to those question.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_278":{"__typename":"Paragraph","id":"3f23ec7cad6a_278","name":"fc16","type":"P","href":null,"layout":null,"metadata":null,"text":"You can’t.*","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_279":{"__typename":"Paragraph","id":"3f23ec7cad6a_279","name":"7ebe","type":"P","href":null,"layout":null,"metadata":null,"text":"Well, you can construct the ray origin and direction. You can do the raytracing of the sphere. You can do all of the procedural UV stuff too, of course. You can even update the surface normals so it gets lit like a sphere.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_280":{"__typename":"Paragraph","id":"3f23ec7cad6a_280","name":"9d83","type":"P","href":null,"layout":null,"metadata":null,"text":"The one thing you can’t do is adjust the depth or world position used for lighting and shadows from the fragment shader. So depth intersections will look wrong, shadows will look wrong, and lights really close to the surface won’t look correct either. Because they’ll all be using the original mesh surface’s position.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":18,"end":24,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_281":{"__typename":"Paragraph","id":"3f23ec7cad6a_281","name":"f585","type":"P","href":null,"layout":null,"metadata":null,"text":"So the only option for using this technique in any of Unity’s renderers is to use hand written vertex fragment shaders. For the time being at least. I hope one day you’ll be able to output a modified depth value in Shader Graph. But as of writing this, they’ve made no mention of looking to add this feature.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_282":{"__typename":"Paragraph","id":"3f23ec7cad6a_282","name":"1386","type":"P","href":null,"layout":null,"metadata":null,"text":"* It’s been pointed out that Shader Graph for the HDRP does have the ability to set a depth on the master node to do per fragment depth. It is using SV_Depth instead of SV_DepthLessEqual though, so there’s no need to do the ray direction offset of the quad. Thanks to Rémy for reminding me. Hopefully they add this feature to the URP at some point as well.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":149,"end":157,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":169,"end":186,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":268,"end":272,"href":"https:\u002F\u002Ftwitter.com\u002F3DReMix\u002Fstatus\u002F1348584176870633472?s=20","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":0,"end":356,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_283":{"__typename":"Paragraph","id":"3f23ec7cad6a_283","name":"86f6","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Shader Graph - Unity Graphics\nProduct roadmap and feature requests. Welcome to our product portal.portal.productboard.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":121,"href":"https:\u002F\u002Fportal.productboard.com\u002Funity\u002F1-unity-graphics\u002Ftabs\u002F7-shader-graph","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":29,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":30,"end":98,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fportal.productboard.com\u002Funity\u002F1-unity-graphics\u002Ftabs\u002F7-shader-graph","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":""}},"Paragraph:3f23ec7cad6a_284":{"__typename":"Paragraph","id":"3f23ec7cad6a_284","name":"5378","type":"H4","href":null,"layout":null,"metadata":null,"text":"Anti-Aliasing","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_285":{"__typename":"Paragraph","id":"3f23ec7cad6a_285","name":"6380","type":"P","href":null,"layout":null,"metadata":null,"text":"So many of my other articles are about anti-aliasing, why did I skip that here? Because it’s a difficult problem that has no perfect solution.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_286":{"__typename":"Paragraph","id":"3f23ec7cad6a_286","name":"4c34","type":"P","href":null,"layout":null,"metadata":null,"text":"Inigo Quiles has an excellent example of how to handle anti-aliasing of ray traced spheres here:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_287":{"__typename":"Paragraph","id":"3f23ec7cad6a_287","name":"c3eb","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"Shadertoy\nBuild shaders, share them, and learn from the best community.www.shadertoy.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":88,"href":"https:\u002F\u002Fwww.shadertoy.com\u002Fview\u002FMsSSWV","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":9,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":10,"end":71,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fwww.shadertoy.com\u002Fview\u002FMsSSWV","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*FUBrmadIsnsXsHz8"}},"Paragraph:3f23ec7cad6a_288":{"__typename":"Paragraph","id":"3f23ec7cad6a_288","name":"66fd","type":"P","href":null,"layout":null,"metadata":null,"text":"The basic idea is to use a ray to point distance calculation (which is also being used to fix the UVs on the outer edge) to get an approximation of how close to the edge of the sphere the ray is in screen space. That can give you an gradient that can be sharpened using a function like that used in my Alpha to Coverage article and then use that as the output alpha. Could also be used for alpha blending in non-MSAA and non-opaque use cases.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*hdSrnGYFJolHVaZ5glxz0Q.png":{"__typename":"ImageMetadata","id":"1*hdSrnGYFJolHVaZ5glxz0Q.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_289":{"__typename":"Paragraph","id":"3f23ec7cad6a_289","name":"783e","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*hdSrnGYFJolHVaZ5glxz0Q.png"},"text":"4x MSAA with the original shader vs using Alpha to Coverage.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_290":{"__typename":"Paragraph","id":"3f23ec7cad6a_290","name":"43cb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F add this to the pass outside of the CGPROGRAM to enable\n\u002F\u002F alpha to coverage\nAlphaToMask On\n","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_291":{"__typename":"Paragraph","id":"3f23ec7cad6a_291","name":"c630","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F ray to sphere pivot distance\nfloat rayToPointDist = length(rayDir * dot(rayDir, -rayOrigin) + rayOrigin);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_292":{"__typename":"Paragraph","id":"3f23ec7cad6a_292","name":"86cb","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F fwidth gets the sum of the ddx & ddy partial derivatives\n\u002F\u002F float fDist = fwidth(rayToPointDist);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_293":{"__typename":"Paragraph","id":"3f23ec7cad6a_293","name":"dd55","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F fwidth is a coarse approximation of this\nfloat fDist = length(float2(ddx(rayToPointDist), ddy(rayToPointDist)));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_294":{"__typename":"Paragraph","id":"3f23ec7cad6a_294","name":"d512","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F sharpen ray to point distance\n\u002F\u002F centered on sphere radius, +\u002F- half a pixel based on derivatives\nfloat alpha = (0.5 - rayToPointDist) \u002F max(fDist, 0.0001) + 0.5;","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_295":{"__typename":"Paragraph","id":"3f23ec7cad6a_295","name":"2b2b","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F clip based on sharpened alpha \n\u002F\u002F don't clip based on ray hit miss\nclip(alpha);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_296":{"__typename":"Paragraph","id":"3f23ec7cad6a_296","name":"1a25","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F clamp alpha to a 0 to 1 range and apply to output alpha after\n\u002F\u002F sampling the texture\ncol.a = saturate(alpha);","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_297":{"__typename":"Paragraph","id":"3f23ec7cad6a_297","name":"9041","type":"P","href":null,"layout":null,"metadata":null,"text":"That seems like it should be good enough, right? So why did I say there’s no perfect solution? And why didn’t I implement that by default? Anti-aliasing the outside edge doesn’t solve aliasing on intersections with rasterized meshes or other shaders that output depth from the fragment shader. When rasterizing a triangle with MSAA enabled the depth is calculated for each subsample the triangle covers, but the fragment shader is only run once per pixel. This means the per subsample coverage of two intersecting meshes can be accurately determined down to the subsample count. This shader is writing the depth from the fragment shader, so there’s only a single depth per pixel. The same depth is then use for all of the subsamples. Thus no AA on intersections. Technically there is still some AA on intersections between rasterized geometry and fragment shaders that output depth, as the plane of the intersecting triangle is taken into account. But between two depth writing shaders there will be none.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"EM","start":790,"end":794,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*OTuu-3jJbYO-SJmMpAw2CQ.png":{"__typename":"ImageMetadata","id":"1*OTuu-3jJbYO-SJmMpAw2CQ.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_298":{"__typename":"Paragraph","id":"3f23ec7cad6a_298","name":"b82b","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*OTuu-3jJbYO-SJmMpAw2CQ.png"},"text":"4x MSAA with the original shader vs using Alpha to Coverage. Note intersections are identical with both approaches. Rasterized surfaces that are aligned with the view plane show aliasing on intersections with impostor. Rasterized surfaces viewed at an angle show anti-aliasing, but it is equivalent to intersecting a view plane aligned surface.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_299":{"__typename":"Paragraph","id":"3f23ec7cad6a_299","name":"dc60","type":"P","href":null,"layout":null,"metadata":null,"text":"The Shadertoy example above can handle intersections just because it is rendering all of those spheres in one pass and doing per pixel sorting and compositing of the analytical shapes. It’s not even doing any MSAA.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_300":{"__typename":"Paragraph","id":"3f23ec7cad6a_300","name":"4adb","type":"P","href":null,"layout":null,"metadata":null,"text":"There’s no efficient way I’m aware of to handle fragment shader depth writes with MSAA enabled while still only running the fragment shader once per pixel. That leaves using the sample interpolation modifier to force the fragment shader to be run for every subsample. Not exactly great for performance when the whole point of MSAA was to not do that. It does look nice though.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":178,"end":184,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":338,"end":342,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*eiHTfqsm9Ng6zXgMWOx6wg.png":{"__typename":"ImageMetadata","id":"1*eiHTfqsm9Ng6zXgMWOx6wg.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_301":{"__typename":"Paragraph","id":"3f23ec7cad6a_301","name":"de13","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*eiHTfqsm9Ng6zXgMWOx6wg.png"},"text":"4x MSAA with the original shader vs shader forced to render per subsample.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*2syMBVV_TijS0bAJ5IoFcg.png":{"__typename":"ImageMetadata","id":"1*2syMBVV_TijS0bAJ5IoFcg.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_302":{"__typename":"Paragraph","id":"3f23ec7cad6a_302","name":"4f4f","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*2syMBVV_TijS0bAJ5IoFcg.png"},"text":"4x MSAA with the original shader vs shader forced to render per subsample. Note intersections for the super sampled case are all properly anti-aliased.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_303":{"__typename":"Paragraph","id":"3f23ec7cad6a_303","name":"027d","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F update the v2f struct to use the sample modifier for the\n\u002F\u002F interpolated ray dir and origin vectors to force fragment\n\u002F\u002F shader to run for each subsample and for the interpolated\n\u002F\u002F values to get computed uniquely for each subsample position\nstruct v2f\n{\n  float4 pos : SV_POSITION;\n  sample float3 rayDir : TEXCOORD0;\n  sample float3 rayOrigin : TEXCOORD1;\n  UNITY_VERTEX_INPUT_INSTANCE_ID\n};","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_304":{"__typename":"Paragraph","id":"3f23ec7cad6a_304","name":"968e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F add this inside the CGPROGRAM blocks for the passes as the\n\u002F\u002F sample modifier is a Shader Model 5.0 feature\n#pragma target 5.0","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_305":{"__typename":"Paragraph","id":"3f23ec7cad6a_305","name":"af58","type":"PRE","href":null,"layout":null,"metadata":null,"text":"\u002F\u002F and you may want to bias the texture mip level\n\u002F\u002F because why not if we're already super sampling!\nhalf4 col = tex2Dbias(_MainTex, float4(uv, 0, -1));","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*X00KxPSdiKe8HIMVYa1Pvw.png":{"__typename":"ImageMetadata","id":"1*X00KxPSdiKe8HIMVYa1Pvw.png","originalHeight":420,"originalWidth":680,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_306":{"__typename":"Paragraph","id":"3f23ec7cad6a_306","name":"2365","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*X00KxPSdiKe8HIMVYa1Pvw.png"},"text":"4x MSAA with Alpha to Coverage vs shader forced to render per subsample.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*x3I-gYUzsShsJlpXkXGlkQ.png":{"__typename":"ImageMetadata","id":"1*x3I-gYUzsShsJlpXkXGlkQ.png","originalHeight":420,"originalWidth":690,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:3f23ec7cad6a_307":{"__typename":"Paragraph","id":"3f23ec7cad6a_307","name":"43aa","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*x3I-gYUzsShsJlpXkXGlkQ.png"},"text":"4x MSAA with original shader vs Alpha to Coverage vs Forced Super Sampling intersection comparison.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_308":{"__typename":"Paragraph","id":"3f23ec7cad6a_308","name":"873e","type":"H4","href":null,"layout":null,"metadata":null,"text":"Deferred Rendering","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:3f23ec7cad6a_309":{"__typename":"Paragraph","id":"3f23ec7cad6a_309","name":"2654","type":"P","href":null,"layout":null,"metadata":null,"text":"I didn’t include a deferred rendering pass in the example shader. There’s no reason why this wouldn’t work with deferred though. It’d be a lot easier of a shader to write even. But I was trying to keep the shader as straight forward as possible.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Tag:shaders":{"__typename":"Tag","id":"shaders","displayTitle":"Shaders","normalizedTagSlug":"shaders"},"Tag:graphics-programming":{"__typename":"Tag","id":"graphics-programming","displayTitle":"Graphics Programming","normalizedTagSlug":"graphics-programming"},"Tag:unity-game-development":{"__typename":"Tag","id":"unity-game-development","displayTitle":"Unity Game Development","normalizedTagSlug":"unity-game-development"},"Post:13c92025570c":{"__typename":"Post","id":"13c92025570c","collection":null,"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"cf7b","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"087d","startIndex":7,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"eda8","startIndex":18,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"b8a3","startIndex":38,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"f13d","startIndex":51,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d838","startIndex":73,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"9508","startIndex":85,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"f489","startIndex":142,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"2b85","startIndex":224,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"cfdf","startIndex":228,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"d5fd","startIndex":254,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"1701","startIndex":272,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"1dd5","startIndex":275,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:3f23ec7cad6a_0"},{"__ref":"Paragraph:3f23ec7cad6a_1"},{"__ref":"Paragraph:3f23ec7cad6a_2"},{"__ref":"Paragraph:3f23ec7cad6a_3"},{"__ref":"Paragraph:3f23ec7cad6a_4"},{"__ref":"Paragraph:3f23ec7cad6a_5"},{"__ref":"Paragraph:3f23ec7cad6a_6"},{"__ref":"Paragraph:3f23ec7cad6a_7"},{"__ref":"Paragraph:3f23ec7cad6a_8"},{"__ref":"Paragraph:3f23ec7cad6a_9"},{"__ref":"Paragraph:3f23ec7cad6a_10"},{"__ref":"Paragraph:3f23ec7cad6a_11"},{"__ref":"Paragraph:3f23ec7cad6a_12"},{"__ref":"Paragraph:3f23ec7cad6a_13"},{"__ref":"Paragraph:3f23ec7cad6a_14"},{"__ref":"Paragraph:3f23ec7cad6a_15"},{"__ref":"Paragraph:3f23ec7cad6a_16"},{"__ref":"Paragraph:3f23ec7cad6a_17"},{"__ref":"Paragraph:3f23ec7cad6a_18"},{"__ref":"Paragraph:3f23ec7cad6a_19"},{"__ref":"Paragraph:3f23ec7cad6a_20"},{"__ref":"Paragraph:3f23ec7cad6a_21"},{"__ref":"Paragraph:3f23ec7cad6a_22"},{"__ref":"Paragraph:3f23ec7cad6a_23"},{"__ref":"Paragraph:3f23ec7cad6a_24"},{"__ref":"Paragraph:3f23ec7cad6a_25"},{"__ref":"Paragraph:3f23ec7cad6a_26"},{"__ref":"Paragraph:3f23ec7cad6a_27"},{"__ref":"Paragraph:3f23ec7cad6a_28"},{"__ref":"Paragraph:3f23ec7cad6a_29"},{"__ref":"Paragraph:3f23ec7cad6a_30"},{"__ref":"Paragraph:3f23ec7cad6a_31"},{"__ref":"Paragraph:3f23ec7cad6a_32"},{"__ref":"Paragraph:3f23ec7cad6a_33"},{"__ref":"Paragraph:3f23ec7cad6a_34"},{"__ref":"Paragraph:3f23ec7cad6a_35"},{"__ref":"Paragraph:3f23ec7cad6a_36"},{"__ref":"Paragraph:3f23ec7cad6a_37"},{"__ref":"Paragraph:3f23ec7cad6a_38"},{"__ref":"Paragraph:3f23ec7cad6a_39"},{"__ref":"Paragraph:3f23ec7cad6a_40"},{"__ref":"Paragraph:3f23ec7cad6a_41"},{"__ref":"Paragraph:3f23ec7cad6a_42"},{"__ref":"Paragraph:3f23ec7cad6a_43"},{"__ref":"Paragraph:3f23ec7cad6a_44"},{"__ref":"Paragraph:3f23ec7cad6a_45"},{"__ref":"Paragraph:3f23ec7cad6a_46"},{"__ref":"Paragraph:3f23ec7cad6a_47"},{"__ref":"Paragraph:3f23ec7cad6a_48"},{"__ref":"Paragraph:3f23ec7cad6a_49"},{"__ref":"Paragraph:3f23ec7cad6a_50"},{"__ref":"Paragraph:3f23ec7cad6a_51"},{"__ref":"Paragraph:3f23ec7cad6a_52"},{"__ref":"Paragraph:3f23ec7cad6a_53"},{"__ref":"Paragraph:3f23ec7cad6a_54"},{"__ref":"Paragraph:3f23ec7cad6a_55"},{"__ref":"Paragraph:3f23ec7cad6a_56"},{"__ref":"Paragraph:3f23ec7cad6a_57"},{"__ref":"Paragraph:3f23ec7cad6a_58"},{"__ref":"Paragraph:3f23ec7cad6a_59"},{"__ref":"Paragraph:3f23ec7cad6a_60"},{"__ref":"Paragraph:3f23ec7cad6a_61"},{"__ref":"Paragraph:3f23ec7cad6a_62"},{"__ref":"Paragraph:3f23ec7cad6a_63"},{"__ref":"Paragraph:3f23ec7cad6a_64"},{"__ref":"Paragraph:3f23ec7cad6a_65"},{"__ref":"Paragraph:3f23ec7cad6a_66"},{"__ref":"Paragraph:3f23ec7cad6a_67"},{"__ref":"Paragraph:3f23ec7cad6a_68"},{"__ref":"Paragraph:3f23ec7cad6a_69"},{"__ref":"Paragraph:3f23ec7cad6a_70"},{"__ref":"Paragraph:3f23ec7cad6a_71"},{"__ref":"Paragraph:3f23ec7cad6a_72"},{"__ref":"Paragraph:3f23ec7cad6a_73"},{"__ref":"Paragraph:3f23ec7cad6a_74"},{"__ref":"Paragraph:3f23ec7cad6a_75"},{"__ref":"Paragraph:3f23ec7cad6a_76"},{"__ref":"Paragraph:3f23ec7cad6a_77"},{"__ref":"Paragraph:3f23ec7cad6a_78"},{"__ref":"Paragraph:3f23ec7cad6a_79"},{"__ref":"Paragraph:3f23ec7cad6a_80"},{"__ref":"Paragraph:3f23ec7cad6a_81"},{"__ref":"Paragraph:3f23ec7cad6a_82"},{"__ref":"Paragraph:3f23ec7cad6a_83"},{"__ref":"Paragraph:3f23ec7cad6a_84"},{"__ref":"Paragraph:3f23ec7cad6a_85"},{"__ref":"Paragraph:3f23ec7cad6a_86"},{"__ref":"Paragraph:3f23ec7cad6a_87"},{"__ref":"Paragraph:3f23ec7cad6a_88"},{"__ref":"Paragraph:3f23ec7cad6a_89"},{"__ref":"Paragraph:3f23ec7cad6a_90"},{"__ref":"Paragraph:3f23ec7cad6a_91"},{"__ref":"Paragraph:3f23ec7cad6a_92"},{"__ref":"Paragraph:3f23ec7cad6a_93"},{"__ref":"Paragraph:3f23ec7cad6a_94"},{"__ref":"Paragraph:3f23ec7cad6a_95"},{"__ref":"Paragraph:3f23ec7cad6a_96"},{"__ref":"Paragraph:3f23ec7cad6a_97"},{"__ref":"Paragraph:3f23ec7cad6a_98"},{"__ref":"Paragraph:3f23ec7cad6a_99"},{"__ref":"Paragraph:3f23ec7cad6a_100"},{"__ref":"Paragraph:3f23ec7cad6a_101"},{"__ref":"Paragraph:3f23ec7cad6a_102"},{"__ref":"Paragraph:3f23ec7cad6a_103"},{"__ref":"Paragraph:3f23ec7cad6a_104"},{"__ref":"Paragraph:3f23ec7cad6a_105"},{"__ref":"Paragraph:3f23ec7cad6a_106"},{"__ref":"Paragraph:3f23ec7cad6a_107"},{"__ref":"Paragraph:3f23ec7cad6a_108"},{"__ref":"Paragraph:3f23ec7cad6a_109"},{"__ref":"Paragraph:3f23ec7cad6a_110"},{"__ref":"Paragraph:3f23ec7cad6a_111"},{"__ref":"Paragraph:3f23ec7cad6a_112"},{"__ref":"Paragraph:3f23ec7cad6a_113"},{"__ref":"Paragraph:3f23ec7cad6a_114"},{"__ref":"Paragraph:3f23ec7cad6a_115"},{"__ref":"Paragraph:3f23ec7cad6a_116"},{"__ref":"Paragraph:3f23ec7cad6a_117"},{"__ref":"Paragraph:3f23ec7cad6a_118"},{"__ref":"Paragraph:3f23ec7cad6a_119"},{"__ref":"Paragraph:3f23ec7cad6a_120"},{"__ref":"Paragraph:3f23ec7cad6a_121"},{"__ref":"Paragraph:3f23ec7cad6a_122"},{"__ref":"Paragraph:3f23ec7cad6a_123"},{"__ref":"Paragraph:3f23ec7cad6a_124"},{"__ref":"Paragraph:3f23ec7cad6a_125"},{"__ref":"Paragraph:3f23ec7cad6a_126"},{"__ref":"Paragraph:3f23ec7cad6a_127"},{"__ref":"Paragraph:3f23ec7cad6a_128"},{"__ref":"Paragraph:3f23ec7cad6a_129"},{"__ref":"Paragraph:3f23ec7cad6a_130"},{"__ref":"Paragraph:3f23ec7cad6a_131"},{"__ref":"Paragraph:3f23ec7cad6a_132"},{"__ref":"Paragraph:3f23ec7cad6a_133"},{"__ref":"Paragraph:3f23ec7cad6a_134"},{"__ref":"Paragraph:3f23ec7cad6a_135"},{"__ref":"Paragraph:3f23ec7cad6a_136"},{"__ref":"Paragraph:3f23ec7cad6a_137"},{"__ref":"Paragraph:3f23ec7cad6a_138"},{"__ref":"Paragraph:3f23ec7cad6a_139"},{"__ref":"Paragraph:3f23ec7cad6a_140"},{"__ref":"Paragraph:3f23ec7cad6a_141"},{"__ref":"Paragraph:3f23ec7cad6a_142"},{"__ref":"Paragraph:3f23ec7cad6a_143"},{"__ref":"Paragraph:3f23ec7cad6a_144"},{"__ref":"Paragraph:3f23ec7cad6a_145"},{"__ref":"Paragraph:3f23ec7cad6a_146"},{"__ref":"Paragraph:3f23ec7cad6a_147"},{"__ref":"Paragraph:3f23ec7cad6a_148"},{"__ref":"Paragraph:3f23ec7cad6a_149"},{"__ref":"Paragraph:3f23ec7cad6a_150"},{"__ref":"Paragraph:3f23ec7cad6a_151"},{"__ref":"Paragraph:3f23ec7cad6a_152"},{"__ref":"Paragraph:3f23ec7cad6a_153"},{"__ref":"Paragraph:3f23ec7cad6a_154"},{"__ref":"Paragraph:3f23ec7cad6a_155"},{"__ref":"Paragraph:3f23ec7cad6a_156"},{"__ref":"Paragraph:3f23ec7cad6a_157"},{"__ref":"Paragraph:3f23ec7cad6a_158"},{"__ref":"Paragraph:3f23ec7cad6a_159"},{"__ref":"Paragraph:3f23ec7cad6a_160"},{"__ref":"Paragraph:3f23ec7cad6a_161"},{"__ref":"Paragraph:3f23ec7cad6a_162"},{"__ref":"Paragraph:3f23ec7cad6a_163"},{"__ref":"Paragraph:3f23ec7cad6a_164"},{"__ref":"Paragraph:3f23ec7cad6a_165"},{"__ref":"Paragraph:3f23ec7cad6a_166"},{"__ref":"Paragraph:3f23ec7cad6a_167"},{"__ref":"Paragraph:3f23ec7cad6a_168"},{"__ref":"Paragraph:3f23ec7cad6a_169"},{"__ref":"Paragraph:3f23ec7cad6a_170"},{"__ref":"Paragraph:3f23ec7cad6a_171"},{"__ref":"Paragraph:3f23ec7cad6a_172"},{"__ref":"Paragraph:3f23ec7cad6a_173"},{"__ref":"Paragraph:3f23ec7cad6a_174"},{"__ref":"Paragraph:3f23ec7cad6a_175"},{"__ref":"Paragraph:3f23ec7cad6a_176"},{"__ref":"Paragraph:3f23ec7cad6a_177"},{"__ref":"Paragraph:3f23ec7cad6a_178"},{"__ref":"Paragraph:3f23ec7cad6a_179"},{"__ref":"Paragraph:3f23ec7cad6a_180"},{"__ref":"Paragraph:3f23ec7cad6a_181"},{"__ref":"Paragraph:3f23ec7cad6a_182"},{"__ref":"Paragraph:3f23ec7cad6a_183"},{"__ref":"Paragraph:3f23ec7cad6a_184"},{"__ref":"Paragraph:3f23ec7cad6a_185"},{"__ref":"Paragraph:3f23ec7cad6a_186"},{"__ref":"Paragraph:3f23ec7cad6a_187"},{"__ref":"Paragraph:3f23ec7cad6a_188"},{"__ref":"Paragraph:3f23ec7cad6a_189"},{"__ref":"Paragraph:3f23ec7cad6a_190"},{"__ref":"Paragraph:3f23ec7cad6a_191"},{"__ref":"Paragraph:3f23ec7cad6a_192"},{"__ref":"Paragraph:3f23ec7cad6a_193"},{"__ref":"Paragraph:3f23ec7cad6a_194"},{"__ref":"Paragraph:3f23ec7cad6a_195"},{"__ref":"Paragraph:3f23ec7cad6a_196"},{"__ref":"Paragraph:3f23ec7cad6a_197"},{"__ref":"Paragraph:3f23ec7cad6a_198"},{"__ref":"Paragraph:3f23ec7cad6a_199"},{"__ref":"Paragraph:3f23ec7cad6a_200"},{"__ref":"Paragraph:3f23ec7cad6a_201"},{"__ref":"Paragraph:3f23ec7cad6a_202"},{"__ref":"Paragraph:3f23ec7cad6a_203"},{"__ref":"Paragraph:3f23ec7cad6a_204"},{"__ref":"Paragraph:3f23ec7cad6a_205"},{"__ref":"Paragraph:3f23ec7cad6a_206"},{"__ref":"Paragraph:3f23ec7cad6a_207"},{"__ref":"Paragraph:3f23ec7cad6a_208"},{"__ref":"Paragraph:3f23ec7cad6a_209"},{"__ref":"Paragraph:3f23ec7cad6a_210"},{"__ref":"Paragraph:3f23ec7cad6a_211"},{"__ref":"Paragraph:3f23ec7cad6a_212"},{"__ref":"Paragraph:3f23ec7cad6a_213"},{"__ref":"Paragraph:3f23ec7cad6a_214"},{"__ref":"Paragraph:3f23ec7cad6a_215"},{"__ref":"Paragraph:3f23ec7cad6a_216"},{"__ref":"Paragraph:3f23ec7cad6a_217"},{"__ref":"Paragraph:3f23ec7cad6a_218"},{"__ref":"Paragraph:3f23ec7cad6a_219"},{"__ref":"Paragraph:3f23ec7cad6a_220"},{"__ref":"Paragraph:3f23ec7cad6a_221"},{"__ref":"Paragraph:3f23ec7cad6a_222"},{"__ref":"Paragraph:3f23ec7cad6a_223"},{"__ref":"Paragraph:3f23ec7cad6a_224"},{"__ref":"Paragraph:3f23ec7cad6a_225"},{"__ref":"Paragraph:3f23ec7cad6a_226"},{"__ref":"Paragraph:3f23ec7cad6a_227"},{"__ref":"Paragraph:3f23ec7cad6a_228"},{"__ref":"Paragraph:3f23ec7cad6a_229"},{"__ref":"Paragraph:3f23ec7cad6a_230"},{"__ref":"Paragraph:3f23ec7cad6a_231"},{"__ref":"Paragraph:3f23ec7cad6a_232"},{"__ref":"Paragraph:3f23ec7cad6a_233"},{"__ref":"Paragraph:3f23ec7cad6a_234"},{"__ref":"Paragraph:3f23ec7cad6a_235"},{"__ref":"Paragraph:3f23ec7cad6a_236"},{"__ref":"Paragraph:3f23ec7cad6a_237"},{"__ref":"Paragraph:3f23ec7cad6a_238"},{"__ref":"Paragraph:3f23ec7cad6a_239"},{"__ref":"Paragraph:3f23ec7cad6a_240"},{"__ref":"Paragraph:3f23ec7cad6a_241"},{"__ref":"Paragraph:3f23ec7cad6a_242"},{"__ref":"Paragraph:3f23ec7cad6a_243"},{"__ref":"Paragraph:3f23ec7cad6a_244"},{"__ref":"Paragraph:3f23ec7cad6a_245"},{"__ref":"Paragraph:3f23ec7cad6a_246"},{"__ref":"Paragraph:3f23ec7cad6a_247"},{"__ref":"Paragraph:3f23ec7cad6a_248"},{"__ref":"Paragraph:3f23ec7cad6a_249"},{"__ref":"Paragraph:3f23ec7cad6a_250"},{"__ref":"Paragraph:3f23ec7cad6a_251"},{"__ref":"Paragraph:3f23ec7cad6a_252"},{"__ref":"Paragraph:3f23ec7cad6a_253"},{"__ref":"Paragraph:3f23ec7cad6a_254"},{"__ref":"Paragraph:3f23ec7cad6a_255"},{"__ref":"Paragraph:3f23ec7cad6a_256"},{"__ref":"Paragraph:3f23ec7cad6a_257"},{"__ref":"Paragraph:3f23ec7cad6a_258"},{"__ref":"Paragraph:3f23ec7cad6a_259"},{"__ref":"Paragraph:3f23ec7cad6a_260"},{"__ref":"Paragraph:3f23ec7cad6a_261"},{"__ref":"Paragraph:3f23ec7cad6a_262"},{"__ref":"Paragraph:3f23ec7cad6a_263"},{"__ref":"Paragraph:3f23ec7cad6a_264"},{"__ref":"Paragraph:3f23ec7cad6a_265"},{"__ref":"Paragraph:3f23ec7cad6a_266"},{"__ref":"Paragraph:3f23ec7cad6a_267"},{"__ref":"Paragraph:3f23ec7cad6a_268"},{"__ref":"Paragraph:3f23ec7cad6a_269"},{"__ref":"Paragraph:3f23ec7cad6a_270"},{"__ref":"Paragraph:3f23ec7cad6a_271"},{"__ref":"Paragraph:3f23ec7cad6a_272"},{"__ref":"Paragraph:3f23ec7cad6a_273"},{"__ref":"Paragraph:3f23ec7cad6a_274"},{"__ref":"Paragraph:3f23ec7cad6a_275"},{"__ref":"Paragraph:3f23ec7cad6a_276"},{"__ref":"Paragraph:3f23ec7cad6a_277"},{"__ref":"Paragraph:3f23ec7cad6a_278"},{"__ref":"Paragraph:3f23ec7cad6a_279"},{"__ref":"Paragraph:3f23ec7cad6a_280"},{"__ref":"Paragraph:3f23ec7cad6a_281"},{"__ref":"Paragraph:3f23ec7cad6a_282"},{"__ref":"Paragraph:3f23ec7cad6a_283"},{"__ref":"Paragraph:3f23ec7cad6a_284"},{"__ref":"Paragraph:3f23ec7cad6a_285"},{"__ref":"Paragraph:3f23ec7cad6a_286"},{"__ref":"Paragraph:3f23ec7cad6a_287"},{"__ref":"Paragraph:3f23ec7cad6a_288"},{"__ref":"Paragraph:3f23ec7cad6a_289"},{"__ref":"Paragraph:3f23ec7cad6a_290"},{"__ref":"Paragraph:3f23ec7cad6a_291"},{"__ref":"Paragraph:3f23ec7cad6a_292"},{"__ref":"Paragraph:3f23ec7cad6a_293"},{"__ref":"Paragraph:3f23ec7cad6a_294"},{"__ref":"Paragraph:3f23ec7cad6a_295"},{"__ref":"Paragraph:3f23ec7cad6a_296"},{"__ref":"Paragraph:3f23ec7cad6a_297"},{"__ref":"Paragraph:3f23ec7cad6a_298"},{"__ref":"Paragraph:3f23ec7cad6a_299"},{"__ref":"Paragraph:3f23ec7cad6a_300"},{"__ref":"Paragraph:3f23ec7cad6a_301"},{"__ref":"Paragraph:3f23ec7cad6a_302"},{"__ref":"Paragraph:3f23ec7cad6a_303"},{"__ref":"Paragraph:3f23ec7cad6a_304"},{"__ref":"Paragraph:3f23ec7cad6a_305"},{"__ref":"Paragraph:3f23ec7cad6a_306"},{"__ref":"Paragraph:3f23ec7cad6a_307"},{"__ref":"Paragraph:3f23ec7cad6a_308"},{"__ref":"Paragraph:3f23ec7cad6a_309"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:d4d33ac3d661"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fbgolus.medium.com\u002Frendering-a-sphere-on-a-quad-13c92025570c","primaryTopic":null,"topics":[],"isPublished":true,"latestPublishedVersion":"3f23ec7cad6a","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":6},"createdAt":1609720655141,"firstPublishedAt":1610244191120,"latestPublishedAt":1716572249084,"clapCount":118,"allowResponses":true,"isLimitedState":false,"title":"Rendering a Sphere on a Quad","isSeries":false,"sequence":null,"uniqueSlug":"rendering-a-sphere-on-a-quad-13c92025570c","socialTitle":"","socialDek":"","noIndex":null,"canonicalUrl":"","metaDescription":"","readingTime":35.50660377358491,"previewContent":{"__typename":"PreviewContent","subtitle":"Making the Sphere Impostor Feel More Competent"},"previewImage":{"__ref":"ImageMetadata:1*5VfRfBEZqnNdt1F7o0yPBA.png"},"isShortform":false,"seoTitle":"","updatedAt":1716572249084,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:shaders"},{"__ref":"Tag:graphics-programming"},{"__ref":"Tag:unity-game-development"}],"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"en","wordCount":8813,"layerCake":0}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"HIT"}}</script><script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/manifest.59d70eb5.js"></script><script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/4328.87c721ec.js"></script><script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/main.07657b32.js"></script><script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/instrumentation.4ddbf12e.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/reporting.2021fe63.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/4398.db4d4378.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/7883.0e445e04.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/9281.e9be8bce.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/7111.b294e9da.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/6481.9389fa5e.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8695.36550928.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8978.98aa973b.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/3418.eb013b5a.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/3894.e3d01e2c.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/5514.32e692f6.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/5203.e7f058c5.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/7098.93054372.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8051.91b39f98.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8558.54b7dad5.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/1711.7605eb3e.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8597.a4328caa.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/9174.485dada8.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8883.2f95bbf4.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/705.88ee64f1.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/5781.9f2ea9e7.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/8580.feeb2549.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/6046.f9be485b.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/500.f212d13b.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/9408.22b56993.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/6605.84e81b15.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/6637.8a411a8c.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/7421.3f94f5ea.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/4667.b1d9f300.chunk.js"></script>
<script src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/PostPage.MainContent.04f33268.chunk.js"></script><script>window.main();</script><script defer="defer" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/vef91dfe02fce4ee0ad053f6de4f175db1715022073587" integrity="sha512-sDIX0kl85v1Cl5tu4WGLZCpH/dV9OHbA4YlKCuCiMmOQIk4buzoYDZSFj+TvC71mOBLh8CDC/REgE0GX0xcbjA==" data-cf-beacon="{&quot;rayId&quot;:&quot;88fa8bb7e83160c4&quot;,&quot;version&quot;:&quot;2024.4.1&quot;,&quot;token&quot;:&quot;0b5f665943484354a59c39c6833f7078&quot;}" crossorigin="anonymous"></script>
<div><div class="grecaptcha-badge" data-style="bottomright" style="width: 256px; height: 60px; display: block; transition: right 0.3s; position: fixed; bottom: 14px; right: -186px; box-shadow: gray 0px 0px 5px; border-radius: 2px; overflow: hidden;"><div class="grecaptcha-logo"><iframe title="reCAPTCHA" width="256" height="60" role="presentation" name="a-21c75g1hholu" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox allow-storage-access-by-user-activation" src="Rendering%20a%20Sphere%20on%20a%20Quad.%20Making%20the%20Sphere%20Impostor%20Feel%20More%E2%80%A6%20by%20Ben%20Golus%20Medium_files/anchor.htm"></iframe></div><div class="grecaptcha-error"></div><textarea id="g-recaptcha-response-100000" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div><iframe style="display: none;"></iframe></div></body></html>