<!DOCTYPE html>
<html lang="ru">

  <head>
    <title>Глобальное освещение с использованием трассировки вокселей конусами &#x2F; Хабр</title>
<meta property="fb:app_id" content="444736788986613">
<meta property="fb:pages" content="472597926099084">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@habr_com">
<meta property="og:site_name" content="Хабр">
<link href="https://habr.com/ru/rss/post/353740/?fl=ru" type="application/rss+xml" title rel="alternate" name="rss">
<link href="https://habr.com/ru/companies/vk/articles/353740/" rel="canonical" data-hid="e3fa780">
<link rel="image_src" href="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/" data-hid="2a79c45">
<meta property="og:title" content="Глобальное освещение с использованием трассировки вокселей конусами">
<meta name="twitter:title" content="Глобальное освещение с использованием трассировки вокселей конусами">
<meta name="aiturec:title" content="Глобальное освещение с использованием трассировки вокселей конусами">
<meta name="description" content="В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....">
<meta itemprop="description" content="В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....">
<meta property="og:description" content="В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....">
<meta name="twitter:description" content="В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....">
<meta property="aiturec:description" content="В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....">
<meta itemprop="image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/">
<meta property="og:image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="aiturec:image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/">
<meta name="twitter:image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/">
<meta property="vk:image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/?format=vk">
<meta property="vk:image" content="https://habr.com/share/publication/353740/ed1a03e82ea638136d826ac1d79d0d67/?format=vk?format=vk">
<meta property="aiturec:item_id" content="353740">
<meta property="aiturec:datetime" content="2018-04-19T12:48:28.000Z">
<meta content="https://habr.com/ru/companies/vk/articles/353740/" property="og:url">
<meta property="og:type" content="article">
<meta property="og:locale" content="ru_RU">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="keywords" content="освещение, Voxel Cone Tracing, компьютерная графика">
<script type="application/ld+json" data-hid="1e0f0a2">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/vk\/articles\/353740\/"},"headline":"Глобальное освещение с использованием трассировки вокселей конусами","datePublished":"2018-04-19T15:48:28+03:00","dateModified":"2018-04-19T15:56:22+03:00","author":{"@type":"Person","name":"Валентин Донцов"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого \/ ambient) освещения, применяемого в некоторых играх и других про...","url":"https:\/\/habr.com\/ru\/companies\/vk\/articles\/353740\/#post-content-body","about":["c_vk","h_algorithms","h_programming","h_gamedev","f_develop"],"image":["https:\/\/habrastorage.org\/webt\/do\/xf\/ku\/doxfkuomv9hf057k6gzpg_bbyd4.png","https:\/\/habrastorage.org\/webt\/ni\/sb\/gx\/nisbgxdludojmoycwu_6zjjfp94.png","https:\/\/habrastorage.org\/webt\/ph\/2h\/vu\/ph2hvu9ipi3w1qejvhjfx-6jmdk.png","https:\/\/habrastorage.org\/webt\/av\/dv\/r2\/avdvr25o1jmpjrwh8vqdtziy7se.png","https:\/\/habrastorage.org\/webt\/sp\/ps\/ae\/sppsaet4gpibjrhjuoyw24fsyay.png","https:\/\/habrastorage.org\/webt\/oa\/2e\/t1\/oa2et1hc3eol3yrmm4vvrxmkctu.png","https:\/\/habrastorage.org\/webt\/hd\/tu\/q1\/hdtuq143ovkt67za5y-09pxattw.png","https:\/\/habrastorage.org\/webt\/dq\/-q\/zy\/dq-qzycuif4dsfmeevyltf23pv8.png","https:\/\/habrastorage.org\/webt\/7x\/mh\/ci\/7xmhcikd5lnuria3k9xp1fju42i.png","https:\/\/habrastorage.org\/webt\/9l\/_l\/xv\/9l_lxveo4xk3ngddgle8bfbi0ze.png","https:\/\/habrastorage.org\/webt\/3g\/tb\/d1\/3gtbd1n2tiarwetmycl_bap-p2o.png","https:\/\/habrastorage.org\/webt\/hq\/uj\/r6\/hqujr6cn1tcrsh9pqicgblf3afy.png","https:\/\/habrastorage.org\/webt\/xs\/fq\/bo\/xsfqbowfk1zkrsvwumg5lfdvwpk.png","https:\/\/habrastorage.org\/webt\/ce\/5v\/rh\/ce5vrhmsnjudwod7nplfbtns4oc.png","https:\/\/habrastorage.org\/webt\/z_\/rc\/b7\/z_rcb7_hnkjupwtab6vdm9kczra.png","https:\/\/habrastorage.org\/webt\/_s\/9f\/c5\/_s9fc5vnfmxjwtohxjoblatvnc0.png","https:\/\/habrastorage.org\/webt\/tx\/nm\/dc\/txnmdc2mj0v7tjky37swz223hay.png","https:\/\/habrastorage.org\/webt\/pr\/cj\/oa\/prcjoa1npq1heopoywfpkvdxpua.png","https:\/\/habrastorage.org\/webt\/lq\/s9\/wq\/lqs9wqp_yd4ggilfthkbtondtsy.png","https:\/\/habrastorage.org\/webt\/ka\/5r\/j5\/ka5rj5az9iuqnwacsn2-q0aigzk.png","https:\/\/habrastorage.org\/webt\/jc\/gq\/cy\/jcgqcyka7-fjkivpta7g0jjlly4.png","https:\/\/habrastorage.org\/webt\/sj\/is\/ie\/sjisiedurfjl0i5q3kzh_8ay4as.png","https:\/\/habrastorage.org\/webt\/cv\/px\/ak\/cvpxakjzyvycjxxd1bpay-ptb_o.png","https:\/\/habrastorage.org\/webt\/tp\/9t\/et\/tp9tetblycaiahptuxtlutemti8.png","https:\/\/habrastorage.org\/webt\/ij\/ie\/5n\/ijie5nk33gqalek7hbobxhsmlym.png","https:\/\/habrastorage.org\/webt\/b9\/t_\/ev\/b9t_evpazubphu-tn9ylav06cfw.png","https:\/\/habrastorage.org\/webt\/vo\/kb\/ju\/vokbjusy6l1bnclgllg7ti8nlc8.png","https:\/\/habrastorage.org\/webt\/-v\/sy\/sw\/-vsysw1jb0hthbvknsy_t2mij-k.png","https:\/\/habrastorage.org\/webt\/c3\/py\/nf\/c3pynfn4u27dhtewd4bi3qg3vqy.png","https:\/\/habrastorage.org\/webt\/vo\/vv\/dj\/vovvdjkgrzvolz9zi1qzxq24z9o.png","https:\/\/habrastorage.org\/webt\/iq\/jj\/gx\/iqjjgxcayddeo2rjmhjzogpu7mo.png","https:\/\/habrastorage.org\/webt\/iz\/a6\/eh\/iza6ehbdgctiymft3a6dksjupm4.png","https:\/\/habrastorage.org\/webt\/82\/xg\/ty\/82xgty-qwgptlroykcda2s6siso.png","https:\/\/habrastorage.org\/webt\/ya\/gc\/vw\/yagcvwcbmbuaft0db2xpnczcsw4.png","https:\/\/habrastorage.org\/webt\/iw\/xu\/0f\/iwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg"]}</script>
    <meta charset="UTF-8">
    <meta name="viewport"
      content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
    <meta name="referrer" content="unsafe-url">
    <style>
      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmojLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvk4jLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5VvmYjLazX3dGTP.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 500;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnZKveRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      /* cyrillic-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSxf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
      }

      /* cyrillic */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eQhf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
      }

      /* latin-ext */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eSBf6Xl7Gl3LX.woff2) format('woff2');
        unicode-range: U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
      }

      /* latin */
      @font-face {
        font-family: 'Fira Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://fonts.gstatic.com/s/firasans/v17/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
    <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" as="style" media="(prefers-color-scheme: light)" /><link rel="preload" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" as="style" media="(prefers-color-scheme: dark)" /><link id="light-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/light-v1.css" media="(prefers-color-scheme: light)" /><link id="dark-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/dark-v1.css" media="(prefers-color-scheme: dark)" />
    <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.c152fe4f5d7ce3d2b83f989c67212195.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
    <style>
      .grecaptcha-badge {
        visibility: hidden;
      }
    </style>
    <meta name="habr-version" content="2.209.2">
    
    <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
    <meta name="msapplication-TileColor" content="#629FBC">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png">
    <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png">
    <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png">
    <link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png">
    <link rel="apple-touch-icon" type="image/png" sizes="256x256" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png">
    <link rel="apple-touch-startup-image"
      media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
      href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png">
    <link rel="mask-icon" color="#77a2b6" href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg">
    <link crossorigin="use-credentials" href="/manifest.webmanifest" rel="manifest">
    <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
    <script>window.yaContextCb = window.yaContextCb || []</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.0ab1a98f.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.31e36789.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.dcc5983d.js" as="script"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.04465f7c.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.31e36789.css"></head>
  <body>
    
    <div id="mount"><div id="app" data-async-called="true"><div class="tm-layout__wrapper"><!--[--><!----><div></div><!----><header class="tm-header" data-test-id="header"><div class="tm-page-width"><!--[--><div class="tm-header__container"><!----><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a><span style="display:none;" class="tm-header__beta-sign">β</span></span><!--[--><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><!--[--><button class="tm-header__dropdown-toggle"><svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16"><title>Открыть список</title><use xlink:href="/img/megazord-v28.7909a852..svg#arrow-down"></use></svg></button><!--]--></div><!----></div><a href="/ru/sandbox/start/" class="tm-header__become-author-btn">Как стать автором</a><div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature"><!----></div><!----><!--]--><!----></div><!--]--></div></header><div class="tm-layout"><div class="tm-page-progress-bar"></div><div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true"><div class="tm-page-width"><!--[--><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]--><!--]--></nav></div></div><div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24"><title>Поиск</title><use xlink:href="/img/megazord-v28.7909a852..svg#search"></use></svg></a><!----><!----><div class="tm-header-user-menu__item tm-header-user-menu__write"><div><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24"><title>Написать публикацию</title><use xlink:href="/img/megazord-v28.7909a852..svg#write"></use></svg></div><!----></div><!--[--><div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24"><title>Настройки</title><use xlink:href="/img/megazord-v28.7909a852..svg#page-settings"></use></svg></button></div><a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/vk/articles/353740/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><!--[--><button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!----><!--teleport start--><!--teleport end--><!----></div></div><!--]--></div></div><!----><div class="tm-page-width"><!--[--><!--]--></div><main class="tm-layout__container"><div class="tm-page" hl="ru" companyname="vk" data-async-called="true"><div class="tm-page-width"><!--[--><div class="tm-page__header"><!--[--><div class="tm-company-card__branding tm-company-card__branding_loading tm-company-article__branding" data-test-id="company-card-branding"><div class="tm-company-card__branding-placeholder"><!----></div><a href="https://vk.com/vkteam"><img class="tm-company-card__branding-image" src="//habrastorage.org/getpro/habr/branding/174/2c4/3a5/1742c43a5b504987a0fadf577a0bd4de.png"></a></div><!--]--></div><div class="tm-page__wrapper"><div class="tm-page__main_has-sidebar tm-page__main"><div class="pull-down"><!----><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title><use xlink:href="/img/megazord-v28.7909a852..svg#pull-arrow"></use></svg></div></div><!--[--><!--[--><div class="tm-article-presenter"><!--[--><!--[--><!----><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a href="/ru/companies/vk/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="48" src="//habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="48"></div></a><!--[--><a class="tm-grade tm-company-card__rating" href="https://career.habr.com/companies/vk" rel="noopener" target="_blank"><div class="tm-counter-container"><div class="tm-counter-container__header"><!--[--><!--[--><svg class="tm-svg-img tm-svg-grade__icon" height="18" width="18"><title>Оценка компании на Хабр Карьере</title><use xlink:href="/img/megazord-v28.7909a852..svg#grade"></use></svg><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-grade"><!----><div class="tm-votes-lever__score tm-votes-lever__score_appearance-grade tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_grade tm-votes-lever__score-counter" data-test-id="votes-score-counter">3.75</span></span><!--]--></div><!----></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text_variant-grade tm-rating__text">Оценка</span><!--]--></div></div></a><div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">319.74</span></span><!--]--></div><!----></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div><!----><!--]--></div><div class="tm-company-card__info"><a href="/ru/companies/vk/profile/" class="tm-company-card__name"><span>VK</span></a><div class="tm-company-card__description">Технологии, которые объединяют</div></div></div><div class="tm-company-profile-card__buttons"><div class="tm-button-follow tm-company-profile-card__button tm-company-profile-card__button_follow"><!----><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div><!----><!----><!----></div></div><!----><!--]--><!--]--><div class="tm-article-presenter__body" data-test-id="article-body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><!--[--><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><!--[--><div class="tm-article-presenter__header"><!--[--><!--]--><div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet"><!--[--><!--]--><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Darkxiv/" class="tm-user-info__userpic" data-test-id="user-info-pic" title="Darkxiv"><div class="tm-entity-image"><!--[--><img alt="" class="tm-entity-image__pic" height="24" src="https://assets.habr.com/habr-web/img/avatars/130.png" width="24"><!--]--></div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a href="/ru/users/Darkxiv/" class="tm-user-info__username">Darkxiv <!----></a><!--[--><span class="tm-article-datetime-published"><time datetime="2018-04-19T12:48:28.000Z" title="2018-04-19, 15:48">19  апр  2018 в 15:48</time></span><!--]--></span></span></div><!----></div><h1 class="tm-title tm-title_h1" lang="ru" data-test-id="articleTitle"><span>Глобальное освещение с использованием трассировки вокселей конусами</span></h1><div class="tm-article-snippet__stats" data-test-id="articleStats"><!----><div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title><use xlink:href="/img/megazord-v28.7909a852..svg#clock"></use></svg></span><span class="tm-article-reading-time__label">13 мин</span></div><span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-views"></use></svg><span class="tm-icon-counter__value">18K</span></span></div><div class="tm-publication-hubs__container" data-test-id="articleHubsList"><div class="tm-publication-hubs"><!--[--><span class="tm-publication-hub__link-container"><a href="/ru/companies/vk/articles/" class="tm-publication-hub__link"><!--[--><span>Блог компании VK</span><!----><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/algorithms/" class="tm-publication-hub__link"><!--[--><span>Алгоритмы</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/programming/" class="tm-publication-hub__link"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/gamedev/" class="tm-publication-hub__link"><!--[--><span>Разработка игр</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]--></div></div><!----><!----><!----></div></div><!--[--><!----><div class="tm-article-body" data-gallery-root lang="ru"><div><!--[--><!--]--></div><div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого / ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT). Возможно, кто-то читал старенькую <a href="http://research.nvidia.com/sites/default/files/publications/GIVoxels-pg2011-authors.pdf">статью </a>([VCT]) 2011 года или смотрел <a href="https://www.youtube.com/watch?v=fAsg_xNzhcQ">видео</a>. Но статья не даёт исчерпывающих ответов на вопросы, как реализовать тот или иной этап алгоритма. <br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/do/xf/ku/doxfkuomv9hf057k6gzpg_bbyd4.png" width="370" data-src="https://habrastorage.org/webt/do/xf/ku/doxfkuomv9hf057k6gzpg_bbyd4.png"/><img src="https://habrastorage.org/r/w1560/webt/ni/sb/gx/nisbgxdludojmoycwu_6zjjfp94.png" width="370" data-src="https://habrastorage.org/webt/ni/sb/gx/nisbgxdludojmoycwu_6zjjfp94.png"/><br/>
<i>Рендер сцены без глобального освещения, и с использованием VCT:</i><br/>
<a name="habracut"></a><br/>
Прежде всего стоит сказать, что реализация глобального освещения с использованием карт окружения (PMREM / IBL) получается дешевле, чем VCT. Например, один из разработчиков UE4 рассказывал в <a href="https://youtu.be/bzHevRs-cd4?t=5645">подкасте </a>(1:34:05 — 1:37:50), что они рендерили демку с использованием VCT, а потом с использованием карт окружения, и картинка получилась примерно одинаковой. Тем не менее, ведутся исследования в рамках такого подхода. На его идеях, например, базируется современный VXGI от Nvidia.<br/>
<br/>
Во время работы я опирался на кучу источников, которые можно найти в конце статьи.<br/>
Для упрощения задачи, в реализации учтено только диффузное освещение (модель Лабмерта), но утверждается, что этот алгоритм подойдёт для множества других BRDF. Также в реализации не учтены динамические объекты сцены.<br/>
<br/>
Описывать реализацию буду в терминах DirectX, но такой алгоритм вполне можно реализовать и на OpenGL. В работе используются некоторые фишки DX 11.1 (например, использование UAV в вертексном шейдере), но можно обойтись и без них, тем самым понизив минимальные системные требования для этого алгоритма.<br/>
<br/>
Для лучшего понимания работы алгоритма опишем его общие этапы, а после детализируем каждый из них. Наиболее общие части алгоритма:<br/>
<br/>
<ol>
<li><b>Вокселизация сцены</b>. Мы растеризуем сцену в набор вокселей, содержащих свойства материала (например, цвет) и нормали поверхностей.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/ph/2h/vu/ph2hvu9ipi3w1qejvhjfx-6jmdk.png" width="370" data-src="https://habrastorage.org/webt/ph/2h/vu/ph2hvu9ipi3w1qejvhjfx-6jmdk.png"/><img src="https://habrastorage.org/r/w1560/webt/av/dv/r2/avdvr25o1jmpjrwh8vqdtziy7se.png" width="370" data-src="https://habrastorage.org/webt/av/dv/r2/avdvr25o1jmpjrwh8vqdtziy7se.png"/></li>
<li><b>Запекание отражённого освещения</b>. Для вокселей рассчитывается входящее или исходящее излучение от источников освещения, а результат записывается в 3D-текстуру.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/sp/ps/ae/sppsaet4gpibjrhjuoyw24fsyay.png" width="370" data-src="https://habrastorage.org/webt/sp/ps/ae/sppsaet4gpibjrhjuoyw24fsyay.png"/><img src="https://habrastorage.org/r/w1560/webt/oa/2e/t1/oa2et1hc3eol3yrmm4vvrxmkctu.png" width="370" data-src="https://habrastorage.org/webt/oa/2e/t1/oa2et1hc3eol3yrmm4vvrxmkctu.png"/></li>
<li><b>Трассировка конусов</b>. Для каждого рассчитываемого пикселя поверхности создаётся группа конусов. Конус — это абстракция, имитирующая группу лучей, испускаемую для захвата излучения из различных мипов 3D-текстуры освещения. Конечный результат взвешенно усредняется и складывается с основным освещением.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/hd/tu/q1/hdtuq143ovkt67za5y-09pxattw.png" width="370" data-src="https://habrastorage.org/webt/hd/tu/q1/hdtuq143ovkt67za5y-09pxattw.png"/><img src="https://habrastorage.org/r/w1560/webt/dq/-q/zy/dq-qzycuif4dsfmeevyltf23pv8.png" width="370" data-src="https://habrastorage.org/webt/dq/-q/zy/dq-qzycuif4dsfmeevyltf23pv8.png"/></li>
</ol><br/>
Эти этапы могут иметь несколько идейных вариантов реализаций или содержать дополнительные оптимизации. Я хочу показать в общем виде, как это можно сделать.<br/>
<br/>
Для начала определимся со структурой хранения вокселизированной сцены. Можно вокселизовать все объекты в 3D-текстуру. Недостаток этого решения — неоптимальный расход памяти, потому что бо̒льшая часть сцены является пустым пространством. Для вокселизации с разрешением 256х256х256 формата R8G8B8A8 такая текстура будет занимать 64 Мб, и это без учёта мипов. Такие текстуры требуются для цвета и нормалей поверхностей, а также для запекаемого освещения.<br/>
<br/>
Для оптимизации расхода памяти применяются алгоритмы упаковки данных. В нашей реализации мы воспользуемся Sparse Voxel Octree (SVO), как в оригинальной статье. Но есть и другие алгоритмы, например, 3D Clipmap [S4552].<br/>
<br/>
SVO — это разреженное октодерево сцены. Каждый узел такого дерева разбивает подпространство сцены на 8 равных частей. Разреженное дерево при этом не хранит информацию о пространстве, которое ничем не занято. Мы будем пользоваться этой структурой для поиска вокселей по их координатам в пространстве, а также для сэмплирования запеченного освещения. Запеченное освещение будет храниться в специальной 3D-текстуре — буфере блоков, о котором поговорим ниже.<br/>
<br/>
Рассмотрим каждый из этапов алгоритма по отдельности.<br/>
<br/>
<h2>Вокселизация сцены</h2><br/>
<img src="https://habrastorage.org/r/w1560/webt/7x/mh/ci/7xmhcikd5lnuria3k9xp1fju42i.png" data-src="https://habrastorage.org/webt/7x/mh/ci/7xmhcikd5lnuria3k9xp1fju42i.png"/><br/>
<br/>
Вокселизированную сцену будем хранить в виде массива вокселей. На GPU этот массив реализован через StructuredBuffer / RWStructuredBuffer. Структура вокселей будет следующей:<br/>
<br/>
<pre><code class="plaintext">struct Voxel
{
    uint position;
    uint color;
    uint normal;
    uint pad; // 128 bits aligment
};</code></pre><br/>
Для компактного хранения сцены мы используем SVO. Дерево будет храниться в 2D-текстуре формата R32_UINT. Структура узла дерева:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/9l/_l/xv/9l_lxveo4xk3ngddgle8bfbi0ze.png" data-src="https://habrastorage.org/webt/9l/_l/xv/9l_lxveo4xk3ngddgle8bfbi0ze.png"/><br/>
<i>Схематическое представление узлов SVO [DP]</i><br/>
<br/>
В листьях SVO на последнем уровне будут храниться индексы соответствующих вокселей из этого массива.<br/>
<br/>
Допустим, разрешение нашей сцены 256x256x256, тогда для хранения полностью заполненного дерева нам потребуется текстура размером 6185x6185 (145,9 Мб). Но мы не предполагаем хранить полное дерево. По моим наблюдениям, для сцены Sponza при таком разрешении сцены разреженное дерево помещается в текстуру 2080х2080 (16,6 Мб).<br/>
<br/>
<h2>Создание массива вокселей</h2><br/>
Для создания массива вокселей нужно вокселизовать все объекты сцены. Воспользуемся простой вокселизацией из смежной статьи <a href="https://www.seas.upenn.edu/~pcozzi/OpenGLInsights/OpenGLInsights-SparseVoxelization.pdf">Octree-Based Sparse Voxelization</a>. Эта техника проста в реализации и работает за один проход GPU.<br/>
 <br/>
<img src="https://habrastorage.org/r/w1560/webt/3g/tb/d1/3gtbd1n2tiarwetmycl_bap-p2o.png" data-src="https://habrastorage.org/webt/3g/tb/d1/3gtbd1n2tiarwetmycl_bap-p2o.png"/><br/>
<i>Пайплайн вокселизации объекта [SV]</i><br/>
<br/>
Вычисляем ограничивающий куб сцены. Устанавливаем вьюпорт по разрешению вокселизированной сцены (например, 256х256). Выставляем ортографическую камеру над сценой так, чтобы уместить ограничивающий куб. Рендерим каждый объект сцены, который мы хотим учитывать.<br/>
<br/>
В геометрическом шейдере мы занимаемся обработкой треугольников объекта. С помощью нормали треугольника выбирается ось, в направлении которой площадь проекции этого треугольника максимальна. В зависимости от оси поворачиваем треугольник наибольшей проекцией к растеризатору — так мы получим больше вокселей.<br/>
<br/>
В пиксельном шейдере каждый фрагмент будет являться вокселем. Создаём структуру Voxel с координатами, цветом и нормалью, и добавляем его в массив вокселей.<br/>
<br/>
На этом этапе желательно использовать низкополигональные лоды (LOD) объектов, чтобы не иметь проблем с отсутствующими вокселями и со слиянием вокселей смежных треугольников (такие случаи рассмотрены в статье [SV]).<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/hq/uj/r6/hqujr6cn1tcrsh9pqicgblf3afy.png" width="250" data-src="https://habrastorage.org/webt/hq/uj/r6/hqujr6cn1tcrsh9pqicgblf3afy.png"/><img src="https://habrastorage.org/r/w1560/webt/xs/fq/bo/xsfqbowfk1zkrsvwumg5lfdvwpk.png" width="250" data-src="https://habrastorage.org/webt/xs/fq/bo/xsfqbowfk1zkrsvwumg5lfdvwpk.png"/><img src="https://habrastorage.org/r/w1560/webt/ce/5v/rh/ce5vrhmsnjudwod7nplfbtns4oc.png" width="250" data-src="https://habrastorage.org/webt/ce/5v/rh/ce5vrhmsnjudwod7nplfbtns4oc.png"/><br/>
<i>Артефакты вокселизации — не все треугольники растеризуются. Следует использовать низкополигональные лоды или дополнительно растягивать треугольники.</i><br/>
<br/>
<h2>Создание октодерева по списку вокселей</h2><br/>
Когда вся сцена вокселизована, у нас есть массив вокселей с их координатами. По этому массиву можно построить SVO, с помощью которого сможем находить воксели в пространстве. Изначально каждый пиксель текстуры с SVO инициализируется значением 0xffffffff. Для записи узлов дерева через шейдер текстура SVO будет представлена как UAV-ресурс (RWTexture2D). Для работы с деревом заведём атомарный счётчик узлов (D3D11_BUFFER_UAV_FLAG_COUNTER). <br/>
<br/>
Опишем поэтапно алгоритм создания октодерева. Под адресом узла в SVO далее подразумевается индекс узла, который преобразуется в 2D-координаты текстуры. Под аллоцированием узла далее подразумевается следующий набор действий:<br/>
<br/>
<ul>
<li>C помощью текущего значения счётчика узлов вычисляются адреса, в которых будут располагаться дочерние узлы аллоцируемого узла.</li>
<li>Счётчик узлов увеличивается на количество дочерних узлов (8).</li>
<li>Адреса дочерних узлов записываются в поля текущего узла.</li>
<li>В поле флага текущего узла записывается, что он аллоцирован.</li>
<li>Адрес текущего узла записывается в родительское поле дочерних узлов.</li>
</ul><br/>
<img src="https://habrastorage.org/r/w1560/webt/z_/rc/b7/z_rcb7_hnkjupwtab6vdm9kczra.png" data-src="https://habrastorage.org/webt/z_/rc/b7/z_rcb7_hnkjupwtab6vdm9kczra.png"/><br/>
<i>Схематичное изображение октодерева и его представления в текстуре [SV]</i><br/>
<br/>
Алгоритм создания октодерева высотой N выглядит следующим образом:<br/>
<br/>
<ol>
<li><b>Аллоцируем корневой узел</b>. Текущий уровень дерева = 1. Счётчик узлов = 1.</li>
<li><b>Перебираем воксели</b>. Для каждого вокселя находим узел (подпространство) на текущем уровне дерева, которому он принадлежит. Помечаем такие узлы флагом, что необходима аллокация. Этот этап можно распараллелить на вершинном шейдере с помощью <a href="https://msdn.microsoft.com/ru-ru/library/windows/desktop/bb232912(v=vs.85).aspx">Input-Assembler без буферов</a>, используя только количество вокселей и атрибут SV_VertexID для адресации по массиву вокселей.</li>
<li><b>Для каждого узла текущего уровня дерева проверяем флаг</b>. Если необходимо, аллоцируем узел. Этот этап также можно распараллелить на вершинном шейдере.</li>
<li><b>Для каждого узла текущего уровня дерева прописываем в дочерних узлах адреса соседей</b>.</li>
<li><b>Текущий уровень дерева++</b>. Повторяем шаги 2-5, пока текущий уровень дерева &lt; N.</li>
<li><b>На последнем уровне вместо аллокации текущего узла записываем индекс вокселя в массиве вокселей</b>. Таким образом, узлы последнего уровня будут содержать до 8 индексов.</li>
</ol><br/>
Построив такое октодерево, мы легко можем найти воксель сцены по координатам в пространстве, спускаясь вниз по SVO.<br/>
<br/>
<h2>Создание буфера блоков по октодереву</h2><br/>
Теперь, когда мы сконструировали октодерево вокселизированной сцены, можно использовать эту информацию для сохранения освещённости, переотражённой вокселями от источников освещения. Освещённость сохраняется в 3D-текстуру формата R8G8B8A8. Это позволит нам использовать трилинейную интерполяцию GPU при сэмплировании текстуры, и в результате получим более гладкое итоговое изображение. Такая текстура называется буфером блоков (brick buffer), потому что она состоит из блоков, расположенных в соответствии с SVO. Блок — это другое представление группы вокселей в пространстве. <br/>
<br/>
Группы из 2х2х2 вокселей, индексы которых расположены в листьях SVO, отображаются на блоки вокселей 3х3х3 из 3D-текстуры:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/_s/9f/c5/_s9fc5vnfmxjwtohxjoblatvnc0.png" data-src="https://habrastorage.org/webt/_s/9f/c5/_s9fc5vnfmxjwtohxjoblatvnc0.png"/><br/>
<i>Отображение группы вокселей в блок вокселей [DP]</i><br/>
<br/>
Группы вокселей, расположенные в сцене рядом друг с другом, в текстуре могут оказаться разбросаны (поскольку текстура строится на основе SVO). Поэтому для корректной интерполяции между соседними группами вокселей необходимо проделать дополнительную работу по усреднению значений между соседними блоками.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/tx/nm/dc/txnmdc2mj0v7tjky37swz223hay.png" data-src="https://habrastorage.org/webt/tx/nm/dc/txnmdc2mj0v7tjky37swz223hay.png"/><br/>
<i>Усреднение границ соседних блоков</i><br/>
<br/>
Воксели из блока располагаются по углам исходной группы вокселей и между ними. Таким образом, блоки занимают в пространстве больше места, чем исходные воксели. Но сэмплирование внутри блока будет производиться по границам исходных вокселей. Так появляется подобие некоторого разграничителя шириной в полпикселя, который никак не используется.<br/>
<br/>
Блоки, расположенные в соответствии с листьями SVO, — это отображение исходных вокселей. Блоки, расположенные в соответствии с остальными узлами SVO на определённых уровнях октодерева, — это MIP-уровни буфера блоков.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/pr/cj/oa/prcjoa1npq1heopoywfpkvdxpua.png" data-src="https://habrastorage.org/webt/pr/cj/oa/prcjoa1npq1heopoywfpkvdxpua.png"/><br/>
<i>Схематичное изображение октодерева, его представления в текстуре и отображение в буфер блоков [SV]</i><br/>
<br/>
При этом блоки не обязаны быть 3х3х3, они могут быть и 2x2x2, и 5х5х5 — это вопрос точности представления. Блоки 2х2х2 были бы ещё одним хорошим способом экономии памяти, но такого подхода я нигде не встречал.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/lq/s9/wq/lqs9wqp_yd4ggilfthkbtondtsy.png" data-src="https://habrastorage.org/webt/lq/s9/wq/lqs9wqp_yd4ggilfthkbtondtsy.png"/><br/>
<i>Сравнение интерполяции при сэмплировании четырёх соседних вокселей: без буфера блоков, из буфера блоков 3х3х3 и из буфера блоков 5х5х5</i><br/>
<br/>
Создание такого буфера блоков — довольно трудоёмкое занятие. Мы создадим два буфера: для хранения прозрачности сцены и для хранения освещения.<br/>
<br/>
<h2>Этапы создания буфера блоков</h2><br/>
Первый шаг — заполнение вокселей блоков, сопоставляемых с листьями октодерева. Допустим, мы вычисляем отражённое освещение в конкретных вокселях SVO. Тогда эти значения будут отображаться в соответствующие угловые воксели буфера блоков.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/ka/5r/j5/ka5rj5az9iuqnwacsn2-q0aigzk.png" data-src="https://habrastorage.org/webt/ka/5r/j5/ka5rj5az9iuqnwacsn2-q0aigzk.png"/><br/>
<br/>
После окончания вычисления исходящего освещения, для каждого блока дозаполним оставшиеся воксели усреднёнными значениями соседних вокселей внутри блока:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/jc/gq/cy/jcgqcyka7-fjkivpta7g0jjlly4.png" data-src="https://habrastorage.org/webt/jc/gq/cy/jcgqcyka7-fjkivpta7g0jjlly4.png"/><br/>
<br/>
Теперь усредним значения между соседними блоками. Именно для этого в узлах дерева хранятся соседи в пространстве.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/sj/is/ie/sjisiedurfjl0i5q3kzh_8ay4as.png" data-src="https://habrastorage.org/webt/sj/is/ie/sjisiedurfjl0i5q3kzh_8ay4as.png"/><br/>
<i>Один из вариантов усреднения буфера блоков — по каждой из осей за три прохода. Красным прямоугольником помечены возможные артефакты при таком усреднении [DP]</i><br/>
<br/>
Создадим MIP-уровни такого буфера. Узлы верхних уровней SVO будут отображаться в блоки, которые содержат усреднённые значения с нижележащего уровня. Каждый блок, соответствующий узлу с верхнего уровня дерева, включает в себя информацию из блоков соответствующих потомков. Также это могут быть блоки, соответствующие не только непосредственно дочерним узлам в дереве, но и их соседям (см. рисунок ниже).<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/cv/px/ak/cvpxakjzyvycjxxd1bpay-ptb_o.png" data-src="https://habrastorage.org/webt/cv/px/ak/cvpxakjzyvycjxxd1bpay-ptb_o.png"/><br/>
<i>Слева — блок включает в себя информацию из дочерних блоков и их соседей. Справа — блок включает в себя информацию только из дочерних блоков [DP]</i><br/>
<br/>
Чтобы уменьшить количество обращений к памяти, для каждого вычисляемого блока используются только воксели дочерних блоков (рисунок справа). После этого усредняются значения между соседними блоками, как описано выше. И так мы создаём MIP-уровни, пока не дойдём до корневого узла SVO.<br/>
<br/>
Создадим два буфера — буфер блоков прозрачности сцены и буфер блоков отражённого освещения.<br/>
<br/>
Буфер блоков прозрачности создаётся предварительно, на основе вокселизированной геометрии сцены. Мы будем хранить направленную прозрачность вокселей. Для этого заполним RGB-значения вокселей блоков с нижнего уровня в соответствии с прозрачностью вокселей, а при создании MIP-уровней блоков для каждого вычисляемого вокселя будем выбирать усреднённое максимальное значение прозрачности по осям XYZ, и сохранять их в соответствующие RGB-значения текстуры. Такое решение помогает учитывать преграждение света в пространстве в определённом направлении.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/tp/9t/et/tp9tetblycaiahptuxtlutemti8.png" data-src="https://habrastorage.org/webt/tp/9t/et/tp9tetblycaiahptuxtlutemti8.png"/><br/>
<i>В каждом направлении выбирается максимум в значении прозрачности (т.е. 1.0 — совершенно непрозрачный объект, и это значение будет максимальным). Далее, при конструировании MIP-уровней максимумы по осям XYZ в дочерних блоках усредняются и складываются в компоненты RGB. [DP]</i><br/>
<br/>
<h2>Запекание отражённого освещения</h2><br/>
Освещение, переотражённое вокселем, вычисляется путём обработки карты теней от рассчитываемых источников освещения. С помощью этой карты мы можем получить координаты объектов в пространстве и, используя SVO, преобразовать их в индексы освещаемых вокселей.<br/>
<br/>
Обычно разрешение карты теней выше разрешения октодерева. Оригинальная статья описывает подход, при котором каждый пиксель карты теней рассматривается как условный фотон. Соответственно, в зависимости от количества фотонов будет разный вклад в освещённость. В своей реализации я упростил этот этап и считал освещённость только один раз для каждого вокселя, попавшего в карту теней.<br/>
<br/>
Чтобы избежать повторных вычислений, для каждого вокселя, для которого уже было рассчитано отражённое освещение, мы воспользуемся битом флага узла октодерева, который хранит указатель на воксель. Также, при обработке карты теней можно среди пикселей, входящих в один и тот же воксель, выбирать для вычисления только левый верхний.<br/>
 <br/>
<img src="https://habrastorage.org/r/w1560/webt/ij/ie/5n/ijie5nk33gqalek7hbobxhsmlym.png" width="370" data-src="https://habrastorage.org/webt/ij/ie/5n/ijie5nk33gqalek7hbobxhsmlym.png"/><img src="https://habrastorage.org/r/w1560/webt/b9/t_/ev/b9t_evpazubphu-tn9ylav06cfw.png" width="370" data-src="https://habrastorage.org/webt/b9/t_/ev/b9t_evpazubphu-tn9ylav06cfw.png"/><br/>
<i>Фрагмент карты теней (слева). Справа — красным показаны левые верхние пиксели, входящие в один и тот же воксель.</i><br/>
<br/>
Для вычисления отражённой освещённости используется стандартный albedo * lightColor * dot(n, l), но в общем случае это зависит от BRDF. Вычисленная освещённость записывается в буфер блоков освещения. После обработки карты теней производится дозаполнение буфера блоков и создание MIP-уровней, как описано выше.<br/>
<br/>
Алгоритм достаточно дорогостоящий. Необходимо пересчитывать буфер блоков освещения при каждом изменении освещения. Один из возможных способов оптимизации — размазывание обновления буфера <a href="https://habrahabr.ru/post/320530/">по кадрам</a>.<br/>
<br/>
<h2>Создание G-Buffer</h2><br/>
Чтобы для конкретного пикселя применить трассировку вокселей конусами, необходимо знать нормаль и местоположение пикселя в пространстве. Эти атрибуты используются для обхода SVO и соответствующего сэмплирования буфера блоков освещения. Получить эти атрибуты можно из <a href="https://en.wikipedia.org/wiki/Deferred_shading">G-buffer</a>.<br/>
<br/>
С помощью G-buffer также можно вычислять переотражённое освещение в меньшем разрешении, чем у вьюпорта, что способствует улучшению производительности.<br/>
<br/>
<h2>Трассировка вокселей конусами</h2><br/>
Когда буфер блоков освещения вычислен, можно переходить к вычислению освещения, переотражённого от сцены на объекты в кадре — то есть глобального освещения. Для этого применяется трассировка вокселей конусами.<br/>
<br/>
Для каждого пикселя испускается несколько конусов в соответствии с BRDF. В случае модели освещения по Ламберту, конусы испускаются равномерно по полусфере, ориентированной с помощью нормали, полученной из G-buffer.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/vo/kb/ju/vokbjusy6l1bnclgllg7ti8nlc8.png" data-src="https://habrastorage.org/webt/vo/kb/ju/vokbjusy6l1bnclgllg7ti8nlc8.png"/><br/>
<i>Испускание конусов с поверхности, для которой рассчитывается входящее освещение [VCT]</i><br/>
<br/>
При вычислении мы допускаем, что освещённость, получаемая из точки на поверхности в направлении вокселя, будет такой же, как испущенная из вокселя в сторону поверхности в определённом конусе видимости.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/-v/sy/sw/-vsysw1jb0hthbvknsy_t2mij-k.png" data-src="https://habrastorage.org/webt/-v/sy/sw/-vsysw1jb0hthbvknsy_t2mij-k.png"/><br/>
<i>[VCT]</i><br/>
<br/>
Трассировка производится пошагово. На каждом шаге сэмплируется буфер блоков освещения в соответствии с уровнем октодерева (т.е. в соответствии с созданными MIP-уровнями), начиная с самого нижнего и заканчивая самым верхним.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/c3/py/nf/c3pynfn4u27dhtewd4bi3qg3vqy.png" data-src="https://habrastorage.org/webt/c3/py/nf/c3pynfn4u27dhtewd4bi3qg3vqy.png"/><br/>
<i>Сэмплирование буфера блоков с помощью конуса в соответствии с уровнями SVO [DP]</i><br/>
<br/>
Трассировка конусом производится аналогично рендерингу volumetric-объектов [A]. Т.е. используется модель alpha front-to-back, при которой на каждом следующем шаге вдоль конуса цвет и прозрачность вычисляются следующим образом:<br/>
<br/>
<pre><code class="plaintext">с’ = с’ + ( 1 — а’ ) * с
а’ = а’ + ( 1 — а’ ) * а</code></pre><br/>
где а — прозрачность, с — значение, полученное из буфера блоков освещения, умноженное на прозрачность (premultiplied alpha).<br/>
<br/>
Значение прозрачности вычисляется с помощью буфера блоков прозрачности:<br/>
<br/>
<pre><code class="plaintext">opacityXYZ = opacityBrickBuffer.Sample( linearSampler, brickSamplePos ).rgb;
alpha = dot( abs( normalize( coneDir ) * opacityXYZ ), 1.0f.xxx );</code></pre><br/>
Иными словами, считывается прозрачность в направлении конуса в конкретной точке. Это не единственный подход. Можно, например, хранить прозрачность в альфа-канале буфера блоков освещения. Но тогда теряется направленность переотражённого освещения. Также я пробовал хранить направленную освещённость в шести буферах блоков освещения (по два на каждую ось) — затрат больше, чем видимых преимуществ.<br/>
<br/>
Итоговый результат по конусам взвешенно суммируется в зависимости от углов раствора конусов. Если все конусы одинаковые, вес делится поровну. Выбор количества конусов и размера углов раствора — это вопрос соотношения скорости и качества. В моей реализации 5 конусов по 60 градусов (один в центре, и 4 по бокам).<br/>
<br/>
На рисунке выше схематично показаны точки сэмплирования вдоль оси конуса. Рекомендуется выбирать расположение сэмплов таким образом, чтобы в конус вписывался узел октодерева с соответствующего уровня. Либо можно заменить на соответствующую сферу [SB]. Но тогда могут проявляться резкие границы вокселей, поэтому расположение сэмплов корректируется. В своей реализации я просто сдвигаю сэмплы ближе друг к другу.<br/>
<br/>
Бонусом к переотражённому освещению мы также получаем затенение <a href="https://ru.wikipedia.org/wiki/Ambient_occlusion">Ambient Occlusion</a>, которое вычисляется исходя из значения альфы, полученного при трассировке. Также при просчёте AO на каждом шаге вдоль оси конуса вносится коррекция в зависимости от расстояния <code>1 / (1 + lambda * distance)</code>, где lambda — калибровочный параметр.<br/>
<br/>
Полученный результат сохраняется в текстуру RGBA (RGB для освещения и A для AO). Для более гладкого результата на текстуру можно наложить размытие. Итоговый результат будет зависеть от BRDF. В моём случае вычисленное переотражение сначала умножается на альбедо поверхности, полученное из G-buffer, затем опционально умножается на AO, и наконец добавляется к основному освещению.<br/>
<br/>
В целом, после определённых настроек и доработок картинка похожа на результат из статьи.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/vo/vv/dj/vovvdjkgrzvolz9zi1qzxq24z9o.png" width="250" data-src="https://habrastorage.org/webt/vo/vv/dj/vovvdjkgrzvolz9zi1qzxq24z9o.png"/><img src="https://habrastorage.org/r/w1560/webt/iq/jj/gx/iqjjgxcayddeo2rjmhjzogpu7mo.png" width="250" data-src="https://habrastorage.org/webt/iq/jj/gx/iqjjgxcayddeo2rjmhjzogpu7mo.png"/><img src="https://habrastorage.org/r/w1560/webt/iz/a6/eh/iza6ehbdgctiymft3a6dksjupm4.png" width="250" data-src="https://habrastorage.org/webt/iz/a6/eh/iza6ehbdgctiymft3a6dksjupm4.png"/><br/>
<i>Сравнение результатов — слева сцена, отрендеренная в Mental Ray, справа — Voxel Cone Tracing из оригинальной статьи, в центре — моя реализация.</i><br/>
<br/>
<h2>Подводные камни</h2><br/>
<b>Проблема самоосвещения</b>. Поскольку в большинстве случаев поверхность физически расположена в своих же вокселях, необходимо как-то бороться с самоосвещением. Одним из решений является отодвигание начала конусов в направлении нормалей. Также этой проблемы теоретически можно избежать, если в вокселях хранить направленное распределение освещения.<br/>
<br/>
<b>Проблема производительности</b>. Алгоритм довольно сложный, и придётся потратить немало времени на эффективную реализацию на GPU. Я писал реализацию «в лоб», применяя довольно очевидные оптимизации, и нагрузка получилась высокой. При этом даже оптимизированный алгоритм при поиске вокселей в дереве будет требовать множество зависящих друг от друга сэмплов текстуры SVO.<br/>
<br/>
В моей реализации я испускаю 5 конусов, сэмплируя буферы блоков для 4 предпоследних уровней октодерева 256х256х256. Согласно Intel GPA, относительное распределение производительности получилось таким:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/82/xg/ty/82xgty-qwgptlroykcda2s6siso.png" data-src="https://habrastorage.org/webt/82/xg/ty/82xgty-qwgptlroykcda2s6siso.png"/><br/>
<i>Распределение производительности. G-Buffer и Shadow Map без предварительного кулинга.</i><br/>
<br/>
В оригинальной статье используются три диффузных конуса на текстуре 512х512 на всём SVO (512x512x512 — 9 уровней). Вместе с прямым освещением это занимает ~45% времени кадра 512х512. Есть куда стремиться. Также необходимо уделить внимание оптимизации обновления буфера освещения.<br/>
 <br/>
Ещё одной проблемой алгоритма является <b>просачивание света сквозь объекты</b> (light leaking). Такое случается с тонкими объектами, которые вносят малый вклад в буфер блоков прозрачности. Также этому явлению подвержены плоскости, расположенные рядом с освещёнными вокселями нижних уровней SVO:<br/>
 <br/>
<img src="https://habrastorage.org/r/w1560/webt/ya/gc/vw/yagcvwcbmbuaft0db2xpnczcsw4.png" width="370" data-src="https://habrastorage.org/webt/ya/gc/vw/yagcvwcbmbuaft0db2xpnczcsw4.png"/><img src="https://habrastorage.org/r/w780q1/webt/iw/xu/0f/iwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg" width="370" data-src="https://habrastorage.org/webt/iw/xu/0f/iwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg" data-blurred="true"/><br/>
<i>Light leaking: слева — при использовании алгоритма VCT, справа — в реальной жизни. Этот эффект можно ослабить с помощью AO.</i><br/>
<br/>
Из всего вышесказанного вытекает ещё одно следствие: не так просто настроить алгоритм, чтобы получить хорошую картинку — сколько брать конусов, сколько уровней SVO, с какими коэффициентами и т.д.<br/>
<br/>
Мы рассмотрели только статические объекты сцены. Для хранения динамических объектов потребуется модифицировать SVO и соответствующие буферы. Как правило, в этом случае предлагают раздельно хранить статические и динамические узлы.<br/>
<br/>
Подводя итог, я бы не стал рекомендовать эту технику, если у вас нет достаточно времени, терпения и сил. Но зато она поможет добиться правдоподобного ambient-освещения.<br/>
<br/>
Демонстрация в динамике:<br/>
<br/>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.2493%;"><div class="tm-iframe_temp" data-src="https://www.youtube.com/embed/gK837_HTfNU?rel=0&amp;showinfo=1" data-style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" id="" width=""></div></div></div></div><br/>
Ссылка на приложение: <a href="https://github.com/Darkxiv/VoxelConeTracing">https://github.com/Darkxiv/VoxelConeTracing</a> (bin/VCT.exe)<br/>
<br/>
<b>Список источников и ресурсов, которые могут помочь в реализации воксельной трассировки конусами:</b><br/>
<br/>
<ul>
<li>[VCT] Оригинальная статья: <a href="http://research.nvidia.com/sites/default/files/publications/GIVoxels-pg2011-authors.pdf">http://research.nvidia.com/sites/default/files/publications/GIVoxels-pg2011-authors.pdf</a> </li>
<li>[SV] Дополнение к оригинальной статье, в которой разъясняется вокселизация и SVO: <a href="https://www.seas.upenn.edu/~pcozzi/OpenGLInsights/OpenGLInsights-SparseVoxelization.pdf">https://www.seas.upenn.edu/~pcozzi/OpenGLInsights/OpenGLInsights-SparseVoxelization.pdf</a></li>
<li>[S4552] Презентация NVIDIA: <a href="http://on-demand.gputechconf.com/gtc/2014/presentations/S4552-rt-voxel-based-global-illumination-gpus.pdf">http://on-demand.gputechconf.com/gtc/2014/presentations/S4552-rt-voxel-based-global-illumination-gpus.pdf</a></li>
<li>[A] Модель alpha front-to-back: <a href="http://developer.download.nvidia.com/books/HTML/gpugems/gpugems_ch39.html">http://developer.download.nvidia.com/books/HTML/gpugems/gpugems_ch39.html</a> </li>
<li>[DP] Диплом, сделанный на основе оригинальной статьи: <a href="http://dcgi.felk.cvut.cz/theses/2013/drinotom">http://dcgi.felk.cvut.cz/theses/2013/drinotom</a> </li>
<li>[SB] Описание ещё одной реализации VCT: <a href="http://simonstechblog.blogspot.ru/2013/01/implementing-voxel-cone-tracing.html">http://simonstechblog.blogspot.ru/2013/01/implementing-voxel-cone-tracing.html</a> </li>
<li>Слайды с реализацией в UE4: <a href="https://www.yumpu.com/en/document/view/4694219/the-technology-behind-the-elemental-demo-unreal-engine">https://www.yumpu.com/en/document/view/4694219/the-technology-behind-the-elemental-demo-unreal-engine</a></li>
<li>Объяснение сэмплирования ambient кубов: <a href="http://www.valvesoftware.com/publications/2006/SIGGRAPH06_Course_ShadingInValvesSourceEngine.pdf">http://www.valvesoftware.com/publications/2006/SIGGRAPH06_Course_ShadingInValvesSourceEngine.pdf</a></li>
<li>Библиотека sparse octree от NVIDIA <a href="https://developer.nvidia.com/gvdb">https://developer.nvidia.com/gvdb</a> </li>
</ul></div></div></div><!----><!----></div><!----><!----></div><!--]--><!----><div class="tm-article-presenter__meta" data-test-id="article-meta-links"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%BE%D1%81%D0%B2%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5]" class="tm-tags-list__link"><span>освещение</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[Voxel+Cone+Tracing]" class="tm-tags-list__link"><span>Voxel Cone Tracing</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%8F+%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0]" class="tm-tags-list__link"><span>компьютерная графика</span></a><!--]--></li><!--]--><!----></ul></div><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a href="/ru/companies/vk/articles/" class="tm-hubs-list__link"><!--[--><span>Блог компании VK</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/algorithms/" class="tm-hubs-list__link"><!--[--><span>Алгоритмы</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/programming/" class="tm-hubs-list__link"><!--[--><span>Программирование</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a href="/ru/hubs/gamedev/" class="tm-hubs-list__link"><!--[--><span>Разработка игр</span><!--]--></a><!--]--></li><!--]--><!----></ul></div></div><!----><!--]--></article><!--]--></div><!----></div><div style="" class="tm-article-sticky-panel" data-test-id="article-sticky-panel"><div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 39: ↑39 и ↓0</title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-rating"></use></svg><span class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating tm-votes-meter__value" data-test-id="votes-meter-value" title="Всего голосов 39: ↑39 и ↓0">+39</span></div><!--teleport start--><!--teleport end--><!----></div><!----><!----><button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-favorite"></use></svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">93</span></button><div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button><!--teleport start--><!--teleport end--></div><div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a href="/ru/companies/vk/articles/353740/comments/" class="tm-article-comments-counter-link__link" data-test-id="counter-comments"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value">7</span><!--]--></a><!----></div><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!----></div></div></div><!--[--><!--]--><div class="tm-article-presenter__footer"><!--[--><!--[--><div class="tm-article-blocks"><!----><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><!----><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><!--[--><div class="tm-article-author" data-test-id="article-author-info"><!--[--><!--[--><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/vk/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="40"></div></a><div class="tm-company-snippet__info"><a href="/ru/companies/vk/profile/" class="tm-company-snippet__title" data-test-id="company-title"><span>VK</span></a><div class="tm-company-snippet__description">Технологии, которые объединяют</div></div></div><div class="tm-article-author__buttons"><!----><!----></div></div><div class="tm-article-author__company-contacts"><!--[--><a class="tm-article-author__contact" href="https://twitter.com/inside_vk" rel="noopener" target="_blank">Twitter</a><a class="tm-article-author__contact" href="https://vk.com/insidevk" rel="noopener" target="_blank">ВКонтакте</a><a class="tm-article-author__contact" href="https://telegram.me/inside_vk" rel="noopener" target="_blank">Telegram</a><!--]--></div><div class="tm-article-author__separator"></div></div><!--]--><!--]--><div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Darkxiv/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><!--[--><img alt="" class="tm-entity-image__pic" src="https://assets.habr.com/habr-web/img/avatars/130.png"><!--]--></div></a><div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 14 голосов "><div class="tm-counter-container__header"><!--[--><div class="karma-display positive" data-v-7635202e>14</div><!----><!--]--></div><div class="tm-counter-container__footer"><!--[--><div class="tm-karma__text">Карма</div><!--teleport start--><!--teleport end--><!--]--></div></div><div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">0</span></span><!--]--></div><!----></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div></div></div></div><div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info"><div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title"><span class="tm-user-card__name tm-user-card__name_variant-article tm-user-card__name">Валентин Донцов</span><a href="/ru/users/Darkxiv/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article"> @Darkxiv</a><!----></div><p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Пользователь</p></div></div><div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons"><!----><div class="tm-user-card__button"><div class="tm-button-follow tm-user-card__button-follow"><!----><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div></div><!----><div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations"><svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16"><title>Отправить сообщение</title><use xlink:href="/img/megazord-v28.7909a852..svg#mail"></use></svg></div><!----></div><!----></div><!----></div><!--]--></div><!--]--><!----></section><!----><!--[--><!--]--><!--]--><div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div><!--[--><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/vk/articles/353740/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.7909a852..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 7 </span><!--]--></a><!----></div><!--]--></div></div></div><!--[--><!--[--><!--]--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]--></div><!----></header><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><!--[--><!--[--><div class="tm-tabs tm-tabs"><div class=""><!--[--><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]--></div><!----></div><div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><div class="tm-placeholder-article-cards"><!--[--><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><!--]--></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><!----></div><!--]--><!--]--></div><!--]--><!----></section><!--[--><!--[--><div class="placeholder-wrapper"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div><div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><!--[--><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><!--]--></ul></div><div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><!--]--><!--]--><!----><!--[--><!--]--><!--]--></div><!--]--><!--]--></div></div><!--]--><!--]--></div></div><div class="tm-page__sidebar"><!--[--><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div><div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;"><!--[--><!--]--><!----><div class="tm-layout-sidebar__placeholder_initial"></div><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2><!--[--><!--]--></div><!----></header><!--[--><div class="tm-block__body tm-block__body"><!--[--><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Сайт</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><a class="tm-company-basic-info__link" href="https://team.vk.company/" target="_blank">team.vk.company</a><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата регистрации</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="2008-08-09T07:42:32.000Z" title="2008-08-09, 11:42">9  августа  2008</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата основания</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="1998-10-14T20:00:00.000Z" title="1998-10-15, 00:00">15  октября  1998</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Численность</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->свыше 10 000 человек<!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Местоположение</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->Россия<!--]--></dd></dl><!----></div><!--]--></div><!--]--><!----></section><div class="tm-company-widgets"><!--[--><!--]--></div><!----><!----><!--]--><!----></div></div><!--]--></div></div><!----><!--]--></div></div></main><!----></div><div class="tm-footer-menu"><div class="tm-page-width"><!--[--><div class="tm-footer-menu__container"><!--[--><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Ваш аккаунт</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/vk/articles/353740/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/vk/articles/353740/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Разделы</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/ru/articles/" class="footer-menu__item-link">Статьи</a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">Новости</a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">Хабы</a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">Компании</a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">Авторы</a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">Песочница</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Информация</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">Устройство сайта</a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">Для авторов</a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">Для компаний</a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">Документы</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Услуги</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]--></ul></div></div><!--]--></div><!--]--></div></div><div class="tm-footer"><div class="tm-page-width"><!--[--><div class="tm-footer__container"><!----><div class="tm-footer__social"><!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Facebook</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Twitter</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>VK</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Telegram</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Youtube</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Яндекс Дзен</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a><!--]--></div><!--teleport start--><!--teleport end--><button class="tm-footer__link"><!----> Настройка языка</button><a href="/ru/feedback/" class="tm-footer__link">Техническая поддержка</a><div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2024, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div><!--]--></div></div><!----><!--]--></div><!----></div><script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"353740":{"id":"353740","timePublished":"2018-04-19T12:48:28+00:00","isCorporative":true,"lang":"ru","titleHtml":"Глобальное освещение с использованием трассировки вокселей конусами","leadData":{"textHtml":"В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого \u002F ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT). Возможно, кто-то читал старенькую \u003Ca href=\"http:\u002F\u002Fresearch.nvidia.com\u002Fsites\u002Fdefault\u002Ffiles\u002Fpublications\u002FGIVoxels-pg2011-authors.pdf\"\u003Eстатью \u003C\u002Fa\u003E([VCT]) 2011 года или смотрел \u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=fAsg_xNzhcQ\"\u003Eвидео\u003C\u002Fa\u003E. Но статья не даёт исчерпывающих ответов на вопросы, как реализовать тот или иной этап алгоритма. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdo\u002Fxf\u002Fku\u002Fdoxfkuomv9hf057k6gzpg_bbyd4.png\" width=\"370\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fni\u002Fsb\u002Fgx\u002Fnisbgxdludojmoycwu_6zjjfp94.png\" width=\"370\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003EРендер сцены без глобального освещения, и с использованием VCT:\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":null,"image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"489676","alias":"Darkxiv","fullname":"Валентин Донцов","avatarUrl":null,"speciality":"Пользователь","scoreStats":{"score":14,"votesCount":14},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null,"isInBlacklist":null},"statistics":{"commentsCount":7,"favoritesCount":93,"readingCount":17622,"score":39,"votesCount":39,"votesCountPlus":39,"votesCountMinus":0},"hubs":[{"id":"4992","alias":"vk","type":"corporative","title":"Блог компании VK","titleHtml":"Блог компании VK","isProfiled":false,"relatedData":null},{"id":"8000","alias":"algorithms","type":"collective","title":"Алгоритмы","titleHtml":"Алгоритмы","isProfiled":true,"relatedData":null},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true,"relatedData":null},{"id":"7773","alias":"gamedev","type":"collective","title":"Разработка игр","titleHtml":"Разработка игр","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":{"vote":null,"unreadCommentsCount":0,"bookmarked":false,"canComment":false,"canEdit":false,"canViewVotes":false,"votePlus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":true},"voteMinus":{"canVote":false,"isChargeEnough":false,"isKarmaEnough":false,"isVotingOver":true},"canModerateComments":false,"trackerSubscribed":false,"emailSubscribed":false},"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EВ этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого \u002F ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT). Возможно, кто-то читал старенькую \u003Ca href=\"http:\u002F\u002Fresearch.nvidia.com\u002Fsites\u002Fdefault\u002Ffiles\u002Fpublications\u002FGIVoxels-pg2011-authors.pdf\"\u003Eстатью \u003C\u002Fa\u003E([VCT]) 2011 года или смотрел \u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=fAsg_xNzhcQ\"\u003Eвидео\u003C\u002Fa\u003E. Но статья не даёт исчерпывающих ответов на вопросы, как реализовать тот или иной этап алгоритма. \u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fdo\u002Fxf\u002Fku\u002Fdoxfkuomv9hf057k6gzpg_bbyd4.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdo\u002Fxf\u002Fku\u002Fdoxfkuomv9hf057k6gzpg_bbyd4.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fni\u002Fsb\u002Fgx\u002Fnisbgxdludojmoycwu_6zjjfp94.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fni\u002Fsb\u002Fgx\u002Fnisbgxdludojmoycwu_6zjjfp94.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EРендер сцены без глобального освещения, и с использованием VCT:\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\nПрежде всего стоит сказать, что реализация глобального освещения с использованием карт окружения (PMREM \u002F IBL) получается дешевле, чем VCT. Например, один из разработчиков UE4 рассказывал в \u003Ca href=\"https:\u002F\u002Fyoutu.be\u002FbzHevRs-cd4?t=5645\"\u003Eподкасте \u003C\u002Fa\u003E(1:34:05 — 1:37:50), что они рендерили демку с использованием VCT, а потом с использованием карт окружения, и картинка получилась примерно одинаковой. Тем не менее, ведутся исследования в рамках такого подхода. На его идеях, например, базируется современный VXGI от Nvidia.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВо время работы я опирался на кучу источников, которые можно найти в конце статьи.\u003Cbr\u002F\u003E\nДля упрощения задачи, в реализации учтено только диффузное освещение (модель Лабмерта), но утверждается, что этот алгоритм подойдёт для множества других BRDF. Также в реализации не учтены динамические объекты сцены.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nОписывать реализацию буду в терминах DirectX, но такой алгоритм вполне можно реализовать и на OpenGL. В работе используются некоторые фишки DX 11.1 (например, использование UAV в вертексном шейдере), но можно обойтись и без них, тем самым понизив минимальные системные требования для этого алгоритма.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДля лучшего понимания работы алгоритма опишем его общие этапы, а после детализируем каждый из них. Наиболее общие части алгоритма:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cb\u003EВокселизация сцены\u003C\u002Fb\u003E. Мы растеризуем сцену в набор вокселей, содержащих свойства материала (например, цвет) и нормали поверхностей.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fph\u002F2h\u002Fvu\u002Fph2hvu9ipi3w1qejvhjfx-6jmdk.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fph\u002F2h\u002Fvu\u002Fph2hvu9ipi3w1qejvhjfx-6jmdk.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fav\u002Fdv\u002Fr2\u002Favdvr25o1jmpjrwh8vqdtziy7se.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fav\u002Fdv\u002Fr2\u002Favdvr25o1jmpjrwh8vqdtziy7se.png\"\u002F\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EЗапекание отражённого освещения\u003C\u002Fb\u003E. Для вокселей рассчитывается входящее или исходящее излучение от источников освещения, а результат записывается в 3D-текстуру.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fsp\u002Fps\u002Fae\u002Fsppsaet4gpibjrhjuoyw24fsyay.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsp\u002Fps\u002Fae\u002Fsppsaet4gpibjrhjuoyw24fsyay.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Foa\u002F2e\u002Ft1\u002Foa2et1hc3eol3yrmm4vvrxmkctu.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Foa\u002F2e\u002Ft1\u002Foa2et1hc3eol3yrmm4vvrxmkctu.png\"\u002F\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EТрассировка конусов\u003C\u002Fb\u003E. Для каждого рассчитываемого пикселя поверхности создаётся группа конусов. Конус — это абстракция, имитирующая группу лучей, испускаемую для захвата излучения из различных мипов 3D-текстуры освещения. Конечный результат взвешенно усредняется и складывается с основным освещением.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fhd\u002Ftu\u002Fq1\u002Fhdtuq143ovkt67za5y-09pxattw.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fhd\u002Ftu\u002Fq1\u002Fhdtuq143ovkt67za5y-09pxattw.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fdq\u002F-q\u002Fzy\u002Fdq-qzycuif4dsfmeevyltf23pv8.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdq\u002F-q\u002Fzy\u002Fdq-qzycuif4dsfmeevyltf23pv8.png\"\u002F\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\nЭти этапы могут иметь несколько идейных вариантов реализаций или содержать дополнительные оптимизации. Я хочу показать в общем виде, как это можно сделать.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДля начала определимся со структурой хранения вокселизированной сцены. Можно вокселизовать все объекты в 3D-текстуру. Недостаток этого решения — неоптимальный расход памяти, потому что бо̒льшая часть сцены является пустым пространством. Для вокселизации с разрешением 256х256х256 формата R8G8B8A8 такая текстура будет занимать 64 Мб, и это без учёта мипов. Такие текстуры требуются для цвета и нормалей поверхностей, а также для запекаемого освещения.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДля оптимизации расхода памяти применяются алгоритмы упаковки данных. В нашей реализации мы воспользуемся Sparse Voxel Octree (SVO), как в оригинальной статье. Но есть и другие алгоритмы, например, 3D Clipmap [S4552].\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nSVO — это разреженное октодерево сцены. Каждый узел такого дерева разбивает подпространство сцены на 8 равных частей. Разреженное дерево при этом не хранит информацию о пространстве, которое ничем не занято. Мы будем пользоваться этой структурой для поиска вокселей по их координатам в пространстве, а также для сэмплирования запеченного освещения. Запеченное освещение будет храниться в специальной 3D-текстуре — буфере блоков, о котором поговорим ниже.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nРассмотрим каждый из этапов алгоритма по отдельности.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EВокселизация сцены\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F7x\u002Fmh\u002Fci\u002F7xmhcikd5lnuria3k9xp1fju42i.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F7x\u002Fmh\u002Fci\u002F7xmhcikd5lnuria3k9xp1fju42i.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВокселизированную сцену будем хранить в виде массива вокселей. На GPU этот массив реализован через StructuredBuffer \u002F RWStructuredBuffer. Структура вокселей будет следующей:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Estruct Voxel\n{\n    uint position;\n    uint color;\n    uint normal;\n    uint pad; \u002F\u002F 128 bits aligment\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\nДля компактного хранения сцены мы используем SVO. Дерево будет храниться в 2D-текстуре формата R32_UINT. Структура узла дерева:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F9l\u002F_l\u002Fxv\u002F9l_lxveo4xk3ngddgle8bfbi0ze.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F9l\u002F_l\u002Fxv\u002F9l_lxveo4xk3ngddgle8bfbi0ze.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСхематическое представление узлов SVO [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ листьях SVO на последнем уровне будут храниться индексы соответствующих вокселей из этого массива.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДопустим, разрешение нашей сцены 256x256x256, тогда для хранения полностью заполненного дерева нам потребуется текстура размером 6185x6185 (145,9 Мб). Но мы не предполагаем хранить полное дерево. По моим наблюдениям, для сцены Sponza при таком разрешении сцены разреженное дерево помещается в текстуру 2080х2080 (16,6 Мб).\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EСоздание массива вокселей\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nДля создания массива вокселей нужно вокселизовать все объекты сцены. Воспользуемся простой вокселизацией из смежной статьи \u003Ca href=\"https:\u002F\u002Fwww.seas.upenn.edu\u002F~pcozzi\u002FOpenGLInsights\u002FOpenGLInsights-SparseVoxelization.pdf\"\u003EOctree-Based Sparse Voxelization\u003C\u002Fa\u003E. Эта техника проста в реализации и работает за один проход GPU.\u003Cbr\u002F\u003E\n \u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F3g\u002Ftb\u002Fd1\u002F3gtbd1n2tiarwetmycl_bap-p2o.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F3g\u002Ftb\u002Fd1\u002F3gtbd1n2tiarwetmycl_bap-p2o.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EПайплайн вокселизации объекта [SV]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВычисляем ограничивающий куб сцены. Устанавливаем вьюпорт по разрешению вокселизированной сцены (например, 256х256). Выставляем ортографическую камеру над сценой так, чтобы уместить ограничивающий куб. Рендерим каждый объект сцены, который мы хотим учитывать.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ геометрическом шейдере мы занимаемся обработкой треугольников объекта. С помощью нормали треугольника выбирается ось, в направлении которой площадь проекции этого треугольника максимальна. В зависимости от оси поворачиваем треугольник наибольшей проекцией к растеризатору — так мы получим больше вокселей.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ пиксельном шейдере каждый фрагмент будет являться вокселем. Создаём структуру Voxel с координатами, цветом и нормалью, и добавляем его в массив вокселей.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nНа этом этапе желательно использовать низкополигональные лоды (LOD) объектов, чтобы не иметь проблем с отсутствующими вокселями и со слиянием вокселей смежных треугольников (такие случаи рассмотрены в статье [SV]).\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fhq\u002Fuj\u002Fr6\u002Fhqujr6cn1tcrsh9pqicgblf3afy.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fhq\u002Fuj\u002Fr6\u002Fhqujr6cn1tcrsh9pqicgblf3afy.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fxs\u002Ffq\u002Fbo\u002Fxsfqbowfk1zkrsvwumg5lfdvwpk.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fxs\u002Ffq\u002Fbo\u002Fxsfqbowfk1zkrsvwumg5lfdvwpk.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fce\u002F5v\u002Frh\u002Fce5vrhmsnjudwod7nplfbtns4oc.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fce\u002F5v\u002Frh\u002Fce5vrhmsnjudwod7nplfbtns4oc.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EАртефакты вокселизации — не все треугольники растеризуются. Следует использовать низкополигональные лоды или дополнительно растягивать треугольники.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EСоздание октодерева по списку вокселей\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nКогда вся сцена вокселизована, у нас есть массив вокселей с их координатами. По этому массиву можно построить SVO, с помощью которого сможем находить воксели в пространстве. Изначально каждый пиксель текстуры с SVO инициализируется значением 0xffffffff. Для записи узлов дерева через шейдер текстура SVO будет представлена как UAV-ресурс (RWTexture2D). Для работы с деревом заведём атомарный счётчик узлов (D3D11_BUFFER_UAV_FLAG_COUNTER). \u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nОпишем поэтапно алгоритм создания октодерева. Под адресом узла в SVO далее подразумевается индекс узла, который преобразуется в 2D-координаты текстуры. Под аллоцированием узла далее подразумевается следующий набор действий:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cul\u003E\n\u003Cli\u003EC помощью текущего значения счётчика узлов вычисляются адреса, в которых будут располагаться дочерние узлы аллоцируемого узла.\u003C\u002Fli\u003E\n\u003Cli\u003EСчётчик узлов увеличивается на количество дочерних узлов (8).\u003C\u002Fli\u003E\n\u003Cli\u003EАдреса дочерних узлов записываются в поля текущего узла.\u003C\u002Fli\u003E\n\u003Cli\u003EВ поле флага текущего узла записывается, что он аллоцирован.\u003C\u002Fli\u003E\n\u003Cli\u003EАдрес текущего узла записывается в родительское поле дочерних узлов.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fz_\u002Frc\u002Fb7\u002Fz_rcb7_hnkjupwtab6vdm9kczra.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz_\u002Frc\u002Fb7\u002Fz_rcb7_hnkjupwtab6vdm9kczra.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСхематичное изображение октодерева и его представления в текстуре [SV]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nАлгоритм создания октодерева высотой N выглядит следующим образом:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cb\u003EАллоцируем корневой узел\u003C\u002Fb\u003E. Текущий уровень дерева = 1. Счётчик узлов = 1.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EПеребираем воксели\u003C\u002Fb\u003E. Для каждого вокселя находим узел (подпространство) на текущем уровне дерева, которому он принадлежит. Помечаем такие узлы флагом, что необходима аллокация. Этот этап можно распараллелить на вершинном шейдере с помощью \u003Ca href=\"https:\u002F\u002Fmsdn.microsoft.com\u002Fru-ru\u002Flibrary\u002Fwindows\u002Fdesktop\u002Fbb232912(v=vs.85).aspx\"\u003EInput-Assembler без буферов\u003C\u002Fa\u003E, используя только количество вокселей и атрибут SV_VertexID для адресации по массиву вокселей.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EДля каждого узла текущего уровня дерева проверяем флаг\u003C\u002Fb\u003E. Если необходимо, аллоцируем узел. Этот этап также можно распараллелить на вершинном шейдере.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EДля каждого узла текущего уровня дерева прописываем в дочерних узлах адреса соседей\u003C\u002Fb\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EТекущий уровень дерева++\u003C\u002Fb\u003E. Повторяем шаги 2-5, пока текущий уровень дерева &lt; N.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cb\u003EНа последнем уровне вместо аллокации текущего узла записываем индекс вокселя в массиве вокселей\u003C\u002Fb\u003E. Таким образом, узлы последнего уровня будут содержать до 8 индексов.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\nПостроив такое октодерево, мы легко можем найти воксель сцены по координатам в пространстве, спускаясь вниз по SVO.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EСоздание буфера блоков по октодереву\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nТеперь, когда мы сконструировали октодерево вокселизированной сцены, можно использовать эту информацию для сохранения освещённости, переотражённой вокселями от источников освещения. Освещённость сохраняется в 3D-текстуру формата R8G8B8A8. Это позволит нам использовать трилинейную интерполяцию GPU при сэмплировании текстуры, и в результате получим более гладкое итоговое изображение. Такая текстура называется буфером блоков (brick buffer), потому что она состоит из блоков, расположенных в соответствии с SVO. Блок — это другое представление группы вокселей в пространстве. \u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nГруппы из 2х2х2 вокселей, индексы которых расположены в листьях SVO, отображаются на блоки вокселей 3х3х3 из 3D-текстуры:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F_s\u002F9f\u002Fc5\u002F_s9fc5vnfmxjwtohxjoblatvnc0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F_s\u002F9f\u002Fc5\u002F_s9fc5vnfmxjwtohxjoblatvnc0.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EОтображение группы вокселей в блок вокселей [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nГруппы вокселей, расположенные в сцене рядом друг с другом, в текстуре могут оказаться разбросаны (поскольку текстура строится на основе SVO). Поэтому для корректной интерполяции между соседними группами вокселей необходимо проделать дополнительную работу по усреднению значений между соседними блоками.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Ftx\u002Fnm\u002Fdc\u002Ftxnmdc2mj0v7tjky37swz223hay.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftx\u002Fnm\u002Fdc\u002Ftxnmdc2mj0v7tjky37swz223hay.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EУсреднение границ соседних блоков\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВоксели из блока располагаются по углам исходной группы вокселей и между ними. Таким образом, блоки занимают в пространстве больше места, чем исходные воксели. Но сэмплирование внутри блока будет производиться по границам исходных вокселей. Так появляется подобие некоторого разграничителя шириной в полпикселя, который никак не используется.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nБлоки, расположенные в соответствии с листьями SVO, — это отображение исходных вокселей. Блоки, расположенные в соответствии с остальными узлами SVO на определённых уровнях октодерева, — это MIP-уровни буфера блоков.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fpr\u002Fcj\u002Foa\u002Fprcjoa1npq1heopoywfpkvdxpua.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fpr\u002Fcj\u002Foa\u002Fprcjoa1npq1heopoywfpkvdxpua.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСхематичное изображение октодерева, его представления в текстуре и отображение в буфер блоков [SV]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nПри этом блоки не обязаны быть 3х3х3, они могут быть и 2x2x2, и 5х5х5 — это вопрос точности представления. Блоки 2х2х2 были бы ещё одним хорошим способом экономии памяти, но такого подхода я нигде не встречал.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Flq\u002Fs9\u002Fwq\u002Flqs9wqp_yd4ggilfthkbtondtsy.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Flq\u002Fs9\u002Fwq\u002Flqs9wqp_yd4ggilfthkbtondtsy.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСравнение интерполяции при сэмплировании четырёх соседних вокселей: без буфера блоков, из буфера блоков 3х3х3 и из буфера блоков 5х5х5\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nСоздание такого буфера блоков — довольно трудоёмкое занятие. Мы создадим два буфера: для хранения прозрачности сцены и для хранения освещения.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EЭтапы создания буфера блоков\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nПервый шаг — заполнение вокселей блоков, сопоставляемых с листьями октодерева. Допустим, мы вычисляем отражённое освещение в конкретных вокселях SVO. Тогда эти значения будут отображаться в соответствующие угловые воксели буфера блоков.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fka\u002F5r\u002Fj5\u002Fka5rj5az9iuqnwacsn2-q0aigzk.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fka\u002F5r\u002Fj5\u002Fka5rj5az9iuqnwacsn2-q0aigzk.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nПосле окончания вычисления исходящего освещения, для каждого блока дозаполним оставшиеся воксели усреднёнными значениями соседних вокселей внутри блока:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fjc\u002Fgq\u002Fcy\u002Fjcgqcyka7-fjkivpta7g0jjlly4.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjc\u002Fgq\u002Fcy\u002Fjcgqcyka7-fjkivpta7g0jjlly4.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nТеперь усредним значения между соседними блоками. Именно для этого в узлах дерева хранятся соседи в пространстве.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fsj\u002Fis\u002Fie\u002Fsjisiedurfjl0i5q3kzh_8ay4as.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsj\u002Fis\u002Fie\u002Fsjisiedurfjl0i5q3kzh_8ay4as.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EОдин из вариантов усреднения буфера блоков — по каждой из осей за три прохода. Красным прямоугольником помечены возможные артефакты при таком усреднении [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nСоздадим MIP-уровни такого буфера. Узлы верхних уровней SVO будут отображаться в блоки, которые содержат усреднённые значения с нижележащего уровня. Каждый блок, соответствующий узлу с верхнего уровня дерева, включает в себя информацию из блоков соответствующих потомков. Также это могут быть блоки, соответствующие не только непосредственно дочерним узлам в дереве, но и их соседям (см. рисунок ниже).\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fcv\u002Fpx\u002Fak\u002Fcvpxakjzyvycjxxd1bpay-ptb_o.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcv\u002Fpx\u002Fak\u002Fcvpxakjzyvycjxxd1bpay-ptb_o.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСлева — блок включает в себя информацию из дочерних блоков и их соседей. Справа — блок включает в себя информацию только из дочерних блоков [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nЧтобы уменьшить количество обращений к памяти, для каждого вычисляемого блока используются только воксели дочерних блоков (рисунок справа). После этого усредняются значения между соседними блоками, как описано выше. И так мы создаём MIP-уровни, пока не дойдём до корневого узла SVO.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nСоздадим два буфера — буфер блоков прозрачности сцены и буфер блоков отражённого освещения.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nБуфер блоков прозрачности создаётся предварительно, на основе вокселизированной геометрии сцены. Мы будем хранить направленную прозрачность вокселей. Для этого заполним RGB-значения вокселей блоков с нижнего уровня в соответствии с прозрачностью вокселей, а при создании MIP-уровней блоков для каждого вычисляемого вокселя будем выбирать усреднённое максимальное значение прозрачности по осям XYZ, и сохранять их в соответствующие RGB-значения текстуры. Такое решение помогает учитывать преграждение света в пространстве в определённом направлении.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Ftp\u002F9t\u002Fet\u002Ftp9tetblycaiahptuxtlutemti8.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftp\u002F9t\u002Fet\u002Ftp9tetblycaiahptuxtlutemti8.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EВ каждом направлении выбирается максимум в значении прозрачности (т.е. 1.0 — совершенно непрозрачный объект, и это значение будет максимальным). Далее, при конструировании MIP-уровней максимумы по осям XYZ в дочерних блоках усредняются и складываются в компоненты RGB. [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EЗапекание отражённого освещения\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nОсвещение, переотражённое вокселем, вычисляется путём обработки карты теней от рассчитываемых источников освещения. С помощью этой карты мы можем получить координаты объектов в пространстве и, используя SVO, преобразовать их в индексы освещаемых вокселей.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nОбычно разрешение карты теней выше разрешения октодерева. Оригинальная статья описывает подход, при котором каждый пиксель карты теней рассматривается как условный фотон. Соответственно, в зависимости от количества фотонов будет разный вклад в освещённость. В своей реализации я упростил этот этап и считал освещённость только один раз для каждого вокселя, попавшего в карту теней.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nЧтобы избежать повторных вычислений, для каждого вокселя, для которого уже было рассчитано отражённое освещение, мы воспользуемся битом флага узла октодерева, который хранит указатель на воксель. Также, при обработке карты теней можно среди пикселей, входящих в один и тот же воксель, выбирать для вычисления только левый верхний.\u003Cbr\u002F\u003E\n \u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fij\u002Fie\u002F5n\u002Fijie5nk33gqalek7hbobxhsmlym.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fij\u002Fie\u002F5n\u002Fijie5nk33gqalek7hbobxhsmlym.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fb9\u002Ft_\u002Fev\u002Fb9t_evpazubphu-tn9ylav06cfw.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fb9\u002Ft_\u002Fev\u002Fb9t_evpazubphu-tn9ylav06cfw.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EФрагмент карты теней (слева). Справа — красным показаны левые верхние пиксели, входящие в один и тот же воксель.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДля вычисления отражённой освещённости используется стандартный albedo * lightColor * dot(n, l), но в общем случае это зависит от BRDF. Вычисленная освещённость записывается в буфер блоков освещения. После обработки карты теней производится дозаполнение буфера блоков и создание MIP-уровней, как описано выше.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nАлгоритм достаточно дорогостоящий. Необходимо пересчитывать буфер блоков освещения при каждом изменении освещения. Один из возможных способов оптимизации — размазывание обновления буфера \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F320530\u002F\"\u003Eпо кадрам\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EСоздание G-Buffer\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nЧтобы для конкретного пикселя применить трассировку вокселей конусами, необходимо знать нормаль и местоположение пикселя в пространстве. Эти атрибуты используются для обхода SVO и соответствующего сэмплирования буфера блоков освещения. Получить эти атрибуты можно из \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FDeferred_shading\"\u003EG-buffer\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nС помощью G-buffer также можно вычислять переотражённое освещение в меньшем разрешении, чем у вьюпорта, что способствует улучшению производительности.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EТрассировка вокселей конусами\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\nКогда буфер блоков освещения вычислен, можно переходить к вычислению освещения, переотражённого от сцены на объекты в кадре — то есть глобального освещения. Для этого применяется трассировка вокселей конусами.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДля каждого пикселя испускается несколько конусов в соответствии с BRDF. В случае модели освещения по Ламберту, конусы испускаются равномерно по полусфере, ориентированной с помощью нормали, полученной из G-buffer.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fvo\u002Fkb\u002Fju\u002Fvokbjusy6l1bnclgllg7ti8nlc8.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fvo\u002Fkb\u002Fju\u002Fvokbjusy6l1bnclgllg7ti8nlc8.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EИспускание конусов с поверхности, для которой рассчитывается входящее освещение [VCT]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nПри вычислении мы допускаем, что освещённость, получаемая из точки на поверхности в направлении вокселя, будет такой же, как испущенная из вокселя в сторону поверхности в определённом конусе видимости.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F-v\u002Fsy\u002Fsw\u002F-vsysw1jb0hthbvknsy_t2mij-k.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F-v\u002Fsy\u002Fsw\u002F-vsysw1jb0hthbvknsy_t2mij-k.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003E[VCT]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nТрассировка производится пошагово. На каждом шаге сэмплируется буфер блоков освещения в соответствии с уровнем октодерева (т.е. в соответствии с созданными MIP-уровнями), начиная с самого нижнего и заканчивая самым верхним.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fc3\u002Fpy\u002Fnf\u002Fc3pynfn4u27dhtewd4bi3qg3vqy.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fc3\u002Fpy\u002Fnf\u002Fc3pynfn4u27dhtewd4bi3qg3vqy.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСэмплирование буфера блоков с помощью конуса в соответствии с уровнями SVO [DP]\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nТрассировка конусом производится аналогично рендерингу volumetric-объектов [A]. Т.е. используется модель alpha front-to-back, при которой на каждом следующем шаге вдоль конуса цвет и прозрачность вычисляются следующим образом:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Eс’ = с’ + ( 1 — а’ ) * с\nа’ = а’ + ( 1 — а’ ) * а\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\nгде а — прозрачность, с — значение, полученное из буфера блоков освещения, умноженное на прозрачность (premultiplied alpha).\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nЗначение прозрачности вычисляется с помощью буфера блоков прозрачности:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EopacityXYZ = opacityBrickBuffer.Sample( linearSampler, brickSamplePos ).rgb;\nalpha = dot( abs( normalize( coneDir ) * opacityXYZ ), 1.0f.xxx );\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\nИными словами, считывается прозрачность в направлении конуса в конкретной точке. Это не единственный подход. Можно, например, хранить прозрачность в альфа-канале буфера блоков освещения. Но тогда теряется направленность переотражённого освещения. Также я пробовал хранить направленную освещённость в шести буферах блоков освещения (по два на каждую ось) — затрат больше, чем видимых преимуществ.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nИтоговый результат по конусам взвешенно суммируется в зависимости от углов раствора конусов. Если все конусы одинаковые, вес делится поровну. Выбор количества конусов и размера углов раствора — это вопрос соотношения скорости и качества. В моей реализации 5 конусов по 60 градусов (один в центре, и 4 по бокам).\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nНа рисунке выше схематично показаны точки сэмплирования вдоль оси конуса. Рекомендуется выбирать расположение сэмплов таким образом, чтобы в конус вписывался узел октодерева с соответствующего уровня. Либо можно заменить на соответствующую сферу [SB]. Но тогда могут проявляться резкие границы вокселей, поэтому расположение сэмплов корректируется. В своей реализации я просто сдвигаю сэмплы ближе друг к другу.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nБонусом к переотражённому освещению мы также получаем затенение \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FAmbient_occlusion\"\u003EAmbient Occlusion\u003C\u002Fa\u003E, которое вычисляется исходя из значения альфы, полученного при трассировке. Также при просчёте AO на каждом шаге вдоль оси конуса вносится коррекция в зависимости от расстояния \u003Ccode\u003E1 \u002F (1 + lambda * distance)\u003C\u002Fcode\u003E, где lambda — калибровочный параметр.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nПолученный результат сохраняется в текстуру RGBA (RGB для освещения и A для AO). Для более гладкого результата на текстуру можно наложить размытие. Итоговый результат будет зависеть от BRDF. В моём случае вычисленное переотражение сначала умножается на альбедо поверхности, полученное из G-buffer, затем опционально умножается на AO, и наконец добавляется к основному освещению.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ целом, после определённых настроек и доработок картинка похожа на результат из статьи.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fvo\u002Fvv\u002Fdj\u002Fvovvdjkgrzvolz9zi1qzxq24z9o.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fvo\u002Fvv\u002Fdj\u002Fvovvdjkgrzvolz9zi1qzxq24z9o.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fiq\u002Fjj\u002Fgx\u002Fiqjjgxcayddeo2rjmhjzogpu7mo.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiq\u002Fjj\u002Fgx\u002Fiqjjgxcayddeo2rjmhjzogpu7mo.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fiz\u002Fa6\u002Feh\u002Fiza6ehbdgctiymft3a6dksjupm4.png\" width=\"250\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiz\u002Fa6\u002Feh\u002Fiza6ehbdgctiymft3a6dksjupm4.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EСравнение результатов — слева сцена, отрендеренная в Mental Ray, справа — Voxel Cone Tracing из оригинальной статьи, в центре — моя реализация.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Ch2\u003EПодводные камни\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\n\u003Cb\u003EПроблема самоосвещения\u003C\u002Fb\u003E. Поскольку в большинстве случаев поверхность физически расположена в своих же вокселях, необходимо как-то бороться с самоосвещением. Одним из решений является отодвигание начала конусов в направлении нормалей. Также этой проблемы теоретически можно избежать, если в вокселях хранить направленное распределение освещения.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cb\u003EПроблема производительности\u003C\u002Fb\u003E. Алгоритм довольно сложный, и придётся потратить немало времени на эффективную реализацию на GPU. Я писал реализацию «в лоб», применяя довольно очевидные оптимизации, и нагрузка получилась высокой. При этом даже оптимизированный алгоритм при поиске вокселей в дереве будет требовать множество зависящих друг от друга сэмплов текстуры SVO.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ моей реализации я испускаю 5 конусов, сэмплируя буферы блоков для 4 предпоследних уровней октодерева 256х256х256. Согласно Intel GPA, относительное распределение производительности получилось таким:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F82\u002Fxg\u002Fty\u002F82xgty-qwgptlroykcda2s6siso.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F82\u002Fxg\u002Fty\u002F82xgty-qwgptlroykcda2s6siso.png\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003EРаспределение производительности. G-Buffer и Shadow Map без предварительного кулинга.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nВ оригинальной статье используются три диффузных конуса на текстуре 512х512 на всём SVO (512x512x512 — 9 уровней). Вместе с прямым освещением это занимает ~45% времени кадра 512х512. Есть куда стремиться. Также необходимо уделить внимание оптимизации обновления буфера освещения.\u003Cbr\u002F\u003E\n \u003Cbr\u002F\u003E\nЕщё одной проблемой алгоритма является \u003Cb\u003Eпросачивание света сквозь объекты\u003C\u002Fb\u003E (light leaking). Такое случается с тонкими объектами, которые вносят малый вклад в буфер блоков прозрачности. Также этому явлению подвержены плоскости, расположенные рядом с освещёнными вокселями нижних уровней SVO:\u003Cbr\u002F\u003E\n \u003Cbr\u002F\u003E\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fya\u002Fgc\u002Fvw\u002Fyagcvwcbmbuaft0db2xpnczcsw4.png\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fya\u002Fgc\u002Fvw\u002Fyagcvwcbmbuaft0db2xpnczcsw4.png\"\u002F\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002Fiw\u002Fxu\u002F0f\u002Fiwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg\" width=\"370\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiw\u002Fxu\u002F0f\u002Fiwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\n\u003Ci\u003ELight leaking: слева — при использовании алгоритма VCT, справа — в реальной жизни. Этот эффект можно ослабить с помощью AO.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nИз всего вышесказанного вытекает ещё одно следствие: не так просто настроить алгоритм, чтобы получить хорошую картинку — сколько брать конусов, сколько уровней SVO, с какими коэффициентами и т.д.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nМы рассмотрели только статические объекты сцены. Для хранения динамических объектов потребуется модифицировать SVO и соответствующие буферы. Как правило, в этом случае предлагают раздельно хранить статические и динамические узлы.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nПодводя итог, я бы не стал рекомендовать эту технику, если у вас нет достаточно времени, терпения и сил. Но зато она поможет добиться правдоподобного ambient-освещения.\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\nДемонстрация в динамике:\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv\u003E\u003Cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.2493%;\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FgK837_HTfNU?rel=0&amp;showinfo=1\" data-style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" id=\"\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\nСсылка на приложение: \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FDarkxiv\u002FVoxelConeTracing\"\u003Ehttps:\u002F\u002Fgithub.com\u002FDarkxiv\u002FVoxelConeTracing\u003C\u002Fa\u003E (bin\u002FVCT.exe)\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cb\u003EСписок источников и ресурсов, которые могут помочь в реализации воксельной трассировки конусами:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\n\u003Cbr\u002F\u003E\n\u003Cul\u003E\n\u003Cli\u003E[VCT] Оригинальная статья: \u003Ca href=\"http:\u002F\u002Fresearch.nvidia.com\u002Fsites\u002Fdefault\u002Ffiles\u002Fpublications\u002FGIVoxels-pg2011-authors.pdf\"\u003Ehttp:\u002F\u002Fresearch.nvidia.com\u002Fsites\u002Fdefault\u002Ffiles\u002Fpublications\u002FGIVoxels-pg2011-authors.pdf\u003C\u002Fa\u003E \u003C\u002Fli\u003E\n\u003Cli\u003E[SV] Дополнение к оригинальной статье, в которой разъясняется вокселизация и SVO: \u003Ca href=\"https:\u002F\u002Fwww.seas.upenn.edu\u002F~pcozzi\u002FOpenGLInsights\u002FOpenGLInsights-SparseVoxelization.pdf\"\u003Ehttps:\u002F\u002Fwww.seas.upenn.edu\u002F~pcozzi\u002FOpenGLInsights\u002FOpenGLInsights-SparseVoxelization.pdf\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E[S4552] Презентация NVIDIA: \u003Ca href=\"http:\u002F\u002Fon-demand.gputechconf.com\u002Fgtc\u002F2014\u002Fpresentations\u002FS4552-rt-voxel-based-global-illumination-gpus.pdf\"\u003Ehttp:\u002F\u002Fon-demand.gputechconf.com\u002Fgtc\u002F2014\u002Fpresentations\u002FS4552-rt-voxel-based-global-illumination-gpus.pdf\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E[A] Модель alpha front-to-back: \u003Ca href=\"http:\u002F\u002Fdeveloper.download.nvidia.com\u002Fbooks\u002FHTML\u002Fgpugems\u002Fgpugems_ch39.html\"\u003Ehttp:\u002F\u002Fdeveloper.download.nvidia.com\u002Fbooks\u002FHTML\u002Fgpugems\u002Fgpugems_ch39.html\u003C\u002Fa\u003E \u003C\u002Fli\u003E\n\u003Cli\u003E[DP] Диплом, сделанный на основе оригинальной статьи: \u003Ca href=\"http:\u002F\u002Fdcgi.felk.cvut.cz\u002Ftheses\u002F2013\u002Fdrinotom\"\u003Ehttp:\u002F\u002Fdcgi.felk.cvut.cz\u002Ftheses\u002F2013\u002Fdrinotom\u003C\u002Fa\u003E \u003C\u002Fli\u003E\n\u003Cli\u003E[SB] Описание ещё одной реализации VCT: \u003Ca href=\"http:\u002F\u002Fsimonstechblog.blogspot.ru\u002F2013\u002F01\u002Fimplementing-voxel-cone-tracing.html\"\u003Ehttp:\u002F\u002Fsimonstechblog.blogspot.ru\u002F2013\u002F01\u002Fimplementing-voxel-cone-tracing.html\u003C\u002Fa\u003E \u003C\u002Fli\u003E\n\u003Cli\u003EСлайды с реализацией в UE4: \u003Ca href=\"https:\u002F\u002Fwww.yumpu.com\u002Fen\u002Fdocument\u002Fview\u002F4694219\u002Fthe-technology-behind-the-elemental-demo-unreal-engine\"\u003Ehttps:\u002F\u002Fwww.yumpu.com\u002Fen\u002Fdocument\u002Fview\u002F4694219\u002Fthe-technology-behind-the-elemental-demo-unreal-engine\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EОбъяснение сэмплирования ambient кубов: \u003Ca href=\"http:\u002F\u002Fwww.valvesoftware.com\u002Fpublications\u002F2006\u002FSIGGRAPH06_Course_ShadingInValvesSourceEngine.pdf\"\u003Ehttp:\u002F\u002Fwww.valvesoftware.com\u002Fpublications\u002F2006\u002FSIGGRAPH06_Course_ShadingInValvesSourceEngine.pdf\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EБиблиотека sparse octree от NVIDIA \u003Ca href=\"https:\u002F\u002Fdeveloper.nvidia.com\u002Fgvdb\"\u003Ehttps:\u002F\u002Fdeveloper.nvidia.com\u002Fgvdb\u003C\u002Fa\u003E \u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"освещение"},{"titleHtml":"Voxel Cone Tracing"},{"titleHtml":"компьютерная графика"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F353740\u002Fed1a03e82ea638136d826ac1d79d0d67\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F353740\u002Fed1a03e82ea638136d826ac1d79d0d67\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fvk\\\u002Farticles\\\u002F353740\\\u002F\"},\"headline\":\"Глобальное освещение с использованием трассировки вокселей конусами\",\"datePublished\":\"2018-04-19T15:48:28+03:00\",\"dateModified\":\"2018-04-19T15:56:22+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Валентин Донцов\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого \\\u002F ambient) освещения, применяемого в некоторых играх и других про...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fvk\\\u002Farticles\\\u002F353740\\\u002F#post-content-body\",\"about\":[\"c_vk\",\"h_algorithms\",\"h_programming\",\"h_gamedev\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fdo\\\u002Fxf\\\u002Fku\\\u002Fdoxfkuomv9hf057k6gzpg_bbyd4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fni\\\u002Fsb\\\u002Fgx\\\u002Fnisbgxdludojmoycwu_6zjjfp94.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fph\\\u002F2h\\\u002Fvu\\\u002Fph2hvu9ipi3w1qejvhjfx-6jmdk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fav\\\u002Fdv\\\u002Fr2\\\u002Favdvr25o1jmpjrwh8vqdtziy7se.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fsp\\\u002Fps\\\u002Fae\\\u002Fsppsaet4gpibjrhjuoyw24fsyay.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Foa\\\u002F2e\\\u002Ft1\\\u002Foa2et1hc3eol3yrmm4vvrxmkctu.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fhd\\\u002Ftu\\\u002Fq1\\\u002Fhdtuq143ovkt67za5y-09pxattw.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fdq\\\u002F-q\\\u002Fzy\\\u002Fdq-qzycuif4dsfmeevyltf23pv8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F7x\\\u002Fmh\\\u002Fci\\\u002F7xmhcikd5lnuria3k9xp1fju42i.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F9l\\\u002F_l\\\u002Fxv\\\u002F9l_lxveo4xk3ngddgle8bfbi0ze.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F3g\\\u002Ftb\\\u002Fd1\\\u002F3gtbd1n2tiarwetmycl_bap-p2o.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fhq\\\u002Fuj\\\u002Fr6\\\u002Fhqujr6cn1tcrsh9pqicgblf3afy.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fxs\\\u002Ffq\\\u002Fbo\\\u002Fxsfqbowfk1zkrsvwumg5lfdvwpk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fce\\\u002F5v\\\u002Frh\\\u002Fce5vrhmsnjudwod7nplfbtns4oc.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fz_\\\u002Frc\\\u002Fb7\\\u002Fz_rcb7_hnkjupwtab6vdm9kczra.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F_s\\\u002F9f\\\u002Fc5\\\u002F_s9fc5vnfmxjwtohxjoblatvnc0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Ftx\\\u002Fnm\\\u002Fdc\\\u002Ftxnmdc2mj0v7tjky37swz223hay.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fpr\\\u002Fcj\\\u002Foa\\\u002Fprcjoa1npq1heopoywfpkvdxpua.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Flq\\\u002Fs9\\\u002Fwq\\\u002Flqs9wqp_yd4ggilfthkbtondtsy.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fka\\\u002F5r\\\u002Fj5\\\u002Fka5rj5az9iuqnwacsn2-q0aigzk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fjc\\\u002Fgq\\\u002Fcy\\\u002Fjcgqcyka7-fjkivpta7g0jjlly4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fsj\\\u002Fis\\\u002Fie\\\u002Fsjisiedurfjl0i5q3kzh_8ay4as.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fcv\\\u002Fpx\\\u002Fak\\\u002Fcvpxakjzyvycjxxd1bpay-ptb_o.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Ftp\\\u002F9t\\\u002Fet\\\u002Ftp9tetblycaiahptuxtlutemti8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fij\\\u002Fie\\\u002F5n\\\u002Fijie5nk33gqalek7hbobxhsmlym.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fb9\\\u002Ft_\\\u002Fev\\\u002Fb9t_evpazubphu-tn9ylav06cfw.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fvo\\\u002Fkb\\\u002Fju\\\u002Fvokbjusy6l1bnclgllg7ti8nlc8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F-v\\\u002Fsy\\\u002Fsw\\\u002F-vsysw1jb0hthbvknsy_t2mij-k.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fc3\\\u002Fpy\\\u002Fnf\\\u002Fc3pynfn4u27dhtewd4bi3qg3vqy.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fvo\\\u002Fvv\\\u002Fdj\\\u002Fvovvdjkgrzvolz9zi1qzxq24z9o.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fiq\\\u002Fjj\\\u002Fgx\\\u002Fiqjjgxcayddeo2rjmhjzogpu7mo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fiz\\\u002Fa6\\\u002Feh\\\u002Fiza6ehbdgctiymft3a6dksjupm4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F82\\\u002Fxg\\\u002Fty\\\u002F82xgty-qwgptlroykcda2s6siso.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fya\\\u002Fgc\\\u002Fvw\\\u002Fyagcvwcbmbuaft0db2xpnczcsw4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fiw\\\u002Fxu\\\u002F0f\\\u002Fiwxu0fc9xgcw5aacw-ky1qlv9kw.jpeg\"]}","metaDescription":"В этой статье я расскажу о реализации одного из алгоритмов расчёта глобального (переотражённого \u002F ambient) освещения, применяемого в некоторых играх и других продуктах, — Voxel Cone Tracing (VCT)....","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":null,"banner":null,"multiwidget":null,"multiwidgetUuid":null,"readingTime":13,"complexity":null,"isEditorial":false,"allowedFeatures":{"isTestTargetAllow":false}}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":["159389","850486","850450","800673","848586","780102","731028"],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"myFeedIsApplyFilters":false,"myFeedIsForce":false,"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"vk":{"alias":"vk","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F9ed\u002Fc74\u002F6b4\u002F9edc746b484c805ecad1f941b5f7068a.png","titleHtml":"VK","descriptionHtml":"Технологии, которые объединяют","relatedData":null,"statistics":{"subscribersCount":220671,"rating":319.74,"invest":null,"postsCount":2678,"threadsCount":2,"newsCount":315,"vacanciesCount":30,"employeesCount":709,"careerRating":3.75},"foundationDate":{"year":"1998","month":"10","day":"15"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fteam.vk.company\u002F","staffNumber":"свыше 10 000 человек","registrationDate":"2008-08-09T07:42:32+00:00","representativeUser":null,"contacts":[{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Finside_vk","siteTitle":null,"favicon":null},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Finsidevk","siteTitle":"VK | VK","favicon":"https:\u002F\u002Fm.vk.com\u002Fimages\u002Ficons\u002Ffavicons\u002Ffav_logo.ico?9"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Finside_vk","siteTitle":"Telegram: Contact @inside_vk","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"}],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-16546458-6"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F174\u002F2c4\u002F3a5\u002F1742c43a5b504987a0fadf577a0bd4de.png","linkUrl":"https:\u002F\u002Fvk.com\u002Fvkteam","pixelUrl":null,"uuid":"0191e176-5a3c-73ca-aadc-aa189095d32a"},"status":"active","isStartup":false,"hasActivePolls":false,"shouldShowHabrAds":false},"metadata":{"titleHtml":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","title":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","keywords":["DevOps","Kubernetes","Tarantool","Машинное обучение","Разработка под Android","vk cloud","mail.ru","никто не читает теги","tarantool","kubernetes","mail.ru cloud solutions","вконтакте","mail.ru group","vk cloud solutions","devops","python","geekbrains","разработка","machine learning","машинное обучение","vk","android","javascript","php","ml"],"descriptionHtml":"2 678 статей от авторов компании VK","description":"2 678 статей от авторов компании VK"},"aDeskSettings":null,"careerAlias":"vk","schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companyAdd":{"currentStep":"","stepsData":{},"uncompletedSteps":[],"isStepLoading":true,"isStepCommitting":false,"isInitialized":false,"agreementContent":""},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop","hl":"ru"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin","hl":"ru"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design","hl":"ru"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management","hl":"ru"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing","hl":"ru"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci","hl":"ru"}}}],"updates":{}},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F353740\u002F","path":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F353740\u002F","href":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F353740\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null,"userUpdates":{"feeds":{"newPostsCount":null,"newThreadsCount":null,"newNewsCount":null,"newCount":null},"conversationUnreadCount":0}},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{"vacancies":"project-block-company-article"}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null,"sticker":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":true,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[{"id":"story-898","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F07b\u002F9ff\u002F0ce\u002F07b9ff0ceb40d585c0cbd11fb760eae5.png","title":"Хабр Новости","link":"https:\u002F\u002Fu.habr.com\u002FBguaB"},"title":"Выложены новые фото \"Орла\"","lang":"ru","startTime":"2024-11-05T16:03:00+03:00","finishTime":"2024-11-11T16:03:00+03:00","slides":[{"id":"story-898_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe33\u002F46f\u002F0e6\u002Fe3346f0e6f73698ccd294f7518be4d45.jpg","button":{"title":"Подробнее","link":"https:\u002F\u002Fu.habr.com\u002FBguaB","colorType":"dark"}},{"id":"story-898_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F66e\u002F5c5\u002F1d4\u002F66e5c51d4ecca3859ab78c58ed35aa83.jpg","button":{"title":"Читать","link":"https:\u002F\u002Fu.habr.com\u002FBguaB","colorType":"dark"}},{"id":"story-898_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fef3\u002F42a\u002Fa7d\u002Fef342aa7d17aaa75c94c4f4241aca42b.jpg","button":{"title":"Узнать больше","link":"https:\u002F\u002Fu.habr.com\u002FBguaB","colorType":"light"}}]},{"id":"story-896","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4b8\u002F041\u002F561\u002F4b8041561fb04f36a61f2ffc88a233e7.PNG","title":"Merge Skolkovo 2024","link":"https:\u002F\u002Fu.habr.com\u002Fmerge"},"title":"Спрошу у лида","lang":"ru","startTime":"2024-11-02T15:15:00+03:00","finishTime":"2024-11-15T01:01:00+03:00","slides":[{"id":"story-896_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F969\u002F799\u002F568\u002F9697995683d3acac39538d66f134ab07.png","button":null},{"id":"story-896_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F26e\u002F6d9\u002F6e0\u002F26e6d96e059f7900497e38f2a7037e34.png","button":{"title":"Обмен опытом","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}},{"id":"story-896_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F43e\u002F350\u002Fba2\u002F43e350ba2d313f4807c6954d62b37fac.png","button":null},{"id":"story-896_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8f7\u002F10d\u002F64d\u002F8f710d64d9ec3600ac3d906e64e7b202.png","button":{"title":"Общение с экспертами","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}},{"id":"story-896_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc5\u002F269\u002Fbdf\u002Fdc5269bdfdf8b95896646bc5bd392253.png","button":null},{"id":"story-896_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb65\u002F5f3\u002F719\u002Fb655f37196f82f739e18464f7210273b.png","button":{"title":"Лучшие практики","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}},{"id":"story-896_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F305\u002F6f8\u002Ffc6\u002F3056f8fc66d834df325dedf8012a72bf.png","button":{"title":"Merge Skolkovo 2024","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}},{"id":"story-896_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F844\u002Fac9\u002F854\u002F844ac9854199379b03b6f7c5f4f7dfda.png","button":null},{"id":"story-896_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcfb\u002Fc3d\u002F28a\u002Fcfbc3d28aeed8d3cedbf63c37ed1d8f9.png","button":{"title":"Программа","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}},{"id":"story-896_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F081\u002Fe5e\u002Fae4\u002F081e5eae40e02dae3e1403d3a23df3b0.png","button":{"title":"Как же без афтепати?","link":"https:\u002F\u002Fu.habr.com\u002Fmerge","colorType":"light"}}]},{"id":"story-894","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4ab\u002F8c5\u002F593\u002F4ab8c559308662f410089a748e83c885.png","title":"Хабр","link":null},"title":"Сладость или гадость?","lang":"ru","startTime":"2024-10-30T14:37:00+03:00","finishTime":"2024-11-11T14:37:00+03:00","slides":[{"id":"story-894_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F589\u002F7e7\u002Ff17\u002F5897e7f17d42d743d6bbf00543707ac7.jpg","button":null},{"id":"story-894_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faa7\u002Fc0d\u002F84c\u002Faa7c0d84c324efe828e08be53689f795.jpg","button":{"title":"Что там внутри","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fskillfactory\u002Farticles\u002F526746\u002F","colorType":"dark"}},{"id":"story-894_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F774\u002F18f\u002F9a1\u002F77418f9a13adad1a9bb794d079008353.jpg","button":{"title":"Тыквы и репки","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F769766\u002F","colorType":"light"}},{"id":"story-894_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ffaf\u002F3d6\u002Fec5\u002Ffaf3d6ec5a075a86823adeb6911c43f1.jpg","button":{"title":"Они светятся","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fua-hosting\u002Farticles\u002F427573\u002F","colorType":"light"}},{"id":"story-894_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa46\u002F7d2\u002F42a\u002Fa467d242ab6bd00c4deb1dfb870a31b4.jpg","button":{"title":"Суть проблемы","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F770438\u002F","colorType":"dark"}},{"id":"story-894_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F774\u002F2f8\u002Ff9a\u002F7742f8f9a41debec2226bf7631262668.jpg","button":{"title":"Что это за шум?","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Faudiomania\u002Farticles\u002F398071\u002F","colorType":"light"}},{"id":"story-894_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa74\u002Feda\u002F76d\u002Fa74eda76d93bf9d271088c06c82eb837.jpg","button":{"title":"Во льдах","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Farticles\u002F741572\u002F","colorType":"light"}},{"id":"story-894_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb2d\u002F754\u002F87b\u002Fb2d75487b2172c1166cc59b45364effd.jpg","button":{"title":"Фхтагн!","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F735952\u002F","colorType":"light"}}]},{"id":"story-890","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F57e\u002F1b2\u002Fb4d\u002F57e1b2b4d9cc697f1da8a4c486cee329.png","title":"Хабр","link":null},"title":"Топ-7 годных статей из блогов компаний","lang":"ru","startTime":"2024-10-29T14:45:00+03:00","finishTime":"2024-11-12T23:51:00+03:00","slides":[{"id":"story-890_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8ad\u002F6b6\u002F1e0\u002F8ad6b61e0959251147282cd8aa6b4b61.jpg","button":null},{"id":"story-890_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F14b\u002F9bd\u002F808\u002F14b9bd808a9afcba745aa35d23a24f9d.jpg","button":{"title":"Шаг за шагом","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F849564\u002F","colorType":"light"}},{"id":"story-890_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9fc\u002F731\u002F647\u002F9fc73164731216a24aefc416ba666437.jpg","button":{"title":"Материалы дела","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F843386\u002F","colorType":"light"}},{"id":"story-890_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2ce\u002Fb9f\u002F1cf\u002F2ceb9f1cfc8165ad9e86a96c368379ba.jpg","button":{"title":"Помощь выживальщику","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F850268\u002F","colorType":"dark"}},{"id":"story-890_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F68b\u002F03f\u002F6ae\u002F68b03f6ae22f51c8d19d170b152a8d9f.jpg","button":{"title":"Три причины","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fru_mts\u002Farticles\u002F850420\u002F","colorType":"dark"}},{"id":"story-890_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F22d\u002Ff5c\u002F535\u002F22df5c535e03a1d9350e3af6279f668f.jpg","button":{"title":"Мяу!","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fselectel\u002Farticles\u002F852468\u002F","colorType":"light"}},{"id":"story-890_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0c1\u002Fe0c\u002F113\u002F0c1e0c1134a6434e50c5219032afa6cc.jpg","button":{"title":"Памятка","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fotus\u002Farticles\u002F851942\u002F","colorType":"dark"}},{"id":"story-890_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F502\u002F40c\u002Fb84\u002F50240cb84e05dde79b8cb289bee3b0b8.jpg","button":{"title":"Назад в прошлое","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fsravni\u002Farticles\u002F849150\u002F","colorType":"light"}}]},{"id":"story-888","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5b5\u002F1a8\u002F6e0\u002F5b51a86e0cd2a75c7405687647d66c9d.png","title":"Cloud.ru","link":"https:\u002F\u002Fu.habr.com\u002Fsleague"},"title":"Облачный IT-турнир","lang":"ru","startTime":"2024-10-23T16:22:00+03:00","finishTime":"2024-11-09T23:59:00+03:00","slides":[{"id":"story-888_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdf1\u002Fea0\u002F64a\u002Fdf1ea064ad40c6e478a2592336bf65e9.png","button":{"title":"Принять вызов","link":"https:\u002F\u002Fu.habr.com\u002Fsleague","colorType":"light"}},{"id":"story-888_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8c6\u002F848\u002F600\u002F8c6848600e26e794d3d23d08f9776b5d.png","button":{"title":"Проверь навыки","link":"https:\u002F\u002Fu.habr.com\u002Fsleague","colorType":"light"}},{"id":"story-888_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F29c\u002F24e\u002F490\u002F29c24e49045f4af41aec5f806c24b2fd.png","button":{"title":"Стань чемпионом","link":"https:\u002F\u002Fu.habr.com\u002Fsleague","colorType":"light"}},{"id":"story-888_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd9b\u002F002\u002Fbc4\u002Fd9b002bc4924bf4433d5a1a5d0ab30d8.png","button":{"title":"Кто войдет в IT-Лигу","link":"https:\u002F\u002Fu.habr.com\u002Fsleague","colorType":"light"}},{"id":"story-888_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F930\u002Fbe8\u002F744\u002F930be87445a1ea9c4ad1748b1d621d23.png","button":{"title":"Участвовать","link":"https:\u002F\u002Fu.habr.com\u002Fsleague","colorType":"light"}}]},{"id":"story-693","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0cf\u002F765\u002F121\u002F0cf76512167ee1882bea64eb2d8f3e7b.png","title":"Хабр","link":"https:\u002F\u002Fu.habr.com\u002Fhabr_events-1"},"title":"Как продвинуть машину времени?","lang":"ru","startTime":"2024-02-20T10:45:00+03:00","finishTime":"2024-11-13T13:45:00+03:00","slides":[{"id":"story-693_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcbd\u002Fc0a\u002Fd0e\u002Fcbdc0ad0e6056f661d1e8fa146c9aa30.png","button":null},{"id":"story-693_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F688\u002Fd52\u002Fcc8\u002F688d52cc88ed33a3f4d72d118440c012.png","button":null},{"id":"story-693_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7e0\u002F8a4\u002Fea4\u002F7e08a4ea42768ced281eea267e56c7bb.png","button":null},{"id":"story-693_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9f0\u002F2ae\u002F56c\u002F9f02ae56c1ee55937c0c31afb3743fd4.png","button":{"title":"Добавить событие","link":"https:\u002F\u002Fu.habr.com\u002Fhabr_events-2","colorType":"light"}},{"id":"story-693_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa16\u002F6dc\u002Fc79\u002Fa166dcc79e282edf107842ee8a5d32d0.png","button":null},{"id":"story-693_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F987\u002F258\u002F779\u002F987258779f88a78646ef069dad1a4dbb.png","button":{"title":"Хабр Календарь тут","link":"https:\u002F\u002Fu.habr.com\u002Fhabr_events-2","colorType":"light"}}]}]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"eventRefs":{},"eventIds":[],"pagesCount":0,"categories":[],"cities":[],"actualEvents":[{"id":"508","titleHtml":"ТурбоХакатон «Решения для электроэнергетики на базе искусственного интеллекта»","descriptionHtml":"\u003Cp\u003EТурбоХакатон — это соревнование для молодых, талантливых Data Science и Deep Learning специалистов. Ты сможешь решить интересные задачи, основываясь на реальных датасетах компании Группы «Интер РАО». Здесь ты получишь бесценный опыт, фидбек от представителей компании и найдешь единомышленников. Эксперты «СИГМЫ» станут твоими наставниками и помогут в реализации твоего проекта.\u003C\u002Fp\u003E\u003Cp\u003EНе упусти шанс принять участие в самом значимом хакатоне в сфере электроэнергетики и заявить о себе. Самые активные участники получат денежные призы, а также возможность пройти стажировку и даже трудоустроиться в крупнейшую IT-компанию, специализирующуюся на цифровизации энергетики.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EМероприятие пройдет в очном и заочном форматах.\u003C\u002Fp\u003E\u003Cp\u003EУчаствовать можно индивидуально и в командах до 5 человек.\u003C\u002Fp\u003E\u003Cp\u003EПредварительный отбор и подача заявок от участников на сайте хакатона заканчиваются 4 октября 2024 года, в 23:59 по Москве.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8be\u002F3e7\u002F727\u002F8be3e7727742695af74edf9d971dafb4.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_sgm","startDay":"2024-10-08","startTime":"12:00","finishDay":"2024-12-04","finishTime":"23:59","isOnline":true,"geo":[],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"16","titleHtml":"Другое"}],"tags":["энергетика","хакатон","ии","ai","искусственный интеллект"],"metadata":null},{"id":"544","titleHtml":"Вайб-чек для бэкендеров на Хабр Карьере","descriptionHtml":"\u003Cp\u003EНайти команду, в которой атмосфера будет сочетаться со здоровой бюрократией, интересными задачами и хорошей зарплатой — трудно, и сейчас мы не сказали ничего нового. Специалисты с Хабр Карьеры рассказали нам, что хотят знать как можно больше про команду еще до отклика на вакансию.\u003C\u002Fp\u003E\u003Cp\u003EВайб-чек — это что-то вроде онлайн-вечеринки, где можно лично познакомиться с командами бэкенда, поиграть с ними в настолку, задать будущим коллегам вопросы и узнать больше, чем написано в вакансиях. И классный бонус: среди всех участников мы разыграем одну карьерную консультацию с руководителем отдела подбора и развития бренда работодателя X5 Digital.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EРегистрируйтесь, чтобы ничего не пропустить! Начинаем в понедельник, 11 ноября.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F875\u002F762\u002Fdb2\u002F875762db2bceaf902002b2f3063c7d30.jpg","eventUrl":"https:\u002F\u002Fvibe.habr.com\u002F?utm_source=vibe_check_backend2_calendar","startDay":"2024-11-05","finishDay":"2024-11-17","isOnline":true,"geo":[],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"}],"tags":["Карьера в IT-индустрии","Разработка"],"metadata":null},{"id":"490","titleHtml":"Конференция byteoilgas_conf 2024","descriptionHtml":"\u003Cp\u003EВторая профессиональная конференция для разработчиков, работающих в нефтегазовой отрасли и создающих крутые продукты для ТЭК. byteoilgas_conf 2024 — это качественный отраслевой контент, обмен опытом и много интересных дискуссий.\u003C\u002Fp\u003E\u003Cp\u003EМы приглашаем:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eразработчиков IT и цифровых высоконагруженных систем;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EDevOps-специалистов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eархитекторов IT;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпродуктовых аналитиков;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпродакт-менеджеров.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EУчастие бесплатное. Мероприятие состоится при поддержке компаний «Газпром нефть» и Positive Technologies.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F19f\u002F679\u002F3d2\u002F19f6793d2ada871eb278e823c4c0d96a.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_oilconf","startDay":"2024-11-07","startTime":"10:00","finishDay":"2024-11-08","finishTime":"20:00","isOnline":true,"geo":["Москва"],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"8","titleHtml":"Менеджмент"}],"tags":["разработка","devops","архитектура","продакт-менеджмент","продуктовая аналитика","высоконагруженные системы","нефтегаз","нефть","газ"],"metadata":null},{"id":"510","titleHtml":"Конференция «Матемаркетинг»","descriptionHtml":"\u003Cp\u003EМатемаркетинг — большая ежегодная конференция, посвященная вопросам маркетинговой и продуктовой аналитики\u003C\u002Fp\u003E\u003Cp\u003EВ этом году мероприятие пройдет уже в шестой раз и соберет на одной площадке более 2000 гостей — специалистов из сфер электронной коммерции, ритейла, телекоммуникаций, банкинга, онлайн-образования и многих других.\u003C\u002Fp\u003E\u003Cp\u003EНасыщенная программа состоит из трех дней: 29 октября — онлайн, а 7 и 8 ноября — офлайн в кластере «Ломоносов».\u003C\u002Fp\u003E\u003Cp\u003EОжидается более 120 докладов, панельных дискуссий, экспертных сессий, на которых спикеры поделятся своим опытом в области передовых маркетинговых технологий, data-driven управления, оптимизации рекламных бюджетов, стабилизации маркетинговых результатов, а также проведения А\u002FВ-экспериментов и работе с BI-системами.\u003C\u002Fp\u003E\u003Cp\u003EСпикеры конференции — известные личности и практикующие эксперты из крупнейших российских компаний: «Яндекс», VK, «МТС», OZON, «Авито». \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbcc\u002F3cf\u002Fdc4\u002Fbcc3cfdc46bb911cdad9654c6e0861ac.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_mtmrktng","startDay":"2024-11-07","startTime":"10:00","finishDay":"2024-11-08","finishTime":"18:00","isOnline":true,"geo":["Москва"],"isArchive":false,"categories":[{"id":"10","titleHtml":"Маркетинг"},{"id":"12","titleHtml":"Аналитика"}],"tags":["маркетинг","ml","machine leanring","реклама"],"metadata":null},{"id":"546","titleHtml":"Шоу-финал чемпионата по программированию и фестиваль технологий True Tech Champ","descriptionHtml":"\u003Cp\u003E8 ноября приглашаем вас на True Tech Champ — масштабное ИТ-событие для опытных и начинающих разработчиков. Организаторы совместили шоу-финал чемпионата по программированию с технологическим фестивалем и добавили выступления топовых ИТ-профессионалов. Будет интересно ИТ-специалистам разного уровня, студентам технических специальностей и всем, кто интересуется современными технологиями.\u003C\u002Fp\u003E\u003Cp\u003EВы сможете увидеть гонку роботов робомыши будут проходить лабиринт на скорость, а задачу для них усложнят подвижные модули, огонь, дым и вспышки света.\u003Cbr\u003EПараллельно профессор биофака МГУ Вячеслав Дубынин расскажет, как стремление побеждать формирует характер и влияет на мозг. Специалист МТС по ИИ Даниил Киреев объяснит, почему LLM — это не панацея для решения задач, а исследователь из Сколтеха Артем Якимчук расскажет, как виртуальная реальность помогает готовить роботов к работе в реальном мире.\u003C\u002Fp\u003E\u003Cp\u003EВключения с True Tech Garage покажут кодерские и развлекательные активности для гостей: мастер-класс от белого взломщика, экстрим-кодинг, гик-хендмейд, мастер-класс, как избавиться от лишней работы и т.д.\u003C\u002Fp\u003E\u003Cp\u003EСмотрите всё самое интересное онлайн.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa0c\u002F679\u002F669\u002Fa0c679669421260bac5e42be8420bd86.webp","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_truetechchamp","startDay":"2024-11-08","startTime":"10:00","finishDay":"2024-11-08","finishTime":"19:00","isOnline":true,"geo":["Москва"],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"16","titleHtml":"Другое"}],"tags":["конференция","чемпионат","программирование","трансляция","лекции","мастер-класс","IT"],"metadata":null},{"id":"534","titleHtml":"Конференция «ViRush 2024: BigData, ИИ и новые практики работы с BI»","descriptionHtml":"\u003Cp\u003EВысокая производительность, работа с BigData, реальные кейсы внедрения, импортозамещение без купюр, практики управления на основе данных и откровенное обсуждение самых злободневных вопросов в сфере бизнес-аналитики. Всё это вы найдёте на конференции ViRush 2024 – ежегодном мероприятии Visiology.\u003C\u002Fp\u003E\u003Cp\u003EПартнёрами конференции выступают компании Arenadata, Merlion, «Полианалитика», Polymedia и Conteq.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EViRush – один из крупнейших российских форумов в области BI. Он собирает в «Центре событий РБК» (бывший офис SAP на Космодамианской набережной) ведущих экспертов, представителей системных интеграторов, BI-разработчиков и аналитиков. Бесплатное для пользователей и заказчиков мероприятие позволяет лично пообщаться с опытными пользователями, задать вопросы реальным людям, которые внедряли и поддерживают самую востребованную (по данным BI-рейтинга TAdviser) в России BI-платформу.\u003C\u002Fp\u003E\u003Cp\u003EРегистрация на ViRush 2024 уже открыта.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2eb\u002F9a4\u002F3b4\u002F2eb9a43b4d9a88ffc624fca083fbba20.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_virush","startDay":"2024-11-14","startTime":"10:00","isOnline":false,"geo":["Москва"],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"12","titleHtml":"Аналитика"}],"tags":["BI","Big Data","ИИ","конференция"],"metadata":null},{"id":"514","titleHtml":"IT-конференция Merge Skolkovo","descriptionHtml":"\u003Cp\u003EКрупнейшая региональная IT-конференция Merge собирает профессионалов со всей страны в главном инновационном центре России.\u003C\u002Fp\u003E\u003Cp\u003E2 насыщенных дня и 30 секций, охватывающих все ключевые аспекты IT-отрасли — от разработки и управления проектами, до маркетинга и HR. Участников ждут мастер-классы, воркшопы, BoF-сессии, нетворкинг и общение. Своими знаниями и опытом поделятся более 150 спикеров-практиков из топовых компаний, в числе которых Яндекс, X5 Group, VK, Cбер и многие другие.\u003C\u002Fp\u003E\u003Cp\u003EДля всех участников из регионов действует промокод на приобретение билетов со скидкой 40% от полной стоимости.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F719\u002F420\u002F1e3\u002F7194201e3df8a494d16fee91920645dd.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_skolkovo","startDay":"2024-11-15","startTime":"09:00","finishDay":"2024-11-16","finishTime":"19:30","isOnline":false,"geo":["Москва"],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"10","titleHtml":"Маркетинг"},{"id":"16","titleHtml":"Другое"}],"tags":["Разработка","Маркетинг","IT","HR","нетворкинг","нетворк","BoF-сессия","воркшопы","мастер-классы"],"metadata":null},{"id":"538","titleHtml":"Конференция InterComm «Рождение Титанов»","descriptionHtml":"\u003Cp\u003EКлючевое отраслевое событие 2024 года в области корпоративных коммуникаций — конференция InterComm 2024.\u003C\u002Fp\u003E\u003Cp\u003EВ мероприятии примут участие более 500 руководителей и специалистов, ответственных за внутрикорпоративные коммуникации, PR и HR в крупнейших российских компаниях.\u003C\u002Fp\u003E\u003Cp\u003EВ 2024 году деловая программа конференции будет сосредоточена на пяти основных направлениях. Эксперты и представители отрасли обсудят:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EФормирование привлекательной корпоративной культуры и сильного HR-бренда в условиях кадрового дефицита.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EМежпоколенческие коммуникации: как наладить диалог в рамках рабочего процесса между представителями разных возрастов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПопуляризацию рабочих профессий, тренд на человекоцентричность, развитие культуры обратной связи.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПривлечение сотрудников инженерных профессий и IT в условиях курса на технологический суверенитет.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EНовые подходы в корпоративной культуре в госсекторе, проекты.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd0f\u002Fc20\u002F0ec\u002Fd0fc200ece91b22696bcdd668b8a15d7.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_vnutricom","startDay":"2024-11-20","startTime":"10:00","finishDay":"2024-11-20","finishTime":"19:00","isOnline":false,"geo":["Москва"],"isArchive":false,"categories":[{"id":"8","titleHtml":"Менеджмент"},{"id":"16","titleHtml":"Другое"}],"tags":["HR","PR","корпоративные коммуникация","конференция"],"metadata":null},{"id":"542","titleHtml":"Хакатон «AgroCode Hack Genetics'24»","descriptionHtml":"\u003Cp\u003EГотов создать тиндер для коров? А решить историческую агроголоволомку с помощью IT?\u003C\u002Fp\u003E\u003Cp\u003EОткрыта регистрация на агрotech-хакатон от Россельхозбанка и Ruseed. Общий призовой фонд — 800 тысяч рублей.\u003C\u002Fp\u003E\u003Cp\u003EВ этом году участникам предстоит разработать решения для области генетики и селекции. Выбери одну из четырёх технологических задач и стань частью инноваций:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EИнформационно-аналитический модуль для работы с первичными показателями радужной форели для Smart Breeding.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EТиндер для коров для R-Style Softlab.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EМодель для прогнозирования урожайности для Ruseed и Plastilin.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПодтверждение гипотезы в исторической агроголоволомке от Ruseed и ВИР.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПриглашаем аналитиков, тестировщиков, ML, frontend-, backend-разработчиков и других IT-специалистов.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EУчаствовать можно как готовой командой, так и индивидуально — мы объединим участников. Соревнование пройдёт онлайн.\u003C\u002Fp\u003E\u003Cp\u003EРегистрация открыта до 14 ноября.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F723\u002F02e\u002Fe4c\u002F72302ee4c678e8ba385eed1759700cf5.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_agrocode-hack","startDay":"2024-11-22","startTime":"16:30","finishDay":"2024-11-24","finishTime":"19:00","isOnline":true,"geo":[],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"16","titleHtml":"Другое"}],"tags":["Хакатон","агрохакатон"],"metadata":null},{"id":"532","titleHtml":"Конференция «TechRec: ITHR CAMPUS»","descriptionHtml":"\u003Cp\u003EВстречайте восьмую ежегодную конференцию для IT-HR и рекрутеров — TechRec: ITHR Campus.\u003C\u002Fp\u003E\u003Cp\u003ETechRec — это первая конференция, где мы разбираем новейшие тренды: внедрение AI в HR, технологии рекрутинга и HR-бренд.\u003C\u002Fp\u003E\u003Cp\u003EЧто получат участники:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EБолее 10 экспертных докладов об AI в HR, взаимодействии рекрутмента и IT, HR-бренд и DevRel.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПрактические мастер-классы о новейших технологиях и решениях для работы HR и рекрутеров.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EМастермайнд с HR-экспертами и демозоны от партнеров.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EВ программе:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EТрек «Тренды и технологии в рекрутменте» — автоматизация и новые техники в подборе, трендовые решения в сорсинге, инструменты привлечения, маркетинг в рекрутменте.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EТрек «AI в HR» — передовые инструменты автоматизации подбора персонала, AI-новинки и тренды 2025 года.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EТрек «HR-бренд &amp; Devrel» — построение сообществ, лучшие практики работы с брендом работодателя, метрики и аналитика.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EТрек «HR&amp;IT» — взаимодействие HR и IT-команд, вовлечение тимлидов, организационные решения.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E2 формата участия: офлайн и онлайн.\u003C\u002Fp\u003E\u003Cp\u003EВаш промокод на скидку 20% — HABR20.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe57\u002F5aa\u002Fd2d\u002Fe575aad2d17435db53703ced1169ef21.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_techrec","startDay":"2024-11-28","startTime":"10:00","finishDay":"2024-11-28","finishTime":"18:00","isOnline":true,"geo":["Москва"],"isArchive":false,"categories":[{"id":"8","titleHtml":"Менеджмент"},{"id":"16","titleHtml":"Другое"}],"tags":["AI","HR","рекрутинг","конференция"],"metadata":null},{"id":"516","titleHtml":"IT-конференция Merge Tatarstan 2025","descriptionHtml":"\u003Cp\u003EКрупнейшая региональная IT-конференция России собирает профессионалов со всей страны для нетворкинга, обмена опытом и поиска новых деловых контактов.\u003C\u002Fp\u003E\u003Cp\u003EMerge Tatarstan — это 7 тематических конференций на одной площадке, 2000 участников, более 170 спикеров-практиков, мастер-классы, воркшопы и BoF-сессии.\u003C\u002Fp\u003E\u003Cp\u003EК участию в конференции приглашаются разработчики, QA, тимлиды, Project\u002FProduct-менеджеры, маркетологи, аналитики, UI\u002FUX-дизайнеры, PR-специалисты, HR-менеджеры, владельцы бизнеса и начинающие специалисты.\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0e9\u002F3a8\u002F3ec\u002F0e93a83ecea09f806d1df907ddb036a4.jpg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_tatarstan","startDay":"2025-04-25","startTime":"09:00","finishDay":"2025-04-26","finishTime":"19:30","isOnline":false,"geo":["Казань"],"isArchive":false,"categories":[{"id":"2","titleHtml":"Разработка"},{"id":"10","titleHtml":"Маркетинг"},{"id":"16","titleHtml":"Другое"}],"tags":["Разработка","IT","PR","UI\u002FUX","бизнес","маркетинг","аналитика"],"metadata":null}],"currentEvent":null,"eventsFilter":{"city":"all","timeStarted":null,"timeEnded":null}},"wysiwyg":{"WYSIWYGRulesRefs":null},"publicationStatistics":{"statsInfo":{},"statsFunnels":{},"statsGraph":{},"defaultSuggest":{},"suggest":{},"timeTracker":{},"isTrackingActivity":false,"isUserActive":true},"fixedBanner":{"isArticleStickyPanelVisible":false,"isArticleStickyPanelAtTheBottom":false,"isFixedBannerVisible":false},"onboarding":{"currentStep":null,"stepsData":{},"stepsErrors":{},"completedSteps":[],"isStepCommitting":false,"isCommitDisabled":true}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="https://assets.habr.com/habr-web/js/chunk-vendors.0ab1a98f.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.dcc5983d.js" defer></script></div>
    <div id="overlays"><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--><!----><!--teleport anchor--></div>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
    </body>

    </html>
