<!doctype html><html lang="en"><head><title data-rh="true">Raymarching Voxel Rendering. Raymarching (not to be confused with… | by Caleb Leak | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2017-06-04T02:33:18.930Z"/><meta data-rh="true" name="title" content="Raymarching Voxel Rendering. Raymarching (not to be confused with… | by Caleb Leak | Medium"/><meta data-rh="true" property="og:title" content="Raymarching Voxel Rendering"/><meta data-rh="true" property="al:android:url" content="medium://p/58018201d9d6"/><meta data-rh="true" property="al:ios:url" content="medium://p/58018201d9d6"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well, and doesn’t require much upfront computation. Of course it…"/><meta data-rh="true" property="og:description" content="Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well…"/><meta data-rh="true" property="og:url" content="https://medium.com/@calebleak/raymarching-voxel-rendering-58018201d9d6"/><meta data-rh="true" property="al:web:url" content="https://medium.com/@calebleak/raymarching-voxel-rendering-58018201d9d6"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:863/1*yh0jqrXJ9reiOX1zzN8Uqg.png"/><meta data-rh="true" property="article:author" content="https://medium.com/@calebleak"/><meta data-rh="true" name="author" content="Caleb Leak"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="Raymarching Voxel Rendering"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/58018201d9d6"/><meta data-rh="true" property="twitter:description" content="Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well…"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:863/1*yh0jqrXJ9reiOX1zzN8Uqg.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="9 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@calebleak"/><link data-rh="true" rel="canonical" href="https://medium.com/@calebleak/raymarching-voxel-rendering-58018201d9d6"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/58018201d9d6"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*yh0jqrXJ9reiOX1zzN8Uqg.png"],"url":"https:\u002F\u002Fmedium.com\u002F@calebleak\u002Fraymarching-voxel-rendering-58018201d9d6","dateCreated":"2017-06-04T02:31:56.256Z","datePublished":"2017-06-04T02:31:56.256Z","dateModified":"2018-04-09T23:45:14.815Z","headline":"Raymarching Voxel Rendering - Caleb Leak - Medium","name":"Raymarching Voxel Rendering - Caleb Leak - Medium","description":"Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well, and doesn’t require much upfront computation. Of course it…","identifier":"58018201d9d6","author":{"@type":"Person","name":"Caleb Leak","url":"https:\u002F\u002Fmedium.com\u002F@calebleak"},"creator":["Caleb Leak"],"publisher":{"@type":"Organization","name":"Medium","url":"https:\u002F\u002Fmedium.com\u002F","logo":{"@type":"ImageObject","width":272,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:544\u002F7*V1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002F@calebleak\u002Fraymarching-voxel-rendering-58018201d9d6"}</script><style type="text/css" data-fela-rehydration="549" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="549" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:#1A8917}.es{border-color:#1A8917}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:#1A8917}.ez:disabled:hover{border-color:#1A8917}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fz{margin:0 24px}.gd{background:rgba(255, 255, 255, 1)}.ge{border:1px solid #F2F2F2}.gf{box-shadow:0 1px 4px #F2F2F2}.gg{max-height:100vh}.gh{overflow-y:auto}.gi{left:0}.gj{top:calc(100vh + 100px)}.gk{bottom:calc(100vh + 100px)}.gl{width:10px}.gm{pointer-events:none}.gn{word-break:break-word}.go{word-wrap:break-word}.gp:after{display:block}.gq:after{content:""}.gr:after{clear:both}.gs{line-height:1.23}.gt{letter-spacing:0}.gu{font-style:normal}.gv{font-weight:700}.ia{align-items:baseline}.ib{width:48px}.ic{height:48px}.id{border:2px solid rgba(255, 255, 255, 1)}.ie{z-index:0}.if{box-shadow:none}.ig{border:1px solid rgba(0, 0, 0, 0.05)}.ih{margin-bottom:2px}.ii{flex-wrap:nowrap}.ij{font-size:16px}.ik{line-height:24px}.im{margin:0 8px}.in{display:inline}.io{color:#1A8917}.ip{fill:#1A8917}.is{flex:0 0 auto}.iv{flex-wrap:wrap}.iw{padding-left:8px}.ix{padding-right:8px}.jy> *{flex-shrink:0}.jz{overflow-x:scroll}.ka::-webkit-scrollbar{display:none}.kb{scrollbar-width:none}.kc{-ms-overflow-style:none}.kd{width:74px}.ke{flex-direction:row}.kf{z-index:2}.kg{margin-right:4px}.kj{-webkit-user-select:none}.kk{border:0}.kl{fill:rgba(117, 117, 117, 1)}.ko{outline:0}.kp{user-select:none}.kq> svg{pointer-events:none}.kz{cursor:progress}.la{margin-left:4px}.lb{margin-top:0px}.lc{opacity:1}.ld{padding:4px 0}.lg{width:16px}.li{display:inline-flex}.lo{max-width:100%}.lp{padding:8px 2px}.lq svg{color:#6B6B6B}.mh{line-height:1.58}.mi{letter-spacing:-0.004em}.mj{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.ne{margin-bottom:-0.46em}.nf{text-decoration:underline}.ng{list-style-type:decimal}.nh{margin-left:30px}.ni{padding-left:0px}.no{line-height:1.12}.np{letter-spacing:-0.022em}.nq{font-weight:600}.ol{margin-bottom:-0.28em}.or{margin-left:auto}.os{margin-right:auto}.ot{max-width:473px}.oz{clear:both}.pa{height:auto}.pb{margin-top:10px}.pc{max-width:728px}.pf{line-height:1.18}.pt{margin-bottom:-0.31em}.pu{padding:2px 4px}.pv{font-size:75%}.pw> strong{font-family:inherit}.px{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.py{max-width:575px}.pz{margin:auto}.qa{overflow:hidden}.qb{padding-bottom:100%}.qc{height:0}.qd{max-width:863px}.qf{cursor:zoom-in}.qg{z-index:auto}.qi{max-width:1148px}.qo{max-width:1192px}.qp{padding-top:5px}.qq{padding-bottom:5px}.qr{padding-bottom:56.25%}.qx{box-shadow:inset 0 0 0 1px #F2F2F2}.qy{padding:0px}.qz{padding:16px 20px}.ra{flex:1 1 auto}.rc{max-height:40px}.rd{text-overflow:ellipsis}.re{display:-webkit-box}.rf{-webkit-line-clamp:2}.rg{-webkit-box-orient:vertical}.ri{margin-top:8px}.rj{margin-top:12px}.rk{width:160px}.rl{background-image:url(https://miro.medium.com/v2/resize:fit:320/0*O_yRFIVRkH4vgxsl.)}.rm{background-origin:border-box}.rn{background-size:cover}.ro{height:167px}.rp{background-position:50% 50%}.rq{margin-bottom:26px}.rr{margin-top:6px}.rs{margin-right:8px}.rt{padding:8px 16px}.ru{border-radius:100px}.rv{transition:background 300ms ease}.rx{white-space:nowrap}.ry{border-top:none}.se{height:52px}.sf{max-height:52px}.sg{box-sizing:content-box}.sh{position:static}.si{z-index:1}.sk{max-width:155px}.sq{margin-right:20px}.sw{align-items:flex-end}.sx{width:76px}.sy{height:76px}.sz{border:2px solid #F9F9F9}.ta{height:72px}.tb{width:72px}.tc{stroke:#F2F2F2}.td{height:36px}.te{width:36px}.tf{color:#F2F2F2}.tg{fill:#F2F2F2}.th{background:#F2F2F2}.ti{border-color:#F2F2F2}.to{font-weight:500}.tp{font-size:24px}.tq{line-height:30px}.tr{letter-spacing:-0.016em}.ts{margin-top:16px}.tt{height:0px}.tu{border-bottom:solid 1px #E5E5E5}.ua{margin-top:72px}.ub{padding:24px 0}.uc{margin-bottom:0px}.ud{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:#156D12}.eu:hover{border-color:#156D12}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.il:hover{text-decoration:underline}.iq:hover:not(:disabled){color:#156D12}.ir:hover:not(:disabled){fill:#156D12}.kn:hover{fill:rgba(8, 8, 8, 1)}.le:hover{fill:#000000}.lf:hover p{color:#000000}.lh:hover{color:#000000}.lr:hover svg{color:#000000}.rw:hover{background-color:#F2F2F2}.tj:hover{background:#F2F2F2}.tk:hover{border-color:#F2F2F2}.tl:hover{cursor:wait}.tm:hover{color:#F2F2F2}.tn:hover{fill:#F2F2F2}.bd:focus-within path{fill:#242424}.km:focus{fill:rgba(8, 8, 8, 1)}.ls:focus svg{color:#000000}.qh:focus{transform:scale(1.01)}.kr:active{border-style:none}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fy{margin-bottom:68px}.gc{max-width:680px}.hq{font-size:42px}.hr{margin-top:1.19em}.hs{margin-bottom:32px}.ht{line-height:52px}.hu{letter-spacing:-0.011em}.hz{align-items:center}.jk{border-top:solid 1px #F2F2F2}.jl{border-bottom:solid 1px #F2F2F2}.jm{margin:32px 0 0}.jn{padding:3px 8px}.jw> *{margin-right:24px}.jx> :last-child{margin-right:0}.ky{margin-top:0px}.ln{margin:0}.na{font-size:20px}.nb{margin-top:2.14em}.nc{line-height:32px}.nd{letter-spacing:-0.003em}.nn{margin-top:1.14em}.oh{font-size:24px}.oi{margin-top:1.95em}.oj{line-height:30px}.ok{letter-spacing:-0.016em}.oq{margin-top:0.94em}.oy{margin-top:56px}.pq{margin-top:1.72em}.pr{line-height:24px}.ps{letter-spacing:0}.qn{max-width:1192px}.qw{margin-top:32px}.sd{margin-bottom:88px}.sp{display:inline-block}.sv{padding-top:72px}.tz{margin-top:40px}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.kx{margin-top:0px}.pd{margin-left:auto}.pe{text-align:center}.so{display:inline-block}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.kw{margin-top:0px}.sn{display:inline-block}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.ku{margin-top:0px}.kv{margin-right:0px}.rb{padding:10px 12px 10px}.sm{display:inline-block}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.gw{font-size:32px}.gx{margin-top:1.01em}.gy{margin-bottom:24px}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.hv{align-items:flex-start}.it{flex-direction:column}.iy{margin:24px -24px 0}.iz{padding:0}.jo> *{margin-right:8px}.jp> :last-child{margin-right:24px}.kh{margin-left:0px}.ks{margin-top:0px}.kt{margin-right:0px}.lj{margin:0}.lt{border:1px solid #F2F2F2}.lu{border-radius:99em}.lv{padding:0px 16px 0px 12px}.lw{height:38px}.lx{align-items:center}.lz svg{margin-right:8px}.mk{font-size:18px}.ml{margin-top:1.56em}.mm{line-height:28px}.mn{letter-spacing:-0.003em}.nj{margin-top:1.34em}.nr{font-size:20px}.ns{margin-top:1.2em}.nt{line-height:24px}.nu{letter-spacing:0}.om{margin-top:0.67em}.ou{margin-top:40px}.pg{font-size:16px}.ph{margin-top:1.23em}.qj{max-width:100%}.qs{margin-top:24px}.rz{margin-bottom:80px}.sl{display:inline-block}.sr{padding-top:48px}.tv{margin-top:32px}.ly:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{margin-bottom:32px}.ho{line-height:52px}.hp{letter-spacing:-0.011em}.hy{align-items:center}.jg{border-top:solid 1px #F2F2F2}.jh{border-bottom:solid 1px #F2F2F2}.ji{margin:32px 0 0}.jj{padding:3px 8px}.ju> *{margin-right:24px}.jv> :last-child{margin-right:0}.lm{margin:0}.mw{font-size:20px}.mx{margin-top:2.14em}.my{line-height:32px}.mz{letter-spacing:-0.003em}.nm{margin-top:1.14em}.od{font-size:24px}.oe{margin-top:1.95em}.of{line-height:30px}.og{letter-spacing:-0.016em}.op{margin-top:0.94em}.ox{margin-top:56px}.pn{margin-top:1.72em}.po{line-height:24px}.pp{letter-spacing:0}.qm{max-width:1192px}.qv{margin-top:32px}.sc{margin-bottom:88px}.su{padding-top:72px}.ty{margin-top:40px}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fw{margin-bottom:68px}.ga{max-width:680px}.hg{font-size:42px}.hh{margin-top:1.19em}.hi{margin-bottom:32px}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.hx{align-items:center}.jc{border-top:solid 1px #F2F2F2}.jd{border-bottom:solid 1px #F2F2F2}.je{margin:32px 0 0}.jf{padding:3px 8px}.js> *{margin-right:24px}.jt> :last-child{margin-right:0}.ll{margin:0}.ms{font-size:20px}.mt{margin-top:2.14em}.mu{line-height:32px}.mv{letter-spacing:-0.003em}.nl{margin-top:1.14em}.nz{font-size:24px}.oa{margin-top:1.95em}.ob{line-height:30px}.oc{letter-spacing:-0.016em}.oo{margin-top:0.94em}.ow{margin-top:56px}.pk{margin-top:1.72em}.pl{line-height:24px}.pm{letter-spacing:0}.ql{max-width:100%}.qu{margin-top:32px}.sb{margin-bottom:88px}.st{padding-top:72px}.tx{margin-top:40px}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:4px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{margin-bottom:24px}.he{line-height:38px}.hf{letter-spacing:-0.014em}.hw{align-items:flex-start}.iu{flex-direction:column}.ja{margin:24px 0 0}.jb{padding:0}.jq> *{margin-right:8px}.jr> :last-child{margin-right:8px}.ki{margin-left:0px}.lk{margin:0}.ma{border:1px solid #F2F2F2}.mb{border-radius:99em}.mc{padding:0px 16px 0px 12px}.md{height:38px}.me{align-items:center}.mg svg{margin-right:8px}.mo{font-size:18px}.mp{margin-top:1.56em}.mq{line-height:28px}.mr{letter-spacing:-0.003em}.nk{margin-top:1.34em}.nv{font-size:20px}.nw{margin-top:1.2em}.nx{line-height:24px}.ny{letter-spacing:0}.on{margin-top:0.67em}.ov{margin-top:40px}.pi{font-size:16px}.pj{margin-top:1.23em}.qk{max-width:100%}.qt{margin-top:24px}.sa{margin-bottom:80px}.ss{padding-top:48px}.tw{margin-top:32px}.mf:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="print">.sj{display:none}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.qe{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style><style type="text/css" data-fela-rehydration="549" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.rh{max-height:none}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F58018201d9d6&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderUser&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" rel="noopener follow" href="/?source=---top_nav_layout_nav----------------------------------"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" rel="noopener follow" href="/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" rel="noopener follow" href="/search?source=---top_nav_layout_nav----------------------------------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 id="77d3" class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu bk" data-testid="storyTitle">Raymarching Voxel Rendering</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hv hw hx hy hz ab"><div><div class="ab ia"><a rel="noopener follow" href="/@calebleak?source=post_page-----58018201d9d6--------------------------------"><div><div class="bm" aria-hidden="false"><div class="l ib ic by id ie"><div class="l fj"><img alt="Caleb Leak" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*Obf1P_1sCIvzvCZbSqwFMA.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="if by l dd de fs n ig ft"></div></div></div></div></div></a></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="ih ab q"><div class="ab q ii"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b ij ik bk"><a class="af ag ah ai aj ak al am an ao ap aq ar il" data-testid="authorName" rel="noopener follow" href="/@calebleak?source=post_page-----58018201d9d6--------------------------------">Caleb Leak</a></p></div></div></div><span class="im in" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b ij ik du"><span><a class="io ip ah ai aj ak al am an ao ap aq ar ex iq ir" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F73077ede4503&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=post_page-73077ede4503----58018201d9d6---------------------post_header-----------">Follow</a></span></p></div></div></span></div></div><div class="l is"><span class="bf b bg z du"><div class="ab cn it iu iv"><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div><span data-testid="storyPublishDate">Jun 4, 2017</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w fg fh q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F58018201d9d6&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=-----58018201d9d6---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kk lc ld ab q fk le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b dv z du"><span class="pw-responses-count la lb">1</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F58018201d9d6&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;source=-----58018201d9d6---------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lh" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd li cn"><div class="l ae"><div class="ab cb"><div class="lj lk ll lm ln lo ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al lp an ao ap ex lq lr lf ls lt lu lv lw s lx ly lz ma mb mc md u me mf mg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al lp an ao ap ex lq lr lf ls lt lu lv lw s lx ly lz ma mb mc md u me mf mg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><p id="2ba3" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well, and doesn’t require much upfront computation. Of course it comes at a cost — it’s fragment shader heavy so you’ll like end up fillrate limited. Its complexity also makes it a tad fragile; a little floating point error buildup can cause tunneling and subtle artifacts.</p><p id="6837" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">For a little context, take a look at <a class="af nf" href="http://www.iquilezles.org/" rel="noopener ugc nofollow" target="_blank">Inigo Quilez</a>’s <a class="af nf" href="https://www.shadertoy.com/user/iq" rel="noopener ugc nofollow" target="_blank">excellent work</a> and <a class="af nf" href="http://iquilezles.org/www/articles/raymarchingdf/raymarchingdf.htm" rel="noopener ugc nofollow" target="_blank">writeups </a>with ray marching. One caveat is that his work primarily focuses on signed distance fields, which the techniques below are not — unsigned distance fields are closer to being accurate.</p><p id="fe4c" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">So, on to the techniques. I’ll cover three primary techniques:</p><ol class=""><li id="3bbc" class="mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne ng nh ni bk">Raymarching plane intersections. A set of NxNxN voxels can be divided up using N+ 1 planes along each axis. An easy approach to raymarching is to take a ray for each fragment and march it along each plane intersection until a non-empty voxel is found.</li><li id="4003" class="mh mi gu mj b mk nj mm mn mo nk mq mr ms nl mu mv mw nm my mz na nn nc nd ne ng nh ni bk">Sphere assisted raymarching. This technique reduces the number of voxel lookups, though it’s not always a performance win. The basic idea is to store the shape information separate from the color information. Then, instead of storing the shape information directly, each empty voxel stores the radius of the empty space around it — representing the largest sphere that could fill the empty space centered a the current voxel. This allows for large steps through empty space.</li><li id="a50e" class="mh mi gu mj b mk nj mm mn mo nk mq mr ms nl mu mv mw nm my mz na nn nc nd ne ng nh ni bk">Cube assisted raymarching. Similar to the previous technique, except instead of the largest sphere, the shape information stores the largest cube possible around the current location. Why a cube instead of a sphere? Because it’s much much faster to compute — an order of magnitude faster. Its shape is slightly suboptimal, but still gets most of the speedup from the previous technique.</li></ol><h1 id="7bce" class="no np gu bf nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol bk">Test setup</h1><p id="93af" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">Like in my <a class="af nf" rel="noopener" href="/@calebleak/quads-all-the-way-down-simple-voxel-rendering-fea1e4488e26">previous tests</a>, to compare these techniques I started by throwing a bunch of 32x32x32 voxel spheres at them and measuring the memory impact and per-frame render times. In addition, a degenerate case of a 32x32x32 voxel set with only a single solid voxel in its corner was added to demonstrate where the plane marching technique falls short.</p><p id="52fa" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The same test machine and setup was used — 1920x1080 on Windows 10 using a GTX 980 Ti, Intel i7–4790k, and 16GB of main memory.</p><p id="d963" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">I added an additional constraint that the previous tests didn’t have. All techniques must produce a pixel perfect match for their quad based brethren. This is important because it’s easy to cut a few corners and get a perf boost at the cost of accuracy — or to let floating point error cause close but incorrect results.</p><figure class="ou ov ow ox oy oz or os paragraph-image"><div class="or os ot"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 1100w, https://miro.medium.com/v2/resize:fit:946/format:webp/1*701JDcCKRoXspSYyYSXWaQ.png 946w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 473px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*701JDcCKRoXspSYyYSXWaQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*701JDcCKRoXspSYyYSXWaQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*701JDcCKRoXspSYyYSXWaQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*701JDcCKRoXspSYyYSXWaQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*701JDcCKRoXspSYyYSXWaQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*701JDcCKRoXspSYyYSXWaQ.png 1100w, https://miro.medium.com/v2/resize:fit:946/1*701JDcCKRoXspSYyYSXWaQ.png 946w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 473px"/><img alt="" class="bh lo pa c" width="473" height="433" loading="lazy" role="presentation"/></picture></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Figure 1. The voxel object used.</figcaption></figure><p id="0996" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">For each technique, the test is repeated for different numbers of objects to allow trends to emerge. The largest data set contains 16k voxel objects and is enough to strain the test system.</p><p id="a3e3" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">I posted the <a class="af nf" href="https://github.com/cleak/VoxelPerf" rel="noopener ugc nofollow" target="_blank">full source</a> for these tests on GitHub. I encourage you take a look — a source file is worth a thousand words.</p><h2 id="5fa7" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Raymarching Overview</h2><p id="1e49" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">Raymarching is an interesting rendering technique. It takes a ray consisting of an origin <code class="cx pu pv pw px b">p0</code> and a direction <code class="cx pu pv pw px b">d</code> . It then checks points along the ray for being inside a solid object. To do this, it iteratively marches along the ray, starting at <code class="cx pu pv pw px b">p0</code> and taking non-uniform steps along the ray. At each step, the distance to the closest possible intersection is conservatively estimated — it can be overestimated, but must never be underestimated — and a step of that size is then taken.</p><figure class="ou ov ow ox oy oz or os paragraph-image"><div class="or os py"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 1100w, https://miro.medium.com/v2/resize:fit:1150/format:webp/1*eTlifCD3LaKKqf2shSYD5Q.png 1150w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 575px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*eTlifCD3LaKKqf2shSYD5Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*eTlifCD3LaKKqf2shSYD5Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*eTlifCD3LaKKqf2shSYD5Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*eTlifCD3LaKKqf2shSYD5Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*eTlifCD3LaKKqf2shSYD5Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*eTlifCD3LaKKqf2shSYD5Q.png 1100w, https://miro.medium.com/v2/resize:fit:1150/1*eTlifCD3LaKKqf2shSYD5Q.png 1150w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 575px"/><img alt="" class="bh lo pa c" width="575" height="486" loading="lazy" role="presentation"/></picture></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Figure 2. A raymarched voxel sphere rendered on the surface of a cube.</figcaption></figure><p id="0dbc" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Raymarching requires a termination criteria. In the case of signed distance fields (a typical example Google will turn up), this criteria is convergence. Step sizes will eventually approach zero and the intersection will be determined to have been found. In our case, we can simplify things by checking if the current point is inside a solid voxel.</p><p id="939a" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">For rendering voxel objects, each object, no matter how many voxels it contains, is rendered using a cube. Six quads are sent into the render pipeline and the fragment shader does the hard work of finding the intersections by marching rays from the cube’s surface.</p><p id="4df3" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Putting this together in a fragment shader, it becomes:</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qb qc l"></div></div></figure><p id="4a90" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The important piece here is distance estimation function, which the specific techniques will fill in.</p><h2 id="f8e9" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Raymarching Plane Intersections technique</h2><figure class="ou ov ow ox oy oz or os paragraph-image"><div role="button" tabindex="0" class="qe qf fj qg bh qh"><div class="or os qd"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yh0jqrXJ9reiOX1zzN8Uqg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*yh0jqrXJ9reiOX1zzN8Uqg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*yh0jqrXJ9reiOX1zzN8Uqg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*yh0jqrXJ9reiOX1zzN8Uqg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*yh0jqrXJ9reiOX1zzN8Uqg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*yh0jqrXJ9reiOX1zzN8Uqg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*yh0jqrXJ9reiOX1zzN8Uqg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*yh0jqrXJ9reiOX1zzN8Uqg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh lo pa c" width="700" height="889" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Figure 3. A voxel reindeer showing a single plane-ray intersection.</figcaption></figure><p id="b6ac" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">This technique imagines planes separating each layer of voxels. A ray is then marched along each plane intersection and the voxels at the intersection points are checked for being solid.</p><p id="fb37" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">It’s important to check the the intersection points in the order in which the ray reaches them. The key here is that planes along all three axes will need to be checked each step, with the closest intersection being the step taken.</p><p id="7e38" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Working in voxel-unit-space (i.e. where one voxel is 1x1x1 units in size) finding these intersections becomes easy. Simply check the fraction require to round up to the next integer (or down for negative directions) and then divide by the appropriate component of <code class="cx pu pv pw px b">d</code> to make it exact. This works out to be:</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qb qc l"></div></div></figure><p id="5d02" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Notice there’s a tiny epsilon to guarantee there’s always at least a small amount of progress.</p><p id="3474" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">This technique works well, but notice how it will never move more than a single voxel at a time. Wouldn’t it be nice to skip over all of those empty voxels we check before reaching a solid one? Well, we can — at least some of them.</p><h2 id="6f22" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Sphere Assisted Raymarching</h2><figure class="ou ov ow ox oy oz or os paragraph-image"><div role="button" tabindex="0" class="qe qf fj qg bh qh"><div class="or os qi"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKJqifIEtJTD1XPtJG1e4g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*VKJqifIEtJTD1XPtJG1e4g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*VKJqifIEtJTD1XPtJG1e4g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*VKJqifIEtJTD1XPtJG1e4g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*VKJqifIEtJTD1XPtJG1e4g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*VKJqifIEtJTD1XPtJG1e4g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*VKJqifIEtJTD1XPtJG1e4g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*VKJqifIEtJTD1XPtJG1e4g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh lo pa c" width="700" height="656" loading="lazy" role="presentation"/></picture></div></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Figure 4. Degenerate case for the previous technique — lots of checking of empty voxels.</figcaption></figure><p id="c6bf" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">In the previous technique, all voxel information was crammed in a single 3D texture, with the alpha channel giving information about whether or not the voxel is solid. This is straightforward and works well — especially since only a single texture needs to be swapped between objects. However, some degenerate cases will require many steps checking empty voxels.</p><p id="5231" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The worst case scenario for the previous technique is, rather ironically, an empty set of voxels. Each ray will have to pass through the entire object before deciding there’s nothing to hit and terminating. A less trivial case would be a voxel object with only a wall of solid voxels at the far end of the z-axis. Viewed with the wall on the far side, each ray will have to traverse the entire width of the object before finding its destination — obviously not ideal. Figure 4 shows this case.</p><p id="ccab" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Enter sphere assisted raymarching to help. Instead of storing simply solid/not solid values in the alpha channel, we can store the distance to the nearest solid voxel. Then, when traversing an empty voxel, we can take a massive step across many empty voxels. Pretty neat, huh?</p><p id="88aa" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Figure 5 is a cross section of what such a technique would generate. The blue cells represent the solid voxels. The white cells are empty, and store the amount of distance that can be safely moved before reaching a solid voxel.</p></div></div><div class="oz"><div class="ab cb"><div class="lj qj lk qk ll ql cf qm cg qn ci bh"><figure class="ou ov ow ox oy oz qp qq paragraph-image"><div role="button" tabindex="0" class="qe qf fj qg bh qh"><div class="or os qo"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*GhT95NQaZ5H_PIvuWvkQiA.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*GhT95NQaZ5H_PIvuWvkQiA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*GhT95NQaZ5H_PIvuWvkQiA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*GhT95NQaZ5H_PIvuWvkQiA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*GhT95NQaZ5H_PIvuWvkQiA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*GhT95NQaZ5H_PIvuWvkQiA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*GhT95NQaZ5H_PIvuWvkQiA.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*GhT95NQaZ5H_PIvuWvkQiA.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh lo pa c" width="1000" height="628" loading="eager" role="presentation"/></picture></div></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Figure 5. A cross section of a sphere-assisted shape.</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="1c30" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The hard part is generating this shape data. It’s important to notice that we’ve gone from normalized floating point values for the shape data to non-negative integers. To keep using normalized floats for the color channels, the shape data is split off into an integer 3D texture.</p><p id="8cda" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The changes needed for the fragment shader are pretty minimal:</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qb qc l"></div></div><figcaption class="pb ff pc or os pd pe bf b bg z du">Shape assisted raymarching. 255 is a constant representing a solid voxel.</figcaption></figure><h2 id="779e" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Cube Assisted Raymarching</h2><p id="366c" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">The biggest drawback of sphere assisted raymarching is the upfront workload. A simple implementation runs in O(n²) time, with n being the number of voxels. This gets big fast — up to ~1,000,000 steps for a simple 32x32x32 voxel set. Enter cubes to save the day.</p><p id="6d82" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Similar to the sphere assisted raymarching, cube assisted raymarching checks how large of an object can be inserted around each empty cell; using cubes of course rather than spheres. This is slightly suboptimal in most cases, takes us from O(n²) upfront cost to O(n log n). How? Using a <a class="af nf" href="https://en.wikipedia.org/wiki/Summed_area_table" rel="noopener ugc nofollow" target="_blank">summed area table</a> and a binary search for the right cube size.</p><p id="8688" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Summed area tables are a neat data structure often seen in computer vision. A full explanation is beyond the scope of this article, but the executive summary is that they store the sum of all prior cells at a specific location. Using this information, it’s quick to compute the area of an arbitrary box by subtracting off the parts we’re not interested in. Once created, the area of an arbitrary box can be computed in O(1) time.</p><p id="edc1" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The algorithm for this is to (1) compute the summed area table and then (2) for each cell, binary search up to the maximum sized cube. Since area calculations using the table are O(1), each voxel takes only O(log n) time.</p><p id="948f" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Comparing the resulting shape to the previous, we can see it’s not as efficient, though it’s still pretty good:</p></div></div><div class="oz"><div class="ab cb"><div class="lj qj lk qk ll ql cf qm cg qn ci bh"><figure class="ou ov ow ox oy oz qp qq paragraph-image"><div role="button" tabindex="0" class="qe qf fj qg bh qh"><div class="or os qo"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*7EG5kSB1KH2kqKGau-Ol1w.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*7EG5kSB1KH2kqKGau-Ol1w.png 640w, https://miro.medium.com/v2/resize:fit:720/1*7EG5kSB1KH2kqKGau-Ol1w.png 720w, https://miro.medium.com/v2/resize:fit:750/1*7EG5kSB1KH2kqKGau-Ol1w.png 750w, https://miro.medium.com/v2/resize:fit:786/1*7EG5kSB1KH2kqKGau-Ol1w.png 786w, https://miro.medium.com/v2/resize:fit:828/1*7EG5kSB1KH2kqKGau-Ol1w.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*7EG5kSB1KH2kqKGau-Ol1w.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*7EG5kSB1KH2kqKGau-Ol1w.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh lo pa c" width="1000" height="627" loading="eager" role="presentation"/></picture></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="4fde" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">With our techniques in place, it’s time for some results.</p><h1 id="44c2" class="no np gu bf nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol bk">Results</h1><h2 id="9e0b" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Render Time Results</h2><p id="89c8" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">The standard test set shows plane marching with a moderate lead over both shape assisted techniques. On the low end, render times are very close. However, as the set size increases, plane marching takes a pretty clear lead.</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qr qc l"></div></div></figure><p id="ce6d" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Notice that how the performance hit for growing set sizes isn’t stable. This shows how our performance is both data and view dependent. The further the rays need to march into the object, the worse performance will be; one set of benchmarks can’t tell the whole story.</p><p id="a03f" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">To get a better idea of what’s going on, I also benchmarked a degenerate case — a single solid voxel in the far corner of a 32x32x32 voxel set. This example is a bit contrived since the ideal thing to do here would be to shrink the set to 1x1x1 but it illustrates a general problem. Notice how vastly different the results are in the figure below for plane marching.</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qr qc l"></div></div></figure><p id="7861" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Both of the shape assisted techniques remain relatively the same with good performance.</p><h2 id="ed1d" class="pf np gu bf nq pg ph dy nu pi pj ea ny ms pk pl pm mw pn po pp na pq pr ps pt bk">Memory Impact</h2><p id="ffc7" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">Although not as taxing as other techniques when it comes to memory (particularly VAOs and display lists), raymarching isn’t the most compact technique.</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qr qc l"></div></div></figure><p id="ec83" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">To perform easy efficient raymarching, the entire voxel set for each object needs to be loaded into memory. This is in contrast with quad based techniques which only require data for solid voxels.</p><p id="9d4e" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">The one advantage raymarching has when it comes to memory is that it’s not data dependent. Any set of 32x32x32 voxels will take the same amount of memory regardless of their contents. Polygonal techniques will depend entirely on the data inside them, though they’re typically smaller.</p><p id="4aa7" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Main memory usage is negligible, as is to be expected with nearly all of the work taking place on the GPU:</p><figure class="ou ov ow ox oy oz"><div class="pz qa l fj"><div class="qr qc l"></div></div></figure><h1 id="9b8f" class="no np gu bf nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol bk">Where to go from Here</h1><p id="8899" class="pw-post-body-paragraph mh mi gu mj b mk om mm mn mo on mq mr ms oo mu mv mw op my mz na oq nc nd ne gn bk">Cube assisted raymarching seems like the way to go. It has a low upfront cost and performs well even in the worst case.</p><p id="6662" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Looking towards the future, there are three particularly notable caveats:</p><ol class=""><li id="44c5" class="mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne ng nh ni bk">There are likely many performance gains to be had, so don’t take these render times to be absolute. Optimizing raymarching while maintaining accurate results is difficult — many potentially large optimizations were abandoned due to their numerical instability.</li><li id="76f7" class="mh mi gu mj b mk nj mm mn mo nk mq mr ms nl mu mv mw nm my mz na nn nc nd ne ng nh ni bk">Performance will be architecture dependent. I regret not having more platforms to benchmark as performance is likely to degrade quickly on both competing and older architectures.</li><li id="8d19" class="mh mi gu mj b mk nj mm mn mo nk mq mr ms nl mu mv mw nm my mz na nn nc nd ne ng nh ni bk">Lighting is going to be more complicated. With polygonal techniques, a normal can be passed down the pipeline cheaply. With raymarching, normals are generally found numerically by taking multiple samples, which could end up being costly and may create lighting artifacts.</li></ol><p id="5478" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">Of course there’s also flexibility in raymarching. The techniques here can be easily combined with other ones such as rounded cubes or union/subtraction/intersection. It’ll also be a boon when voxel resolution is greater than render resolution.</p><p id="b0c6" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">3D hashing is a promising area thread to pull on to reduce memory overhead. For many voxel objects, only a small amount of colors will be used (compared to the size of the raw data set). By finding the final color after raymarching terminates via 3D hashing, a considerable amount of memory could be saved and the performance impact would likely be small — the bulk of the computation would still be the raymarching.</p><p id="c096" class="pw-post-body-paragraph mh mi gu mj b mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne gn bk">That’s it. Like last time, be sure to poke around with the code on GitHub:</p><div class="qs qt qu qv qw qx"><a href="https://github.com/cleak/VoxelPerf?source=post_page-----58018201d9d6--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qy ab is"><div class="qz ab co cb ra rb"><h2 class="bf gv ij z qa rc rd re rf rg rh gt bk">cleak/VoxelPerf</h2><div class="ri l"><h3 class="bf b ij z qa rc rd re rf rg rh du">VoxelPerf - Performance testing sandbox for voxel graphics</h3></div><div class="rj l"><p class="bf b dv z qa rc rd re rf rg rh du">github.com</p></div></div><div class="rk l"><div class="rl l rm rn ro rk rp lo qx"></div></div></div></a></div></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="rq rr ab iv"><div class="ri ab"><a class="rs ay am ao" rel="noopener follow" href="/tag/programming?source=post_page-----58018201d9d6--------------------------------"><div class="rt fj cx ru ge rv rw bf b bg z bk rx">Programming</div></a></div><div class="ri ab"><a class="rs ay am ao" rel="noopener follow" href="/tag/opengl?source=post_page-----58018201d9d6--------------------------------"><div class="rt fj cx ru ge rv rw bf b bg z bk rx">Opengl</div></a></div><div class="ri ab"><a class="rs ay am ao" rel="noopener follow" href="/tag/glsl?source=post_page-----58018201d9d6--------------------------------"><div class="rt fj cx ru ge rv rw bf b bg z bk rx">Glsl</div></a></div><div class="ri ab"><a class="rs ay am ao" rel="noopener follow" href="/tag/voxel?source=post_page-----58018201d9d6--------------------------------"><div class="rt fj cx ru ge rv rw bf b bg z bk rx">Voxel</div></a></div><div class="ri ab"><a class="rs ay am ao" rel="noopener follow" href="/tag/raymarching?source=post_page-----58018201d9d6--------------------------------"><div class="rt fj cx ru ge rv rw bf b bg z bk rx">Raymarching</div></a></div></div></div></div><div class="l"></div><footer class="ry rz sa sb sc sd se sf sg ab q sh si c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp sj"><div class="ab q ke"><div class="sk l"><span class="l sl sm sn e d"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F58018201d9d6&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=-----58018201d9d6---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></span><span class="l h g f so sp"><div class="ab q ke kf"><div class="pw-multi-vote-icon fj kg kh ki kj"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fp%2F58018201d9d6&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=-----58018201d9d6---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="kk ao kl km kn ko am kp kq kr kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l ks kt ku kv kw kx ky"><p class="bf b dv z du"><span class="kz">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao kk lc ld ab q fk le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b bg z du"><span class="pw-responses-count la lb">1</span></p></button></div></div></div></div><div class="ab q"><div class="sq l is"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F58018201d9d6&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;source=--------------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lh" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="sq l is"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al lp an ao ap ex lq lr lf ls"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="sr ss st su sv l bx"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="cl ab sw cp"><div class="ab ia"><a rel="noopener follow" href="/@calebleak?source=post_page-----58018201d9d6--------------------------------"><div class="l sx sy by sz ie"><div class="l fj"><img alt="Caleb Leak" class="l fd by ta tb cx" src="https://miro.medium.com/v2/resize:fill:144:144/1*Obf1P_1sCIvzvCZbSqwFMA.jpeg" width="72" height="72" loading="lazy"/><div class="if by l ta tb fs n ig ft"></div></div></div></a></div><div class="j i d"><div class="ab"><span><button class="bf b bg z ep rt eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff">Follow</button></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F00d770211e16&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;newsletterV3=73077ede4503&amp;newsletterV3Id=00d770211e16&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=-----58018201d9d6---------------------subscribe_user-----------"><button class="bf b bg z tf am tg th ti tj tk tl tm tn ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="tc td te"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="ab cn cp"><div class="l"><div class="ab q"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/@calebleak?source=post_page-----58018201d9d6--------------------------------"><h2 class="pw-author-name bf to tp tq tr bk"><span class="gn ix">Written by <!-- -->Caleb Leak</span></h2></a></div><div class="ri ab"><div class="l is"><span class="pw-follower-count bf b bg z bk"><a class="af ag ah ai aj ak al am an ao ap aq ar il" rel="noopener follow" href="/@calebleak/followers?source=post_page-----58018201d9d6--------------------------------">164 Followers</a></span></div></div><div class="ts l"></div></div><div class="h k"><div class="ab"><span><button class="bf b bg z ep rt eq er es et eu ev ew ex ey ez fa au fb fc fd bm fe ff">Follow</button></span><div class="dt l"><div><div><div class="bm" aria-hidden="false"><div class="l"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2F00d770211e16&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40calebleak%2Fraymarching-voxel-rendering-58018201d9d6&amp;newsletterV3=73077ede4503&amp;newsletterV3Id=00d770211e16&amp;user=Caleb+Leak&amp;userId=73077ede4503&amp;source=-----58018201d9d6---------------------subscribe_user-----------"><button class="bf b bg z tf am tg th ti tj tk tl tm tn ew ex ey ez fa fb fc fd bm fe ff" aria-label="Subscribe"><svg xmlns="http://www.w3.org/2000/svg" width="38" height="38" fill="none" viewBox="0 0 38 38" class="tc td te"><rect width="0.5" height="6.5" x="26.25" y="9.25" rx="0.25"></rect><rect width="0.5" height="6.5" x="29.75" y="12.25" rx="0.25" transform="rotate(90 29.75 12.25)"></rect><path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"></path><path d="M11.5 14.5 19 20l4-3"></path></svg></button></a></span></div></div></div></div></div></div></div></div><div class="tt bh tu tv tw tx ty tz"></div></div></div><div class="h k j"><div class="tt bh tu ua"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ub ab ke iv"><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/about?autoplay=1&amp;source=post_page-----58018201d9d6--------------------------------"><p class="bf b dv z du">About</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----58018201d9d6--------------------------------"><p class="bf b dv z du">Careers</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="uc ud l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----58018201d9d6--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="uc l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/business?source=post_page-----58018201d9d6--------------------------------"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20241017-182126-a0128a89d2"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-58018201d9d6","user-73077ede4503"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"lohpSummerUpsellEnabled":false,"publicationHierarchyEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"DEFAULT","explicit":false},"viewerIsBot":false},"debug":{"requestId":"c7801d4d-aa2e-4ccc-9cbf-17bde2bef054","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-4501d93a597608c4f5bf0680ae9d13dc-5625bf199c608da6-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fmedium.com\u002F@calebleak\u002Fraymarching-voxel-rendering-58018201d9d6","host":"medium.com","hostname":"medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20241017-182126-a0128a89d2","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20241017-182126-a0128a89d2","commit":"a0128a89d2d76bfa55b25492370b0bae4050224f"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"medium.com\"})":null,"postResult({\"id\":\"58018201d9d6\"})":{"__ref":"Post:58018201d9d6"}},"LinkedAccounts:73077ede4503":{"__typename":"LinkedAccounts","mastodon":null,"id":"73077ede4503"},"UserViewerEdge:userId:73077ede4503-viewerId:lo_8e28ecf3844c":{"__typename":"UserViewerEdge","id":"userId:73077ede4503-viewerId:lo_8e28ecf3844c","isFollowing":false,"isUser":false,"isMuting":false},"NewsletterV3:00d770211e16":{"__typename":"NewsletterV3","id":"00d770211e16","type":"NEWSLETTER_TYPE_AUTHOR","slug":"73077ede4503","name":"73077ede4503","collection":null,"user":{"__ref":"User:73077ede4503"}},"User:73077ede4503":{"__typename":"User","id":"73077ede4503","name":"Caleb Leak","username":"calebleak","newsletterV3":{"__ref":"NewsletterV3:00d770211e16"},"linkedAccounts":{"__ref":"LinkedAccounts:73077ede4503"},"isSuspended":false,"imageId":"1*Obf1P_1sCIvzvCZbSqwFMA.jpeg","mediumMemberAt":0,"verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":164},"customDomainState":null,"hasSubdomain":false,"bio":"","isPartnerProgramEnrolled":false,"viewerEdge":{"__ref":"UserViewerEdge:userId:73077ede4503-viewerId:lo_8e28ecf3844c"},"viewerIsUser":false,"postSubscribeMembershipUpsellShownAt":0,"userPostCounts({\"includeResponsesCount\":true})":null,"membership":null,"allowNotes":true,"twitterScreenName":""},"Paragraph:93e18b064434_0":{"__typename":"Paragraph","id":"93e18b064434_0","name":"77d3","type":"H3","href":null,"layout":null,"metadata":null,"text":"Raymarching Voxel Rendering","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_1":{"__typename":"Paragraph","id":"93e18b064434_1","name":"2ba3","type":"P","href":null,"layout":null,"metadata":null,"text":"Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well, and doesn’t require much upfront computation. Of course it comes at a cost — it’s fragment shader heavy so you’ll like end up fillrate limited. Its complexity also makes it a tad fragile; a little floating point error buildup can cause tunneling and subtle artifacts.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_2":{"__typename":"Paragraph","id":"93e18b064434_2","name":"6837","type":"P","href":null,"layout":null,"metadata":null,"text":"For a little context, take a look at Inigo Quilez’s excellent work and writeups with ray marching. One caveat is that his work primarily focuses on signed distance fields, which the techniques below are not — unsigned distance fields are closer to being accurate.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":37,"end":49,"href":"http:\u002F\u002Fwww.iquilezles.org\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":52,"end":66,"href":"https:\u002F\u002Fwww.shadertoy.com\u002Fuser\u002Fiq","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":71,"end":80,"href":"http:\u002F\u002Fiquilezles.org\u002Fwww\u002Farticles\u002Fraymarchingdf\u002Fraymarchingdf.htm","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_3":{"__typename":"Paragraph","id":"93e18b064434_3","name":"fe4c","type":"P","href":null,"layout":null,"metadata":null,"text":"So, on to the techniques. I’ll cover three primary techniques:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_4":{"__typename":"Paragraph","id":"93e18b064434_4","name":"3bbc","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Raymarching plane intersections. A set of NxNxN voxels can be divided up using N+ 1 planes along each axis. An easy approach to raymarching is to take a ray for each fragment and march it along each plane intersection until a non-empty voxel is found.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_5":{"__typename":"Paragraph","id":"93e18b064434_5","name":"4003","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Sphere assisted raymarching. This technique reduces the number of voxel lookups, though it’s not always a performance win. The basic idea is to store the shape information separate from the color information. Then, instead of storing the shape information directly, each empty voxel stores the radius of the empty space around it — representing the largest sphere that could fill the empty space centered a the current voxel. This allows for large steps through empty space.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_6":{"__typename":"Paragraph","id":"93e18b064434_6","name":"a50e","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Cube assisted raymarching. Similar to the previous technique, except instead of the largest sphere, the shape information stores the largest cube possible around the current location. Why a cube instead of a sphere? Because it’s much much faster to compute — an order of magnitude faster. Its shape is slightly suboptimal, but still gets most of the speedup from the previous technique.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_7":{"__typename":"Paragraph","id":"93e18b064434_7","name":"7bce","type":"H3","href":null,"layout":null,"metadata":null,"text":"Test setup","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_8":{"__typename":"Paragraph","id":"93e18b064434_8","name":"93af","type":"P","href":null,"layout":null,"metadata":null,"text":"Like in my previous tests, to compare these techniques I started by throwing a bunch of 32x32x32 voxel spheres at them and measuring the memory impact and per-frame render times. In addition, a degenerate case of a 32x32x32 voxel set with only a single solid voxel in its corner was added to demonstrate where the plane marching technique falls short.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":11,"end":25,"href":"https:\u002F\u002Fmedium.com\u002F@calebleak\u002Fquads-all-the-way-down-simple-voxel-rendering-fea1e4488e26","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_9":{"__typename":"Paragraph","id":"93e18b064434_9","name":"52fa","type":"P","href":null,"layout":null,"metadata":null,"text":"The same test machine and setup was used — 1920x1080 on Windows 10 using a GTX 980 Ti, Intel i7–4790k, and 16GB of main memory.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_10":{"__typename":"Paragraph","id":"93e18b064434_10","name":"d963","type":"P","href":null,"layout":null,"metadata":null,"text":"I added an additional constraint that the previous tests didn’t have. All techniques must produce a pixel perfect match for their quad based brethren. This is important because it’s easy to cut a few corners and get a perf boost at the cost of accuracy — or to let floating point error cause close but incorrect results.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*701JDcCKRoXspSYyYSXWaQ.png":{"__typename":"ImageMetadata","id":"1*701JDcCKRoXspSYyYSXWaQ.png","originalHeight":433,"originalWidth":473,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_11":{"__typename":"Paragraph","id":"93e18b064434_11","name":"dc13","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*701JDcCKRoXspSYyYSXWaQ.png"},"text":"Figure 1. The voxel object used.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_12":{"__typename":"Paragraph","id":"93e18b064434_12","name":"0996","type":"P","href":null,"layout":null,"metadata":null,"text":"For each technique, the test is repeated for different numbers of objects to allow trends to emerge. The largest data set contains 16k voxel objects and is enough to strain the test system.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_13":{"__typename":"Paragraph","id":"93e18b064434_13","name":"a3e3","type":"P","href":null,"layout":null,"metadata":null,"text":"I posted the full source for these tests on GitHub. I encourage you take a look — a source file is worth a thousand words.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":13,"end":24,"href":"https:\u002F\u002Fgithub.com\u002Fcleak\u002FVoxelPerf","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_14":{"__typename":"Paragraph","id":"93e18b064434_14","name":"5fa7","type":"H4","href":null,"layout":null,"metadata":null,"text":"Raymarching Overview","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_15":{"__typename":"Paragraph","id":"93e18b064434_15","name":"1e49","type":"P","href":null,"layout":null,"metadata":null,"text":"Raymarching is an interesting rendering technique. It takes a ray consisting of an origin p0 and a direction d . It then checks points along the ray for being inside a solid object. To do this, it iteratively marches along the ray, starting at p0 and taking non-uniform steps along the ray. At each step, the distance to the closest possible intersection is conservatively estimated — it can be overestimated, but must never be underestimated — and a step of that size is then taken.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":90,"end":92,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":109,"end":110,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"CODE","start":244,"end":246,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*eTlifCD3LaKKqf2shSYD5Q.png":{"__typename":"ImageMetadata","id":"1*eTlifCD3LaKKqf2shSYD5Q.png","originalHeight":486,"originalWidth":575,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_16":{"__typename":"Paragraph","id":"93e18b064434_16","name":"2887","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*eTlifCD3LaKKqf2shSYD5Q.png"},"text":"Figure 2. A raymarched voxel sphere rendered on the surface of a cube.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_17":{"__typename":"Paragraph","id":"93e18b064434_17","name":"0dbc","type":"P","href":null,"layout":null,"metadata":null,"text":"Raymarching requires a termination criteria. In the case of signed distance fields (a typical example Google will turn up), this criteria is convergence. Step sizes will eventually approach zero and the intersection will be determined to have been found. In our case, we can simplify things by checking if the current point is inside a solid voxel.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_18":{"__typename":"Paragraph","id":"93e18b064434_18","name":"939a","type":"P","href":null,"layout":null,"metadata":null,"text":"For rendering voxel objects, each object, no matter how many voxels it contains, is rendered using a cube. Six quads are sent into the render pipeline and the fragment shader does the hard work of finding the intersections by marching rays from the cube’s surface.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_19":{"__typename":"Paragraph","id":"93e18b064434_19","name":"4df3","type":"P","href":null,"layout":null,"metadata":null,"text":"Putting this together in a fragment shader, it becomes:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:77281094ec96a8d6b716cbb387e2589c":{"__typename":"MediaResource","id":"77281094ec96a8d6b716cbb387e2589c","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"Raymarching.cpp"},"Paragraph:93e18b064434_20":{"__typename":"Paragraph","id":"93e18b064434_20","name":"2f83","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:77281094ec96a8d6b716cbb387e2589c"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_21":{"__typename":"Paragraph","id":"93e18b064434_21","name":"4a90","type":"P","href":null,"layout":null,"metadata":null,"text":"The important piece here is distance estimation function, which the specific techniques will fill in.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_22":{"__typename":"Paragraph","id":"93e18b064434_22","name":"f8e9","type":"H4","href":null,"layout":null,"metadata":null,"text":"Raymarching Plane Intersections technique","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*yh0jqrXJ9reiOX1zzN8Uqg.png":{"__typename":"ImageMetadata","id":"1*yh0jqrXJ9reiOX1zzN8Uqg.png","originalHeight":1096,"originalWidth":863,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_23":{"__typename":"Paragraph","id":"93e18b064434_23","name":"0a93","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*yh0jqrXJ9reiOX1zzN8Uqg.png"},"text":"Figure 3. A voxel reindeer showing a single plane-ray intersection.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_24":{"__typename":"Paragraph","id":"93e18b064434_24","name":"b6ac","type":"P","href":null,"layout":null,"metadata":null,"text":"This technique imagines planes separating each layer of voxels. A ray is then marched along each plane intersection and the voxels at the intersection points are checked for being solid.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_25":{"__typename":"Paragraph","id":"93e18b064434_25","name":"fb37","type":"P","href":null,"layout":null,"metadata":null,"text":"It’s important to check the the intersection points in the order in which the ray reaches them. The key here is that planes along all three axes will need to be checked each step, with the closest intersection being the step taken.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_26":{"__typename":"Paragraph","id":"93e18b064434_26","name":"7e38","type":"P","href":null,"layout":null,"metadata":null,"text":"Working in voxel-unit-space (i.e. where one voxel is 1x1x1 units in size) finding these intersections becomes easy. Simply check the fraction require to round up to the next integer (or down for negative directions) and then divide by the appropriate component of d to make it exact. This works out to be:","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"CODE","start":264,"end":265,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:cfb5aa6d93d0895321efacedd164fe92":{"__typename":"MediaResource","id":"cfb5aa6d93d0895321efacedd164fe92","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"PlaneMarching.glsl"},"Paragraph:93e18b064434_27":{"__typename":"Paragraph","id":"93e18b064434_27","name":"3a8e","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:cfb5aa6d93d0895321efacedd164fe92"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_28":{"__typename":"Paragraph","id":"93e18b064434_28","name":"5d02","type":"P","href":null,"layout":null,"metadata":null,"text":"Notice there’s a tiny epsilon to guarantee there’s always at least a small amount of progress.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_29":{"__typename":"Paragraph","id":"93e18b064434_29","name":"3474","type":"P","href":null,"layout":null,"metadata":null,"text":"This technique works well, but notice how it will never move more than a single voxel at a time. Wouldn’t it be nice to skip over all of those empty voxels we check before reaching a solid one? Well, we can — at least some of them.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_30":{"__typename":"Paragraph","id":"93e18b064434_30","name":"6f22","type":"H4","href":null,"layout":null,"metadata":null,"text":"Sphere Assisted Raymarching","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*VKJqifIEtJTD1XPtJG1e4g.png":{"__typename":"ImageMetadata","id":"1*VKJqifIEtJTD1XPtJG1e4g.png","originalHeight":1075,"originalWidth":1148,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_31":{"__typename":"Paragraph","id":"93e18b064434_31","name":"4cb0","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*VKJqifIEtJTD1XPtJG1e4g.png"},"text":"Figure 4. Degenerate case for the previous technique — lots of checking of empty voxels.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_32":{"__typename":"Paragraph","id":"93e18b064434_32","name":"c6bf","type":"P","href":null,"layout":null,"metadata":null,"text":"In the previous technique, all voxel information was crammed in a single 3D texture, with the alpha channel giving information about whether or not the voxel is solid. This is straightforward and works well — especially since only a single texture needs to be swapped between objects. However, some degenerate cases will require many steps checking empty voxels.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_33":{"__typename":"Paragraph","id":"93e18b064434_33","name":"5231","type":"P","href":null,"layout":null,"metadata":null,"text":"The worst case scenario for the previous technique is, rather ironically, an empty set of voxels. Each ray will have to pass through the entire object before deciding there’s nothing to hit and terminating. A less trivial case would be a voxel object with only a wall of solid voxels at the far end of the z-axis. Viewed with the wall on the far side, each ray will have to traverse the entire width of the object before finding its destination — obviously not ideal. Figure 4 shows this case.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_34":{"__typename":"Paragraph","id":"93e18b064434_34","name":"ccab","type":"P","href":null,"layout":null,"metadata":null,"text":"Enter sphere assisted raymarching to help. Instead of storing simply solid\u002Fnot solid values in the alpha channel, we can store the distance to the nearest solid voxel. Then, when traversing an empty voxel, we can take a massive step across many empty voxels. Pretty neat, huh?","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_35":{"__typename":"Paragraph","id":"93e18b064434_35","name":"88aa","type":"P","href":null,"layout":null,"metadata":null,"text":"Figure 5 is a cross section of what such a technique would generate. The blue cells represent the solid voxels. The white cells are empty, and store the amount of distance that can be safely moved before reaching a solid voxel.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*GhT95NQaZ5H_PIvuWvkQiA.png":{"__typename":"ImageMetadata","id":"1*GhT95NQaZ5H_PIvuWvkQiA.png","originalHeight":644,"originalWidth":1027,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_36":{"__typename":"Paragraph","id":"93e18b064434_36","name":"1fe3","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*GhT95NQaZ5H_PIvuWvkQiA.png"},"text":"Figure 5. A cross section of a sphere-assisted shape.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_37":{"__typename":"Paragraph","id":"93e18b064434_37","name":"1c30","type":"P","href":null,"layout":null,"metadata":null,"text":"The hard part is generating this shape data. It’s important to notice that we’ve gone from normalized floating point values for the shape data to non-negative integers. To keep using normalized floats for the color channels, the shape data is split off into an integer 3D texture.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_38":{"__typename":"Paragraph","id":"93e18b064434_38","name":"8cda","type":"P","href":null,"layout":null,"metadata":null,"text":"The changes needed for the fragment shader are pretty minimal:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:8972e80b46bae72e5df0143508794805":{"__typename":"MediaResource","id":"8972e80b46bae72e5df0143508794805","iframeSrc":"","iframeHeight":0,"iframeWidth":0,"title":"AssistedRaymarching.glsl"},"Paragraph:93e18b064434_39":{"__typename":"Paragraph","id":"93e18b064434_39","name":"12a7","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"Shape assisted raymarching. 255 is a constant representing a solid voxel.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:8972e80b46bae72e5df0143508794805"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_40":{"__typename":"Paragraph","id":"93e18b064434_40","name":"779e","type":"H4","href":null,"layout":null,"metadata":null,"text":"Cube Assisted Raymarching","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_41":{"__typename":"Paragraph","id":"93e18b064434_41","name":"366c","type":"P","href":null,"layout":null,"metadata":null,"text":"The biggest drawback of sphere assisted raymarching is the upfront workload. A simple implementation runs in O(n²) time, with n being the number of voxels. This gets big fast — up to ~1,000,000 steps for a simple 32x32x32 voxel set. Enter cubes to save the day.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_42":{"__typename":"Paragraph","id":"93e18b064434_42","name":"6d82","type":"P","href":null,"layout":null,"metadata":null,"text":"Similar to the sphere assisted raymarching, cube assisted raymarching checks how large of an object can be inserted around each empty cell; using cubes of course rather than spheres. This is slightly suboptimal in most cases, takes us from O(n²) upfront cost to O(n log n). How? Using a summed area table and a binary search for the right cube size.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":287,"end":304,"href":"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSummed_area_table","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_43":{"__typename":"Paragraph","id":"93e18b064434_43","name":"8688","type":"P","href":null,"layout":null,"metadata":null,"text":"Summed area tables are a neat data structure often seen in computer vision. A full explanation is beyond the scope of this article, but the executive summary is that they store the sum of all prior cells at a specific location. Using this information, it’s quick to compute the area of an arbitrary box by subtracting off the parts we’re not interested in. Once created, the area of an arbitrary box can be computed in O(1) time.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_44":{"__typename":"Paragraph","id":"93e18b064434_44","name":"edc1","type":"P","href":null,"layout":null,"metadata":null,"text":"The algorithm for this is to (1) compute the summed area table and then (2) for each cell, binary search up to the maximum sized cube. Since area calculations using the table are O(1), each voxel takes only O(log n) time.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_45":{"__typename":"Paragraph","id":"93e18b064434_45","name":"948f","type":"P","href":null,"layout":null,"metadata":null,"text":"Comparing the resulting shape to the previous, we can see it’s not as efficient, though it’s still pretty good:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*7EG5kSB1KH2kqKGau-Ol1w.png":{"__typename":"ImageMetadata","id":"1*7EG5kSB1KH2kqKGau-Ol1w.png","originalHeight":643,"originalWidth":1027,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:93e18b064434_46":{"__typename":"Paragraph","id":"93e18b064434_46","name":"6073","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*7EG5kSB1KH2kqKGau-Ol1w.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_47":{"__typename":"Paragraph","id":"93e18b064434_47","name":"4fde","type":"P","href":null,"layout":null,"metadata":null,"text":"With our techniques in place, it’s time for some results.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_48":{"__typename":"Paragraph","id":"93e18b064434_48","name":"44c2","type":"H3","href":null,"layout":null,"metadata":null,"text":"Results","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_49":{"__typename":"Paragraph","id":"93e18b064434_49","name":"9e0b","type":"H4","href":null,"layout":null,"metadata":null,"text":"Render Time Results","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_50":{"__typename":"Paragraph","id":"93e18b064434_50","name":"89c8","type":"P","href":null,"layout":null,"metadata":null,"text":"The standard test set shows plane marching with a moderate lead over both shape assisted techniques. On the low end, render times are very close. However, as the set size increases, plane marching takes a pretty clear lead.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:f02c52db4d30c04ce3dc6aab9b53d953":{"__typename":"MediaResource","id":"f02c52db4d30c04ce3dc6aab9b53d953","iframeSrc":"https:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=%2F%2Fembed.chartblocks.com%2F1.0%2F%3Fc%3D593317239973d25c5751ff04%26t%3D8e613a42d022191&url=https%3A%2F%2Fpublic.chartblocks.com%2Fc%2F593317239973d25c5751ff04%3Ft%3D8e613a42d022191&image=http%3A%2F%2Fd3ugvbs94d921r.cloudfront.net%2F593317239973d25c5751ff04.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=chartblocks","iframeHeight":450,"iframeWidth":800,"title":"Time Per Frame"},"Paragraph:93e18b064434_51":{"__typename":"Paragraph","id":"93e18b064434_51","name":"98df","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:f02c52db4d30c04ce3dc6aab9b53d953"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_52":{"__typename":"Paragraph","id":"93e18b064434_52","name":"ce6d","type":"P","href":null,"layout":null,"metadata":null,"text":"Notice that how the performance hit for growing set sizes isn’t stable. This shows how our performance is both data and view dependent. The further the rays need to march into the object, the worse performance will be; one set of benchmarks can’t tell the whole story.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_53":{"__typename":"Paragraph","id":"93e18b064434_53","name":"a03f","type":"P","href":null,"layout":null,"metadata":null,"text":"To get a better idea of what’s going on, I also benchmarked a degenerate case — a single solid voxel in the far corner of a 32x32x32 voxel set. This example is a bit contrived since the ideal thing to do here would be to shrink the set to 1x1x1 but it illustrates a general problem. Notice how vastly different the results are in the figure below for plane marching.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:b807b5a723bf1a10e66cbdd1e749eb87":{"__typename":"MediaResource","id":"b807b5a723bf1a10e66cbdd1e749eb87","iframeSrc":"https:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=%2F%2Fembed.chartblocks.com%2F1.0%2F%3Fc%3D59335d6a9973d23a6551ff04%26t%3D16fdab212b019ae&url=https%3A%2F%2Fpublic.chartblocks.com%2Fc%2F59335d6a9973d23a6551ff04%3Ft%3D16fdab212b019ae&image=http%3A%2F%2Fd3ugvbs94d921r.cloudfront.net%2F59335d6a9973d23a6551ff04.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=chartblocks","iframeHeight":450,"iframeWidth":800,"title":"Time Per Frame (Degenerate Case)"},"Paragraph:93e18b064434_54":{"__typename":"Paragraph","id":"93e18b064434_54","name":"5bee","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:b807b5a723bf1a10e66cbdd1e749eb87"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_55":{"__typename":"Paragraph","id":"93e18b064434_55","name":"7861","type":"P","href":null,"layout":null,"metadata":null,"text":"Both of the shape assisted techniques remain relatively the same with good performance.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_56":{"__typename":"Paragraph","id":"93e18b064434_56","name":"ed1d","type":"H4","href":null,"layout":null,"metadata":null,"text":"Memory Impact","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_57":{"__typename":"Paragraph","id":"93e18b064434_57","name":"ffc7","type":"P","href":null,"layout":null,"metadata":null,"text":"Although not as taxing as other techniques when it comes to memory (particularly VAOs and display lists), raymarching isn’t the most compact technique.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:3014eccb8e3600cc4653de010f911452":{"__typename":"MediaResource","id":"3014eccb8e3600cc4653de010f911452","iframeSrc":"https:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=%2F%2Fembed.chartblocks.com%2F1.0%2F%3Fc%3D593315d69973d21d5751ff04%26t%3D30b7fab99d750da&url=https%3A%2F%2Fpublic.chartblocks.com%2Fc%2F593315d69973d21d5751ff04%3Ft%3D30b7fab99d750da&image=http%3A%2F%2Fd3ugvbs94d921r.cloudfront.net%2F593315d69973d21d5751ff04.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=chartblocks","iframeHeight":450,"iframeWidth":800,"title":"GPU Memory Usage"},"Paragraph:93e18b064434_58":{"__typename":"Paragraph","id":"93e18b064434_58","name":"83a8","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:3014eccb8e3600cc4653de010f911452"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_59":{"__typename":"Paragraph","id":"93e18b064434_59","name":"ec83","type":"P","href":null,"layout":null,"metadata":null,"text":"To perform easy efficient raymarching, the entire voxel set for each object needs to be loaded into memory. This is in contrast with quad based techniques which only require data for solid voxels.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_60":{"__typename":"Paragraph","id":"93e18b064434_60","name":"9d4e","type":"P","href":null,"layout":null,"metadata":null,"text":"The one advantage raymarching has when it comes to memory is that it’s not data dependent. Any set of 32x32x32 voxels will take the same amount of memory regardless of their contents. Polygonal techniques will depend entirely on the data inside them, though they’re typically smaller.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_61":{"__typename":"Paragraph","id":"93e18b064434_61","name":"4aa7","type":"P","href":null,"layout":null,"metadata":null,"text":"Main memory usage is negligible, as is to be expected with nearly all of the work taking place on the GPU:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"MediaResource:6c7c7711a8ac229d3517f34adaed3c68":{"__typename":"MediaResource","id":"6c7c7711a8ac229d3517f34adaed3c68","iframeSrc":"https:\u002F\u002Fcdn.embedly.com\u002Fwidgets\u002Fmedia.html?src=%2F%2Fembed.chartblocks.com%2F1.0%2F%3Fc%3D5933187d9973d2b85751ff04%26t%3D6076b8c989ef450&url=https%3A%2F%2Fpublic.chartblocks.com%2Fc%2F5933187d9973d2b85751ff04%3Ft%3D6076b8c989ef450&image=http%3A%2F%2Fd3ugvbs94d921r.cloudfront.net%2F5933187d9973d2b85751ff04.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=chartblocks","iframeHeight":450,"iframeWidth":800,"title":"Main Memory Usage"},"Paragraph:93e18b064434_62":{"__typename":"Paragraph","id":"93e18b064434_62","name":"1aa9","type":"IFRAME","href":null,"layout":"INSET_CENTER","metadata":null,"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":{"__typename":"Iframe","mediaResource":{"__ref":"MediaResource:6c7c7711a8ac229d3517f34adaed3c68"}},"mixtapeMetadata":null},"Paragraph:93e18b064434_63":{"__typename":"Paragraph","id":"93e18b064434_63","name":"9b8f","type":"H3","href":null,"layout":null,"metadata":null,"text":"Where to go from Here","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_64":{"__typename":"Paragraph","id":"93e18b064434_64","name":"8899","type":"P","href":null,"layout":null,"metadata":null,"text":"Cube assisted raymarching seems like the way to go. It has a low upfront cost and performs well even in the worst case.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_65":{"__typename":"Paragraph","id":"93e18b064434_65","name":"6662","type":"P","href":null,"layout":null,"metadata":null,"text":"Looking towards the future, there are three particularly notable caveats:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_66":{"__typename":"Paragraph","id":"93e18b064434_66","name":"44c5","type":"OLI","href":null,"layout":null,"metadata":null,"text":"There are likely many performance gains to be had, so don’t take these render times to be absolute. Optimizing raymarching while maintaining accurate results is difficult — many potentially large optimizations were abandoned due to their numerical instability.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_67":{"__typename":"Paragraph","id":"93e18b064434_67","name":"76f7","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Performance will be architecture dependent. I regret not having more platforms to benchmark as performance is likely to degrade quickly on both competing and older architectures.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_68":{"__typename":"Paragraph","id":"93e18b064434_68","name":"8d19","type":"OLI","href":null,"layout":null,"metadata":null,"text":"Lighting is going to be more complicated. With polygonal techniques, a normal can be passed down the pipeline cheaply. With raymarching, normals are generally found numerically by taking multiple samples, which could end up being costly and may create lighting artifacts.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_69":{"__typename":"Paragraph","id":"93e18b064434_69","name":"5478","type":"P","href":null,"layout":null,"metadata":null,"text":"Of course there’s also flexibility in raymarching. The techniques here can be easily combined with other ones such as rounded cubes or union\u002Fsubtraction\u002Fintersection. It’ll also be a boon when voxel resolution is greater than render resolution.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_70":{"__typename":"Paragraph","id":"93e18b064434_70","name":"b0c6","type":"P","href":null,"layout":null,"metadata":null,"text":"3D hashing is a promising area thread to pull on to reduce memory overhead. For many voxel objects, only a small amount of colors will be used (compared to the size of the raw data set). By finding the final color after raymarching terminates via 3D hashing, a considerable amount of memory could be saved and the performance impact would likely be small — the bulk of the computation would still be the raymarching.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_71":{"__typename":"Paragraph","id":"93e18b064434_71","name":"c096","type":"P","href":null,"layout":null,"metadata":null,"text":"That’s it. Like last time, be sure to poke around with the code on GitHub:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:93e18b064434_72":{"__typename":"Paragraph","id":"93e18b064434_72","name":"fd58","type":"MIXTAPE_EMBED","href":null,"layout":null,"metadata":null,"text":"cleak\u002FVoxelPerf\nVoxelPerf - Performance testing sandbox for voxel graphicsgithub.com","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":84,"href":"https:\u002F\u002Fgithub.com\u002Fcleak\u002FVoxelPerf","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"EM","start":16,"end":74,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":{"__typename":"MixtapeMetadata","href":"https:\u002F\u002Fgithub.com\u002Fcleak\u002FVoxelPerf","mediaResource":{"__typename":"MediaResource","mediumCatalog":null},"thumbnailImageId":"0*O_yRFIVRkH4vgxsl."}},"PostViewerEdge:postId:58018201d9d6-viewerId:lo_8e28ecf3844c":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:58018201d9d6-viewerId:lo_8e28ecf3844c"},"Tag:programming":{"__typename":"Tag","id":"programming","displayTitle":"Programming","normalizedTagSlug":"programming"},"Tag:opengl":{"__typename":"Tag","id":"opengl","displayTitle":"Opengl","normalizedTagSlug":"opengl"},"Tag:glsl":{"__typename":"Tag","id":"glsl","displayTitle":"Glsl","normalizedTagSlug":"glsl"},"Tag:voxel":{"__typename":"Tag","id":"voxel","displayTitle":"Voxel","normalizedTagSlug":"voxel"},"Tag:raymarching":{"__typename":"Tag","id":"raymarching","displayTitle":"Raymarching","normalizedTagSlug":"raymarching"},"Post:58018201d9d6":{"__typename":"Post","id":"58018201d9d6","collection":null,"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"57b8","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:93e18b064434_0"},{"__ref":"Paragraph:93e18b064434_1"},{"__ref":"Paragraph:93e18b064434_2"},{"__ref":"Paragraph:93e18b064434_3"},{"__ref":"Paragraph:93e18b064434_4"},{"__ref":"Paragraph:93e18b064434_5"},{"__ref":"Paragraph:93e18b064434_6"},{"__ref":"Paragraph:93e18b064434_7"},{"__ref":"Paragraph:93e18b064434_8"},{"__ref":"Paragraph:93e18b064434_9"},{"__ref":"Paragraph:93e18b064434_10"},{"__ref":"Paragraph:93e18b064434_11"},{"__ref":"Paragraph:93e18b064434_12"},{"__ref":"Paragraph:93e18b064434_13"},{"__ref":"Paragraph:93e18b064434_14"},{"__ref":"Paragraph:93e18b064434_15"},{"__ref":"Paragraph:93e18b064434_16"},{"__ref":"Paragraph:93e18b064434_17"},{"__ref":"Paragraph:93e18b064434_18"},{"__ref":"Paragraph:93e18b064434_19"},{"__ref":"Paragraph:93e18b064434_20"},{"__ref":"Paragraph:93e18b064434_21"},{"__ref":"Paragraph:93e18b064434_22"},{"__ref":"Paragraph:93e18b064434_23"},{"__ref":"Paragraph:93e18b064434_24"},{"__ref":"Paragraph:93e18b064434_25"},{"__ref":"Paragraph:93e18b064434_26"},{"__ref":"Paragraph:93e18b064434_27"},{"__ref":"Paragraph:93e18b064434_28"},{"__ref":"Paragraph:93e18b064434_29"},{"__ref":"Paragraph:93e18b064434_30"},{"__ref":"Paragraph:93e18b064434_31"},{"__ref":"Paragraph:93e18b064434_32"},{"__ref":"Paragraph:93e18b064434_33"},{"__ref":"Paragraph:93e18b064434_34"},{"__ref":"Paragraph:93e18b064434_35"},{"__ref":"Paragraph:93e18b064434_36"},{"__ref":"Paragraph:93e18b064434_37"},{"__ref":"Paragraph:93e18b064434_38"},{"__ref":"Paragraph:93e18b064434_39"},{"__ref":"Paragraph:93e18b064434_40"},{"__ref":"Paragraph:93e18b064434_41"},{"__ref":"Paragraph:93e18b064434_42"},{"__ref":"Paragraph:93e18b064434_43"},{"__ref":"Paragraph:93e18b064434_44"},{"__ref":"Paragraph:93e18b064434_45"},{"__ref":"Paragraph:93e18b064434_46"},{"__ref":"Paragraph:93e18b064434_47"},{"__ref":"Paragraph:93e18b064434_48"},{"__ref":"Paragraph:93e18b064434_49"},{"__ref":"Paragraph:93e18b064434_50"},{"__ref":"Paragraph:93e18b064434_51"},{"__ref":"Paragraph:93e18b064434_52"},{"__ref":"Paragraph:93e18b064434_53"},{"__ref":"Paragraph:93e18b064434_54"},{"__ref":"Paragraph:93e18b064434_55"},{"__ref":"Paragraph:93e18b064434_56"},{"__ref":"Paragraph:93e18b064434_57"},{"__ref":"Paragraph:93e18b064434_58"},{"__ref":"Paragraph:93e18b064434_59"},{"__ref":"Paragraph:93e18b064434_60"},{"__ref":"Paragraph:93e18b064434_61"},{"__ref":"Paragraph:93e18b064434_62"},{"__ref":"Paragraph:93e18b064434_63"},{"__ref":"Paragraph:93e18b064434_64"},{"__ref":"Paragraph:93e18b064434_65"},{"__ref":"Paragraph:93e18b064434_66"},{"__ref":"Paragraph:93e18b064434_67"},{"__ref":"Paragraph:93e18b064434_68"},{"__ref":"Paragraph:93e18b064434_69"},{"__ref":"Paragraph:93e18b064434_70"},{"__ref":"Paragraph:93e18b064434_71"},{"__ref":"Paragraph:93e18b064434_72"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:73077ede4503"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fmedium.com\u002F@calebleak\u002Fraymarching-voxel-rendering-58018201d9d6","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isPublished":true,"latestPublishedVersion":"93e18b064434","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":1},"clapCount":114,"allowResponses":true,"isLimitedState":false,"title":"Raymarching Voxel Rendering","isSeries":false,"sequence":null,"uniqueSlug":"raymarching-voxel-rendering-58018201d9d6","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1496543598930,"readingTime":8.666981132075472,"previewContent":{"__typename":"PreviewContent","subtitle":"Raymarching (not to be confused with ray tracing) is one of the most interesting ways to render voxels. It’s performant, parallelizes well…"},"previewImage":{"__ref":"ImageMetadata:1*yh0jqrXJ9reiOX1zzN8Uqg.png"},"isShortform":false,"seoTitle":"","firstPublishedAt":1496543516256,"updatedAt":1523317514815,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:58018201d9d6-viewerId:lo_8e28ecf3844c"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:programming"},{"__ref":"Tag:opengl"},{"__ref":"Tag:glsl"},{"__ref":"Tag:voxel"},{"__ref":"Tag:raymarching"}],"isNewsletter":false,"statusForCollection":null,"pendingCollection":null,"detectedLanguage":"en","wordCount":2045,"layerCake":0}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"HIT"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.7e50e797.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.018e7ca9.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.6318add7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1386.6a7a21a1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.84e4bd5c.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/719.ae4dd3e0.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.9f9e01d2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6349.b071a958.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.826a25fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1443.598cb8b2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3735.8c38ede2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.d10c9ba0.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.cd03f950.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.08de95de.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/1781.db373833.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.0330d157.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.ca7937c2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.d195c6f1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.21ff89d3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7394.55c925ce.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2961.00a48598.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/230.4d7a2738.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.59acaed3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.563d0db5.chunk.js"></script><script>window.main();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'8d5b272ab91b1e9d',t:'MTcyOTQ0OTgwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body></html>